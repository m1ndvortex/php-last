import{d as e,r as s,c as a,o as r,x as l,y as t,C as o,B as i,z as d,L as u,J as n,O as m,H as c,_ as p,Q as v,k as w,V as b,E as x,P as y,G as h,M as f,u as g}from"./chunk-6e15bf0e.js";import{a3 as k}from"./chunk-7e530ccd.js";import{_ as j}from"./chunk-4e9b842f.js";import"./chunk-b3261f71.js";import"./chunk-842293c6.js";import"./chunk-63a63872.js";import"./chunk-e5f6a124.js";const L={class:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8"},$={class:"sm:mx-auto sm:w-full sm:max-w-md"},C={class:"text-center"},_={class:"text-3xl font-bold text-gray-900"},M={class:"mt-2 text-sm text-gray-600"},B={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},V={class:"card"},q={key:0,class:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md"},z={class:"text-sm text-red-600"},P={for:"email",class:"form-label"},O=["disabled"],U={key:0,class:"mt-1 text-sm text-red-600"},A={for:"password",class:"form-label"},E={class:"relative"},H=["type","disabled"],G={key:0,class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},J={key:1,class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Q={key:0,class:"mt-1 text-sm text-red-600"},S={class:"flex items-center justify-between"},D={class:"flex items-center"},F=["disabled"],I={for:"remember-me",class:"ml-2 block text-sm text-gray-900"},K={class:"text-sm"},N=["disabled"],R={key:0,class:"flex items-center justify-center"},T={key:1},W={class:"mt-6 text-center"},X=e({__name:"LoginView",setup(e){const X=h(),Y=f(),Z=k(),ee=s({email:"",password:"",remember:!1}),se=s(!1),ae=s({}),re=a(()=>""!==ee.value.email.trim()&&""!==ee.value.password.trim()&&0===Object.keys(ae.value).length),le=e=>{switch(e){case"email":ee.value.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ee.value.email)?delete ae.value.email:ae.value.email="Please enter a valid email address":ae.value.email="Email is required";break;case"password":ee.value.password.trim()?ee.value.password.length<6?ae.value.password="Password must be at least 6 characters":delete ae.value.password:ae.value.password="Password is required"}},te=async()=>{if(le("email"),le("password"),0!==Object.keys(ae.value).length)return;if((await Z.login({email:ee.value.email,password:ee.value.password})).success){const e=Y.query.redirect||"/dashboard";X.push(e)}};return r(()=>{Z.error=null,ae.value={}}),(e,s)=>{const a=y("router-link");return g(),l("div",L,[t("div",$,[t("div",C,[t("h2",_,o(e.$t("auth.login")),1),t("p",M,o(e.$t("auth.login_description")),1)])]),t("div",B,[t("div",V,[i(Z).error?(g(),l("div",q,[t("p",z,o(i(Z).error),1)])):d("",!0),t("form",{onSubmit:u(te,["prevent"]),class:"space-y-6"},[t("div",null,[t("label",P,o(e.$t("auth.email")),1),n(t("input",{id:"email","onUpdate:modelValue":s[0]||(s[0]=e=>ee.value.email=e),type:"email",required:"",disabled:i(Z).isLoading,class:c(["form-input",{"opacity-50":i(Z).isLoading,"border-red-300 focus:border-red-500 focus:ring-red-500":ae.value.email}]),onBlur:s[1]||(s[1]=e=>le("email"))},null,42,O),[[m,ee.value.email]]),ae.value.email?(g(),l("p",U,o(ae.value.email),1)):d("",!0)]),t("div",null,[t("label",A,o(e.$t("auth.password")),1),t("div",E,[n(t("input",{id:"password","onUpdate:modelValue":s[2]||(s[2]=e=>ee.value.password=e),type:se.value?"text":"password",required:"",disabled:i(Z).isLoading,class:c(["form-input pr-10",{"opacity-50":i(Z).isLoading,"border-red-300 focus:border-red-500 focus:ring-red-500":ae.value.password}]),onBlur:s[3]||(s[3]=e=>le("password"))},null,42,H),[[p,ee.value.password]]),t("button",{type:"button",onClick:s[4]||(s[4]=e=>se.value=!se.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[se.value?(g(),l("svg",G,s[6]||(s[6]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"},null,-1)]))):(g(),l("svg",J,s[7]||(s[7]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])))])]),ae.value.password?(g(),l("p",Q,o(ae.value.password),1)):d("",!0)]),t("div",S,[t("div",D,[n(t("input",{id:"remember-me","onUpdate:modelValue":s[5]||(s[5]=e=>ee.value.remember=e),type:"checkbox",disabled:i(Z).isLoading,class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,8,F),[[v,ee.value.remember]]),t("label",I,o(e.$t("auth.remember_me")),1)]),t("div",K,[w(a,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500"},{default:b(()=>[x(o(e.$t("auth.forgot_password")),1)]),_:1})])]),t("div",null,[t("button",{type:"submit",disabled:i(Z).isLoading||!re.value,class:c(["w-full btn btn-primary",{"opacity-50 cursor-not-allowed":i(Z).isLoading||!re.value}])},[i(Z).isLoading?(g(),l("span",R,[s[8]||(s[8]=t("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),x(" "+o(e.$t("common.loading")),1)])):(g(),l("span",T,o(e.$t("auth.login")),1))],10,N)])],32),t("div",W,[w(j)])])])])}}});export{X as default};
