import{c as e,m as t,r as a,d as r,p as l,q as i,j as o,v as s,t as n,x as d,D as c,n as u,o as m,a as y,u as g,E as x,F as v,y as p,B as b,G as f,H as k,I as h,J as _,w,K as $,z as C,L as q}from"./chunk-300a47f1.js";import{a as j,r as V,_ as I,u as U,b as S,c as L,d as z,e as D,f as E,g as T,h as A,i as M,j as O,k as N,l as R,m as P,n as B,o as F,p as H,q as G,s as J}from"./chunk-9984d79b.js";import{u as K}from"./chunk-e8ade734.js";import{_ as W}from"./chunk-e5f6a124.js";function Y(){const{locale:t,t:a}=K(),r=e(()=>"fa"===t.value),l=e(()=>t.value),i=e=>"fa"===t.value?e.toLocaleString("fa-IR"):e.toLocaleString("en-US"),o=e=>e?"fa"===t.value&&e.name_persian?e.name_persian:e.name||"":"",s=e=>{if(!e)return"";if("fa"===t.value){return`${i(e)} ${a("inventory.categories.gold_purity_karat")}`}return`${e}K`};return{locale:t,isRTL:r,currentLanguage:l,formatNumber:i,formatCurrency:(e,a="USD")=>"fa"===t.value?new Intl.NumberFormat("fa-IR",{style:"currency",currency:"USD"===a?"IRR":a}).format(e):new Intl.NumberFormat("en-US",{style:"currency",currency:a}).format(e),formatDate:e=>{const a="string"==typeof e?new Date(e):e;return"fa"===t.value?new Intl.DateTimeFormat("fa-IR-u-ca-persian").format(a):new Intl.DateTimeFormat("en-US").format(a)},getDirection:()=>r.value?"rtl":"ltr",switchLanguage:e=>{t.value=e,document.documentElement.dir="fa"===e?"rtl":"ltr",document.documentElement.lang=e,localStorage.setItem("preferred-language",e)},getLocalizedCategoryName:o,getLocalizedCategoryDescription:e=>e?"fa"===t.value&&e.description_persian?e.description_persian:e.description||"":"",formatGoldPurity:s,formatGoldPurityDisplay:e=>{if(!e)return"";const r=s(e),l=a("inventory.categories.gold_purity_terminology");return t.value,`${l}: ${r}`},getCategoryPath:(e,a=[])=>{if(!e)return"";const r=[];let l=e;for(;l;)r.unshift(o(l)),l=a.find(e=>e.id===l.parent_id);const i="fa"===t.value?" ← ":" → ";return r.join(i)},formatPersianNumerals:e=>{if("fa"!==t.value)return e;const a=["۰","۱","۲","۳","۴","۵","۶","۷","۸","۹"];return e.replace(/\d/g,e=>a[parseInt(e)])},t:a}}const Q=t("inventory",()=>{const t=a([]),r=a(null),l=a([]),i=a([]),o=a(null),s=a([]),n=a([]),d=a([]),c=a({items:!1,item:!1,movements:!1,audits:!1,audit:!1,boms:!1,categories:!1,locations:!1,creating:!1,updating:!1,deleting:!1}),u=a({current_page:1,last_page:1,per_page:15,total:0}),m=a({search:"",category_id:"",location_id:"",is_active:"",is_low_stock:"",is_expiring:"",sort_by:"name",sort_direction:"asc"}),y=e(()=>{var e;return(null==(e=t.value)?void 0:e.filter(e=>e.is_active))||[]}),g=e(()=>{var e;return(null==(e=t.value)?void 0:e.filter(e=>e.is_low_stock))||[]}),x=e(()=>{var e;return(null==(e=t.value)?void 0:e.filter(e=>e.is_expiring))||[]}),v=e(()=>{var e;return(null==(e=t.value)?void 0:e.reduce((e,t)=>e+(t.total_value||0),0))||0}),p=e(()=>{var e;return(null==(e=t.value)?void 0:e.reduce((e,t)=>e+(t.total_cost||0),0))||0}),b=e(()=>{var e;const a={};return null==(e=t.value)||e.forEach(e=>{var t;const r=(null==(t=e.category)?void 0:t.name)||"Uncategorized";a[r]||(a[r]=[]),a[r].push(e)}),a}),f=e(()=>{var e;const a={};return null==(e=t.value)||e.forEach(e=>{var t;const r=(null==(t=e.location)?void 0:t.name)||"No Location";a[r]||(a[r]=[]),a[r].push(e)}),a}),k=async e=>{c.value.items=!0;try{const a={...m.value,...e},r=await j.inventory.getItems(a);if(r.data.success){const e=r.data.data;t.value=e.data,u.value={current_page:e.current_page,last_page:e.last_page,per_page:e.per_page,total:e.total}}}catch(a){throw a}finally{c.value.items=!1}},h=async()=>{c.value.categories=!0;try{const e=await j.inventory.getCategories();e.data.success&&(n.value=e.data.data)}catch(e){throw e}finally{c.value.categories=!1}},_=async e=>{c.value.audit=!0;try{const t=await j.inventory.getAudit(e);t.data.success&&(o.value=t.data.data)}catch(t){throw t}finally{c.value.audit=!1}};return{items:t,currentItem:r,movements:l,audits:i,currentAudit:o,boms:s,categories:n,locations:d,loading:c,pagination:u,filters:m,activeItems:y,lowStockItems:g,expiringItems:x,totalInventoryValue:v,totalInventoryCost:p,itemsByCategory:b,itemsByLocation:f,fetchItems:k,fetchItem:async e=>{c.value.item=!0;try{const t=await j.inventory.getItem(e);t.data.success&&(r.value=t.data.data)}catch(t){throw t}finally{c.value.item=!1}},createItem:async e=>{c.value.creating=!0;try{const a=await j.inventory.createItem(e);if(a.data.success){const e=a.data.data;return t.value||(t.value=[]),t.value.unshift(e),e}}catch(a){throw a}finally{c.value.creating=!1}},updateItem:async(e,a)=>{var l;c.value.updating=!0;try{const i=await j.inventory.updateItem(e,a);if(i.data.success){const a=i.data.data,o=t.value.findIndex(t=>t.id===e);return-1!==o&&(t.value[o]=a),(null==(l=r.value)?void 0:l.id)===e&&(r.value=a),a}}catch(i){throw i}finally{c.value.updating=!1}},deleteItem:async e=>{var a;c.value.deleting=!0;try{(await j.inventory.deleteItem(e)).data.success&&(t.value=t.value.filter(t=>t.id!==e),(null==(a=r.value)?void 0:a.id)===e&&(r.value=null))}catch(l){throw l}finally{c.value.deleting=!1}},fetchMovements:async e=>{c.value.movements=!0;try{const t=await j.inventory.getMovements(e);t.data.success&&(l.value=t.data.data)}catch(t){throw t}finally{c.value.movements=!1}},createMovement:async e=>{try{const t=await j.inventory.createMovement(e);if(t.data.success){const e=t.data.data;return l.value.unshift(e),await k(),e}}catch(t){throw t}},fetchCategories:h,createCategory:async e=>{c.value.creating=!0;try{const t=await j.inventory.createCategory(e);if(t.data.success){const e=t.data.data;return n.value.push(e),e}}catch(t){throw t}finally{c.value.creating=!1}},updateCategory:async(e,t)=>{c.value.updating=!0;try{const a=await j.inventory.updateCategory(e,t);if(a.data.success){const t=a.data.data,r=n.value.findIndex(t=>t.id===e);return-1!==r&&(n.value[r]=t),t}}catch(a){throw a}finally{c.value.updating=!1}},deleteCategory:async e=>{c.value.deleting=!0;try{(await j.inventory.deleteCategory(e)).data.success&&(n.value=n.value.filter(t=>t.id!==e))}catch(t){throw t}finally{c.value.deleting=!1}},reorderCategories:async e=>{try{const t=await j.inventory.reorderCategories(e);if(t.data.success)return await h(),t.data.data}catch(t){throw t}},fetchLocations:async()=>{c.value.locations=!0;try{const e=await j.inventory.getLocations();e.data.success&&(d.value=e.data.data)}catch(e){throw e}finally{c.value.locations=!1}},createLocation:async e=>{try{const t=await j.inventory.createLocation(e);if(t.data.success){const e=t.data.data;return d.value.push(e),e}}catch(t){throw t}},fetchAudits:async e=>{c.value.audits=!0;try{const t=await j.inventory.getAudits(e);t.data.success&&(i.value=t.data.data)}catch(t){throw t}finally{c.value.audits=!1}},fetchAudit:_,createAudit:async e=>{try{const t=await j.inventory.createAudit(e);if(t.data.success){const e=t.data.data;return i.value.unshift(e),e}}catch(t){throw t}},startAudit:async e=>{var t;try{const a=await j.inventory.startAudit(e);if(a.data.success){const r=a.data.data,l=i.value.findIndex(t=>t.id===e);return-1!==l&&(i.value[l]=r),(null==(t=o.value)?void 0:t.id)===e&&(o.value=r),r}}catch(a){throw a}},completeAudit:async e=>{var t;try{const a=await j.inventory.completeAudit(e);if(a.data.success){const r=a.data.data,l=i.value.findIndex(t=>t.id===e);return-1!==l&&(i.value[l]=r),(null==(t=o.value)?void 0:t.id)===e&&(o.value=r),r}}catch(a){throw a}},updateAuditItem:async(e,t,a)=>{var r;try{const l=await j.inventory.updateAuditItem(e,t,a);if(l.data.success)return(null==(r=o.value)?void 0:r.id)===e&&await _(e),l.data.data}catch(l){throw l}},fetchBOMs:async e=>{c.value.boms=!0;try{const t=await j.inventory.getBOMs(e);t.data.success&&(s.value=t.data.data)}catch(t){throw t}finally{c.value.boms=!1}},createBOM:async e=>{try{const t=await j.inventory.createBOM(e);if(t.data.success){const e=t.data.data;return s.value.push(e),e}}catch(t){throw t}},updateFilters:e=>{m.value={...m.value,...e}},resetFilters:()=>{m.value={search:"",category_id:"",location_id:"",is_active:"",is_low_stock:"",is_expiring:"",sort_by:"name",sort_direction:"asc"}},clearCurrentItem:()=>{r.value=null},clearCurrentAudit:()=>{o.value=null}}}),X={class:"fixed inset-0 z-50 overflow-y-auto"},Z={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},ee={class:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6"},te={class:"sm:flex sm:items-start"},ae={class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900 sm:mx-0 sm:h-10 sm:w-10"},re={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},le={class:"text-lg leading-6 font-medium text-gray-900 dark:text-white"},ie={class:"mt-2"},oe={class:"text-sm text-gray-500 dark:text-gray-400"},se={class:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse"},ne=["disabled"],de={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},ce=r({__name:"ConfirmationModal",props:{title:{},message:{},loading:{type:Boolean,default:!1}},emits:["confirm","cancel"],setup:e=>(e,t)=>(u(),l("div",X,[i("div",Z,[i("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t[0]||(t[0]=t=>e.$emit("cancel"))}),i("div",ee,[i("div",te,[i("div",ae,[o(s(V),{class:"h-6 w-6 text-red-600 dark:text-red-400"})]),i("div",re,[i("h3",le,n(e.title),1),i("div",ie,[i("p",oe,n(e.message),1)])])]),i("div",se,[i("button",{type:"button",onClick:t[1]||(t[1]=t=>e.$emit("confirm")),disabled:e.loading,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"},[e.loading?(u(),l("div",de)):d("",!0),c(" "+n(e.$t("common.confirm")),1)],8,ne),i("button",{type:"button",onClick:t[2]||(t[2]=t=>e.$emit("cancel")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-700 text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:w-auto sm:text-sm"},n(e.$t("common.cancel")),1)])])])]))});function ue(){const t=a(null),r=a(!1),l=a(null),i=e(()=>r.value),o=e(()=>!!l.value),s=e(()=>!!t.value),n=async(e,a={})=>{var i,o;try{r.value=!0,l.value=null;const i=(await e()).data.data;return t.value=i,a.onSuccess&&a.onSuccess(i),i}catch(s){const e=(null==(o=null==(i=s.response)?void 0:i.data)?void 0:o.message)||s.message||"An error occurred";return l.value=e,a.onError&&a.onError(e),a.showErrorToast,null}finally{r.value=!1}};return{data:t,loading:r,error:l,isLoading:i,hasError:o,hasData:s,execute:n,reset:()=>{t.value=null,r.value=!1,l.value=null},get:async(e,t)=>n(()=>W(()=>import("./chunk-9984d79b.js").then(e=>e.af),["/js/chunk-9984d79b.js","/js/chunk-300a47f1.js","/js/chunk-e8ade734.js","/js/chunk-63a63872.js","/js/chunk-e5f6a124.js","/css/dashboard-components-bf5fbefd.css"],import.meta.url).then(a=>a.get(e,t))),post:async(e,t,a)=>n(()=>W(()=>import("./chunk-9984d79b.js").then(e=>e.af),["/js/chunk-9984d79b.js","/js/chunk-300a47f1.js","/js/chunk-e8ade734.js","/js/chunk-63a63872.js","/js/chunk-e5f6a124.js","/css/dashboard-components-bf5fbefd.css"],import.meta.url).then(r=>r.post(e,t,a))),put:async(e,t,a)=>n(()=>W(()=>import("./chunk-9984d79b.js").then(e=>e.af),["/js/chunk-9984d79b.js","/js/chunk-300a47f1.js","/js/chunk-e8ade734.js","/js/chunk-63a63872.js","/js/chunk-e5f6a124.js","/css/dashboard-components-bf5fbefd.css"],import.meta.url).then(r=>r.put(e,t,a))),delete:async(e,t)=>n(()=>W(()=>import("./chunk-9984d79b.js").then(e=>e.af),["/js/chunk-9984d79b.js","/js/chunk-300a47f1.js","/js/chunk-e8ade734.js","/js/chunk-63a63872.js","/js/chunk-e5f6a124.js","/css/dashboard-components-bf5fbefd.css"],import.meta.url).then(a=>a.del(e,t)))}}function me(e){const t=a({loadTime:0,renderTime:0,interactionTime:0}),r=a(0),l=a(0),i=()=>{if("memory"in performance){const e=performance.memory;return{used:e.usedJSHeapSize,total:e.totalJSHeapSize,limit:e.jsHeapSizeLimit}}return null};let o=null;const s=t=>{"performance"in window&&"mark"in performance&&performance.mark(`${e}-${t}`)},n=(t,a,r)=>{if("performance"in window&&"measure"in performance)try{performance.measure(`${e}-${t}`,`${e}-${a}`,r?`${e}-${r}`:void 0)}catch(l){}};return m(()=>{r.value=performance.now(),l.value=performance.now(),(()=>{if("PerformanceObserver"in window){o=new PerformanceObserver(t=>{t.getEntries().forEach(t=>{"measure"===t.entryType&&t.name.includes(e)})});try{o.observe({entryTypes:["measure","navigation","paint"]})}catch(t){}}})(),s("mounted"),setTimeout(()=>{r.value>0&&(t.value.loadTime=performance.now()-r.value),l.value>0&&(t.value.renderTime=performance.now()-l.value),s("rendered"),n("mount-to-render","mounted","rendered")},0)}),y(()=>{o&&(o.disconnect(),o=null),s("unmounted"),n("total-lifecycle","mounted","unmounted")}),{metrics:t,measureInteractionTime:e=>{t.value.interactionTime=performance.now()-e},getMemoryUsage:i,logMetrics:()=>{i()},mark:s,measure:n}}function ye(e,t,a=!1){let r=null;return function(...l){const i=a&&!r;r&&clearTimeout(r),r=setTimeout(()=>{r=null,a||e(...l)},t),i&&e(...l)}}const ge=r({__name:"SkeletonLoader",props:{width:{},height:{},variant:{default:"rectangular"},lines:{default:1},class:{default:""}},setup(t){const a=t,r=e(()=>{switch(a.variant){case"text":return"h-4";case"circular":return"rounded-full w-10 h-10";case"card":return"h-32";default:return"h-6"}}),i=e(()=>{const e={};return a.width&&(e.width="number"==typeof a.width?`${a.width}px`:a.width),a.height&&(e.height="number"==typeof a.height?`${a.height}px`:a.height),e}),o=e(()=>a.class);return(e,t)=>(u(),l("div",{class:g(["animate-pulse bg-gray-200 dark:bg-gray-700 rounded",r.value,o.value]),style:x(i.value)},null,6))}}),xe=I(ge,[["__scopeId","data-v-db85a394"]]),ve={class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden"},pe={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},be={class:"overflow-x-auto"},fe={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},ke={class:"bg-gray-50 dark:bg-gray-900"},he={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},_e={key:0,class:"flex items-center"},we={class:"space-y-2"},$e={key:1,class:"flex justify-end space-x-2"},Ce={class:"px-6 py-4 border-t border-gray-200 dark:border-gray-700"},qe={class:"flex items-center justify-between"},je={class:"flex space-x-2"},Ve=r({__name:"TableSkeleton",props:{rows:{default:5},columns:{default:6}},setup(e){const t=e=>{const t=["100px","80px","120px","90px","110px","70px"];return t[(e-1)%t.length]};return(e,a)=>(u(),l("div",ve,[i("div",pe,[o(xe,{width:"200px",height:"24px"})]),i("div",be,[i("table",fe,[i("thead",ke,[i("tr",null,[(u(!0),l(v,null,p(e.columns,e=>(u(),l("th",{key:`header-${e}`,class:"px-6 py-3 text-left"},[o(xe,{width:"80px",height:"16px"})]))),128))])]),i("tbody",he,[(u(!0),l(v,null,p(e.rows,a=>(u(),l("tr",{key:`row-${a}`,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[(u(!0),l(v,null,p(e.columns,r=>(u(),l("td",{key:`cell-${a}-${r}`,class:"px-6 py-4 whitespace-nowrap"},[1===r?(u(),l("div",_e,[o(xe,{variant:"circular",class:"mr-4"}),i("div",we,[o(xe,{width:"120px",height:"16px"}),o(xe,{width:"80px",height:"12px"})])])):r===e.columns?(u(),l("div",$e,[o(xe,{width:"24px",height:"24px"}),o(xe,{width:"24px",height:"24px"}),o(xe,{width:"24px",height:"24px"})])):(u(),b(xe,{key:2,width:t(r),height:"16px"},null,8,["width"]))]))),128))]))),128))])])]),i("div",Ce,[i("div",qe,[o(xe,{width:"200px",height:"16px"}),i("div",je,[o(xe,{width:"80px",height:"32px"}),o(xe,{width:"80px",height:"32px"})])])])]))}}),Ie={class:"space-y-6"},Ue={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6"},Se={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Le={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},ze=["placeholder"],De={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Ee={value:""},Te=["value"],Ae={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Me={value:""},Oe=["value"],Ne={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Re={value:""},Pe={value:"active"},Be={value:"low_stock"},Fe={value:"expiring"},He={value:"expired"},Ge={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4"},Je={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Ke={value:""},We=["value"],Ye={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Qe=["placeholder"],Xe={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Ze=["placeholder"],et={class:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4"},tt={class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg"},at={class:"text-sm font-medium text-blue-600 dark:text-blue-400"},rt={class:"text-2xl font-bold text-blue-900 dark:text-blue-100"},lt={class:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg"},it={class:"text-sm font-medium text-green-600 dark:text-green-400"},ot={class:"text-2xl font-bold text-green-900 dark:text-green-100"},st={class:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg"},nt={class:"text-sm font-medium text-yellow-600 dark:text-yellow-400"},dt={class:"text-2xl font-bold text-yellow-900 dark:text-yellow-100"},ct={class:"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg"},ut={class:"text-sm font-medium text-red-600 dark:text-red-400"},mt={class:"text-2xl font-bold text-red-900 dark:text-red-100"},yt={class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden"},gt={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},xt={class:"text-lg font-medium text-gray-900 dark:text-white"},vt={key:1,class:"p-6 text-center"},pt={class:"text-gray-500 dark:text-gray-400"},bt={key:2,class:"overflow-x-auto"},ft={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},kt={class:"bg-gray-50 dark:bg-gray-900"},ht={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},_t={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},wt={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},$t={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Ct={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},qt={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},jt={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Vt={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},It={class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Ut={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},St={class:"px-6 py-4 whitespace-nowrap"},Lt={class:"flex items-center"},zt={class:"flex-shrink-0 h-10 w-10"},Dt={class:"h-10 w-10 rounded-lg bg-gray-200 dark:bg-gray-600 flex items-center justify-center"},Et={class:"ml-4"},Tt={class:"text-sm font-medium text-gray-900 dark:text-white"},At={class:"text-sm text-gray-500 dark:text-gray-400"},Mt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Ot={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Nt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Rt={class:"px-6 py-4 whitespace-nowrap"},Pt={class:"text-sm text-gray-900 dark:text-white"},Bt={key:0,class:"text-xs text-red-600 dark:text-red-400"},Ft={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Ht={key:0},Gt={key:1,class:"text-gray-500 dark:text-gray-400 italic"},Jt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Kt={key:0},Wt={key:1,class:"text-gray-400"},Yt={class:"px-6 py-4 whitespace-nowrap"},Qt={class:"flex flex-col space-y-1"},Xt={key:0,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400"},Zt={key:1,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"},ea={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},ta={class:"flex justify-end space-x-2"},aa=["onClick"],ra=["onClick"],la=["onClick"],ia={key:3,class:"px-6 py-4 border-t border-gray-200 dark:border-gray-700"},oa={class:"flex items-center justify-between"},sa={class:"text-sm text-gray-700 dark:text-gray-300"},na={class:"flex space-x-2"},da=["disabled"],ca=["disabled"],ua=r({__name:"InventoryList",emits:["view-item","edit-item","delete-item"],setup(e){const{locale:t}=K(),r=Q(),{formatNumber:c,formatCurrency:y}=U(),{execute:x}=ue(),{mark:_,measure:w}=me("InventoryList"),$=a(""),C=a({category_id:"",location_id:"",status:"",gold_purity_range:"",gold_purity_min:null,gold_purity_max:null}),q=a([]),V=ye(()=>{_("search-start"),T(),w("search-duration","search-start")},300),I=ye(()=>{_("filter-start"),T(),w("filter-duration","filter-start")},500),E=e=>{if(!e)return"-";const a="string"==typeof e?parseFloat(e):e;if(isNaN(a))return"-";if("fa"===t.value){const e=["۰","۱","۲","۳","۴","۵","۶","۷","۸","۹"];return`${a.toFixed(1).replace(/\d/g,t=>e[parseInt(t)])} عیار`}return`${a.toFixed(1)}K`},T=()=>{const e={search:$.value,...C.value,page:1};Object.keys(e).forEach(t=>{""===e[t]&&delete e[t]}),r.fetchItems(e)},A=e=>{if(e>=1&&e<=r.pagination.last_page){const t={search:$.value,...C.value,page:e};Object.keys(t).forEach(e=>{""===t[e]&&delete t[e]}),r.fetchItems(t)}};return m(()=>{(async()=>{try{const e=await x(()=>j.get("/api/inventory/gold-purity-options"));e&&(q.value=e.purity_ranges||[])}catch(e){}})(),T()}),(e,t)=>{var a;return u(),l("div",Ie,[i("div",Ue,[i("div",Se,[i("div",null,[i("label",Le,n(e.$t("common.search")),1),f(i("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>$.value=e),onInput:t[1]||(t[1]=(...e)=>s(V)&&s(V)(...e)),type:"text",placeholder:e.$t("inventory.search_placeholder"),class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,40,ze),[[k,$.value]])]),i("div",null,[i("label",De,n(e.$t("inventory.category")),1),f(i("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>C.value.category_id=e),onChange:T,class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[i("option",Ee,n(e.$t("common.all_categories")),1),(u(!0),l(v,null,p(s(r).categories||[],e=>(u(),l("option",{key:e.id,value:e.id},n(e.name),9,Te))),128))],544),[[h,C.value.category_id]])]),i("div",null,[i("label",Ae,n(e.$t("inventory.location")),1),f(i("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>C.value.location_id=e),onChange:T,class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[i("option",Me,n(e.$t("common.all_locations")),1),(u(!0),l(v,null,p(s(r).locations||[],e=>(u(),l("option",{key:e.id,value:e.id},n(e.name),9,Oe))),128))],544),[[h,C.value.location_id]])]),i("div",null,[i("label",Ne,n(e.$t("common.status")),1),f(i("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>C.value.status=e),onChange:T,class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[i("option",Re,n(e.$t("common.all_statuses")),1),i("option",Pe,n(e.$t("common.active")),1),i("option",Be,n(e.$t("inventory.low_stock")),1),i("option",Fe,n(e.$t("inventory.expiring")),1),i("option",He,n(e.$t("inventory.expired")),1)],544),[[h,C.value.status]])])]),i("div",Ge,[i("div",null,[i("label",Je,n(e.$t("inventory.gold_purity_range")),1),f(i("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>C.value.gold_purity_range=e),onChange:T,class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[i("option",Ke,n(e.$t("common.all")),1),(u(!0),l(v,null,p(q.value,e=>(u(),l("option",{key:e.label,value:e.label},n(e.label),9,We))),128))],544),[[h,C.value.gold_purity_range]])]),i("div",null,[i("label",Ye,n(e.$t("inventory.gold_purity_min")),1),f(i("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>C.value.gold_purity_min=e),onInput:t[7]||(t[7]=(...e)=>s(I)&&s(I)(...e)),type:"number",step:"0.001",min:"0",max:"24",placeholder:e.$t("inventory.gold_purity_min"),class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,40,Qe),[[k,C.value.gold_purity_min,void 0,{number:!0}]])]),i("div",null,[i("label",Xe,n(e.$t("inventory.gold_purity_max")),1),f(i("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>C.value.gold_purity_max=e),onInput:t[9]||(t[9]=(...e)=>s(I)&&s(I)(...e)),type:"number",step:"0.001",min:"0",max:"24",placeholder:e.$t("inventory.gold_purity_max"),class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,40,Ze),[[k,C.value.gold_purity_max,void 0,{number:!0}]])])]),i("div",et,[i("div",tt,[i("div",at,n(e.$t("inventory.total_items")),1),i("div",rt,n(s(r).pagination.total),1)]),i("div",lt,[i("div",it,n(e.$t("inventory.total_value")),1),i("div",ot,n(s(y)(s(r).totalInventoryValue)),1)]),i("div",st,[i("div",nt,n(e.$t("inventory.low_stock_items")),1),i("div",dt,n(s(r).lowStockItems.length),1)]),i("div",ct,[i("div",ut,n(e.$t("inventory.expiring_items")),1),i("div",mt,n(s(r).expiringItems.length),1)])])]),i("div",yt,[i("div",gt,[i("h3",xt,n(e.$t("inventory.items_list")),1)]),s(r).loading.items?(u(),b(Ve,{key:0,rows:10,columns:9})):0===(null==(a=s(r).items)?void 0:a.length)?(u(),l("div",vt,[i("div",pt,n(e.$t("inventory.no_items_found")),1)])):(u(),l("div",bt,[i("table",ft,[i("thead",kt,[i("tr",null,[i("th",ht,n(e.$t("inventory.item")),1),i("th",_t,n(e.$t("inventory.sku")),1),i("th",wt,n(e.$t("inventory.category")),1),i("th",$t,n(e.$t("inventory.location")),1),i("th",Ct,n(e.$t("inventory.quantity")),1),i("th",qt,n(e.$t("inventory.unit_price")),1),i("th",jt,n(e.$t("inventory.gold_purity")),1),i("th",Vt,n(e.$t("common.status")),1),i("th",It,n(e.$t("common.actions")),1)])]),i("tbody",Ut,[(u(!0),l(v,null,p(s(r).items||[],t=>{var a,r;return u(),l("tr",{key:t.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[i("td",St,[i("div",Lt,[i("div",zt,[i("div",Dt,[o(s(S),{class:"h-6 w-6 text-gray-400"})])]),i("div",Et,[i("div",Tt,n(t.localized_name||t.name),1),i("div",At,n(t.localized_description||t.description),1)])])]),i("td",Mt,n(t.sku),1),i("td",Ot,n((null==(a=t.category)?void 0:a.name)||"-"),1),i("td",Nt,n((null==(r=t.location)?void 0:r.name)||"-"),1),i("td",Rt,[i("div",Pt,n(s(c)(t.quantity)),1),t.is_low_stock?(u(),l("div",Bt,n(e.$t("inventory.low_stock")),1)):d("",!0)]),i("td",Ft,[null!==t.unit_price&&void 0!==t.unit_price?(u(),l("span",Ht,n(s(y)(t.unit_price)),1)):(u(),l("span",Gt,n(e.$t("inventory.price_on_request")),1))]),i("td",Jt,[t.gold_purity?(u(),l("span",Kt,n(E(t.gold_purity)),1)):(u(),l("span",Wt,"-"))]),i("td",Yt,[i("div",Qt,[i("span",{class:g(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",t.is_active?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"])},n(t.is_active?e.$t("common.active"):e.$t("common.inactive")),3),t.is_expiring?(u(),l("span",Xt,n(e.$t("inventory.expiring")),1)):d("",!0),t.is_expired?(u(),l("span",Zt,n(e.$t("inventory.expired")),1)):d("",!0)])]),i("td",ea,[i("div",ta,[i("button",{onClick:a=>e.$emit("view-item",t),class:"text-primary-600 hover:text-primary-900 dark:text-primary-400 dark:hover:text-primary-300"},[o(s(L),{class:"h-4 w-4"})],8,aa),i("button",{onClick:a=>e.$emit("edit-item",t),class:"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300"},[o(s(z),{class:"h-4 w-4"})],8,ra),i("button",{onClick:a=>e.$emit("delete-item",t),class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"},[o(s(D),{class:"h-4 w-4"})],8,la)])])])}),128))])])])),s(r).pagination.last_page>1?(u(),l("div",ia,[i("div",oa,[i("div",sa,n(e.$t("common.showing"))+" "+n((s(r).pagination.current_page-1)*s(r).pagination.per_page+1)+" "+n(e.$t("common.to"))+" "+n(Math.min(s(r).pagination.current_page*s(r).pagination.per_page,s(r).pagination.total))+" "+n(e.$t("common.of"))+" "+n(s(r).pagination.total)+" "+n(e.$t("common.results")),1),i("div",na,[i("button",{onClick:t[10]||(t[10]=e=>A(s(r).pagination.current_page-1)),disabled:1===s(r).pagination.current_page,class:"px-3 py-1 text-sm border rounded-md disabled:opacity-50 disabled:cursor-not-allowed"},n(e.$t("common.previous")),9,da),i("button",{onClick:t[11]||(t[11]=e=>A(s(r).pagination.current_page+1)),disabled:s(r).pagination.current_page===s(r).pagination.last_page,class:"px-3 py-1 text-sm border rounded-md disabled:opacity-50 disabled:cursor-not-allowed"},n(e.$t("common.next")),9,ca)])])])):d("",!0)])])}}}),ma={class:"category-node"},ya={class:"flex items-center space-x-3 flex-1"},ga={key:1,class:"w-6"},xa={class:"flex-shrink-0"},va=["src","alt"],pa={key:1,class:"h-8 w-8 rounded bg-gray-200 dark:bg-gray-600 flex items-center justify-center"},ba={class:"flex-1 min-w-0 category-tree-node"},fa={class:"flex items-center space-x-2"},ka=["dir"],ha={key:0,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"},_a={key:1,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"},wa=["dir"],$a={key:0},Ca={key:1},qa={key:2},ja={class:"flex items-center space-x-2"},Va=["title"],Ia=["title"],Ua=["title","disabled"],Sa={class:"drag-handle p-1 cursor-move text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},La={key:0,class:"mt-2 space-y-2"},za=r({__name:"CategoryTreeNode",props:{category:{},level:{},expanded:{type:Boolean},allCategories:{},expandedNodes:{default:()=>new Set}},emits:["edit","delete","toggle-expand","create-subcategory","reorder"],setup(t,{emit:r}){const c=t,m=r,{isRTL:y,getLocalizedCategoryName:f}=Y(),{formatNumber:k}=U(),h=a(!1),w=e(()=>c.allCategories.filter(e=>e.parent_id===c.category.id)),$=e(()=>w.value.length>0),C=e=>{e.dataTransfer&&(e.dataTransfer.setData("text/plain",JSON.stringify({id:c.category.id,type:"category"})),e.dataTransfer.effectAllowed="move")},q=e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer&&(e.dataTransfer.dropEffect="move"),h.value=!0},j=e=>{e.preventDefault(),e.stopPropagation(),h.value=!1},V=e=>{if(e.preventDefault(),e.stopPropagation(),h.value=!1,e.dataTransfer)try{const t=JSON.parse(e.dataTransfer.getData("text/plain"));if("category"===t.type&&t.id!==c.category.id){const e={categoryId:t.id,newParentId:c.category.id,newPosition:0};I(t.id,c.category.id)||m("reorder",e)}}catch(t){}},I=(e,t)=>{const a=e=>c.allCategories.filter(t=>t.parent_id===e).some(e=>e.id===t||a(e.id));return a(e)};return(e,t)=>{const a=_("CategoryTreeNode",!0);return u(),l("div",ma,[i("div",{class:g(["flex items-center justify-between p-3 rounded-lg border transition-colors","hover:bg-gray-50 dark:hover:bg-gray-700","border-gray-200 dark:border-gray-600",h.value?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":""]),style:x({marginLeft:24*e.level+"px"}),draggable:"true",onDragstart:C,onDragover:q,onDragleave:j,onDrop:V},[i("div",ya,[$.value?(u(),l("button",{key:0,onClick:t[0]||(t[0]=t=>e.$emit("toggle-expand",e.category.id)),class:"flex-shrink-0 p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-600"},[o(s(E),{class:g(["h-4 w-4 text-gray-500 transition-transform",e.expanded?"transform rotate-90":""])},null,8,["class"])])):(u(),l("div",ga)),i("div",xa,[e.category.image_path?(u(),l("img",{key:0,src:e.category.image_path,alt:e.category.localized_name,class:"h-8 w-8 rounded object-cover"},null,8,va)):(u(),l("div",pa,[o(s(T),{class:"h-4 w-4 text-gray-500"})]))]),i("div",ba,[i("div",fa,[i("h4",{class:"text-sm font-medium text-gray-900 dark:text-white truncate category-name",dir:s(y)?"rtl":"ltr"},n(s(f)(e.category)),9,ka),e.category.code?(u(),l("span",ha,n(e.category.code),1)):d("",!0),e.category.is_active?d("",!0):(u(),l("span",_a,n(e.$t("common.inactive")),1))]),i("div",{class:"flex items-center space-x-4 mt-1 text-xs text-gray-500 dark:text-gray-400",dir:s(y)?"rtl":"ltr"},[e.category.item_count?(u(),l("span",$a,n(e.$t("inventory.categories.item_count"))+": "+n(s(k)(e.category.item_count)),1)):d("",!0),e.category.subcategory_count?(u(),l("span",Ca,n(e.$t("inventory.categories.subcategory_count"))+": "+n(e.category.subcategory_count),1)):d("",!0),e.category.default_gold_purity?(u(),l("span",qa,n(e.$t("inventory.gold_purity"))+": "+n((r=e.category.default_gold_purity,`${r}K`)),1)):d("",!0)],8,wa)])]),i("div",ja,[i("button",{onClick:t[1]||(t[1]=t=>e.$emit("create-subcategory",e.category)),class:"p-1 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600",title:e.$t("inventory.categories.create_subcategory")},[o(s(A),{class:"h-4 w-4"})],8,Va),i("button",{onClick:t[2]||(t[2]=t=>e.$emit("edit",e.category)),class:"p-1 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600",title:e.$t("inventory.categories.edit_category")},[o(s(z),{class:"h-4 w-4"})],8,Ia),i("button",{onClick:t[3]||(t[3]=t=>e.$emit("delete",e.category)),class:"p-1 rounded text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/20",title:e.$t("inventory.categories.delete_category"),disabled:(e.category.item_count||0)>0||(e.category.subcategory_count||0)>0},[o(s(D),{class:"h-4 w-4"})],8,Ua),i("div",Sa,[o(s(M),{class:"h-4 w-4"})])])],38),e.expanded&&$.value?(u(),l("div",La,[(u(!0),l(v,null,p(w.value,r=>(u(),b(a,{key:r.id,category:r,level:e.level+1,expanded:e.expandedNodes.has(r.id),"all-categories":e.allCategories,"expanded-nodes":e.expandedNodes,onEdit:t[4]||(t[4]=t=>e.$emit("edit",t)),onDelete:t[5]||(t[5]=t=>e.$emit("delete",t)),onToggleExpand:t[6]||(t[6]=t=>e.$emit("toggle-expand",t)),onCreateSubcategory:t[7]||(t[7]=t=>e.$emit("create-subcategory",t)),onReorder:t[8]||(t[8]=t=>e.$emit("reorder",t))},null,8,["category","level","expanded","all-categories","expanded-nodes"]))),128))])):d("",!0)]);var r}}}),Da=I(za,[["__scopeId","data-v-c87da085"]]),Ea={class:"bg-white dark:bg-gray-800 shadow rounded-lg"},Ta={class:"px-4 py-5 sm:p-6"},Aa={key:0,class:"flex justify-center py-8"},Ma={key:1,class:"text-center py-8"},Oa={class:"mt-2 text-sm font-medium text-gray-900 dark:text-white"},Na={class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},Ra={key:2,class:"space-y-2"},Pa=r({__name:"CategoryTree",props:{categories:{},expandedNodes:{},loading:{type:Boolean,default:!1}},emits:["edit","delete","toggle-expand","create-subcategory","reorder"],setup(t){const a=t,r=e(()=>a.categories.filter(e=>!e.parent_id));return(e,t)=>(u(),l("div",Ea,[i("div",Ta,[e.loading?(u(),l("div",Aa,t[5]||(t[5]=[i("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1)]))):e.categories&&0!==e.categories.length?(u(),l("div",Ra,[(u(!0),l(v,null,p(r.value,a=>{var r;return u(),b(Da,{key:a.id,category:a,level:0,expanded:(null==(r=e.expandedNodes)?void 0:r.has(a.id))||!1,"all-categories":e.categories,onEdit:t[0]||(t[0]=t=>e.$emit("edit",t)),onDelete:t[1]||(t[1]=t=>e.$emit("delete",t)),onToggleExpand:t[2]||(t[2]=t=>e.$emit("toggle-expand",t)),onCreateSubcategory:t[3]||(t[3]=t=>e.$emit("create-subcategory",t)),onReorder:t[4]||(t[4]=t=>e.$emit("reorder",t))},null,8,["category","expanded","all-categories"])}),128))])):(u(),l("div",Ma,[o(s(T),{class:"mx-auto h-12 w-12 text-gray-400"}),i("h3",Oa,n(e.$t("inventory.categories.no_categories_found")),1),i("p",Na,n(e.$t("inventory.categories.description")),1)]))])]))}}),Ba={class:"relative"},Fa=["id","value"],Ha={value:""},Ga=["value","disabled"],Ja=r({__name:"CategorySelector",props:{modelValue:{default:null},id:{},placeholder:{},excludeId:{default:null},initialParentId:{default:null}},emits:["update:modelValue"],setup(t,{emit:a}){const r=t,o=a,s=Q(),d=e(()=>{const e=s.categories||[];return r.excludeId?e.filter(t=>t.id!==r.excludeId&&!g(t,r.excludeId,e)).sort((e,t)=>{const a=y(e),r=y(t);return a!==r?a-r:e.sort_order!==t.sort_order?(e.sort_order||0)-(t.sort_order||0):(e.name||"").localeCompare(t.name||"")}):e.sort((e,t)=>{const a=y(e),r=y(t);return a!==r?a-r:e.sort_order!==t.sort_order?(e.sort_order||0)-(t.sort_order||0):(e.name||"").localeCompare(t.name||"")})}),c=e=>{const t=e.target,a=t.value?parseInt(t.value):null;o("update:modelValue",a)},y=e=>{let t=0,a=e;const r=s.categories||[];for(;a.parent_id;){t++;const e=r.find(e=>e.id===a.parent_id);if(!e)break;a=e}return t},g=(e,t,a)=>{let r=e;for(;r.parent_id;){if(r.parent_id===t)return!0;const e=a.find(e=>e.id===r.parent_id);if(!e)break;r=e}return!1};return m(async()=>{s.categories&&0!==s.categories.length||await s.fetchCategories()}),(e,t)=>(u(),l("div",Ba,[i("select",{id:e.id,value:e.modelValue,onInput:c,class:"mt-1 block w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white sm:text-sm"},[i("option",Ha,n(e.placeholder||e.$t("inventory.categories.select_parent")),1),(u(!0),l(v,null,p(d.value,t=>(u(),l("option",{key:t.id,value:t.id,disabled:t.id===e.excludeId},n((e=>{const t=e.localized_name||e.name,a=y(e);return`${"  ".repeat(a)}${t}${e.code?` (${e.code})`:""}`})(t)),9,Ga))),128))],40,Fa)]))}}),Ka=["dir"],Wa={class:"flex"},Ya=["id","value"],Qa={value:""},Xa=["value"],Za={value:"custom"},er=["placeholder","dir"],tr={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},ar=r({__name:"GoldPuritySelector",props:{modelValue:{default:null},id:{},placeholder:{}},emits:["update:modelValue"],setup(t,{emit:r}){const o=t,c=r;K();const{execute:y}=ue(),{isRTL:x,formatGoldPurity:b}=Y(),{getGoldPurityOptions:h,toPersianNumerals:_,formatNumber:$}=U(),C=a(""),q=a(null),V=a([]),I=e(()=>V.value.length>0?V.value.map(e=>({value:e.purity,label:e.label})):h()),S=e(()=>"custom"===C.value),L=e=>{const t=e.target.value;if(C.value=t,"custom"===t)q.value=o.modelValue;else if(""===t)c("update:modelValue",null);else{const e=parseFloat(t);c("update:modelValue",e)}},z=()=>{null!==q.value&&void 0!==q.value?c("update:modelValue",q.value):c("update:modelValue",null)},D=()=>{if(null!==o.modelValue&&void 0!==o.modelValue){const e=I.value.find(e=>e.value===o.modelValue);e?C.value=String(e.value):(C.value="custom",q.value=o.modelValue)}else C.value="",q.value=null};w(()=>o.modelValue,D);return m(()=>{(async()=>{try{const e=await y(()=>j.get("/api/inventory/gold-purity-options"));e&&(V.value=e.standard_purities||[])}catch(e){}})(),D()}),(e,t)=>(u(),l("div",{class:"relative gold-purity-selector",dir:s(x)?"rtl":"ltr"},[i("div",Wa,[i("select",{id:e.id,value:C.value,onInput:L,class:g(["flex-1 border-gray-300 dark:border-gray-600 rounded-l-md shadow-sm focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white sm:text-sm",{"text-right":s(x)}])},[i("option",Qa,n(e.$t("inventory.categories.gold_purity_placeholder")),1),(u(!0),l(v,null,p(I.value,e=>(u(),l("option",{key:e.value,value:e.value},n(e.label),9,Xa))),128)),i("option",Za,n(e.$t("common.custom")),1)],42,Ya),S.value?f((u(),l("input",{key:0,"onUpdate:modelValue":t[0]||(t[0]=e=>q.value=e),onInput:z,type:"number",step:"0.001",min:"0",max:"24",placeholder:e.$t("inventory.categories.gold_purity_placeholder"),class:g(["flex-1 border-l-0 border-gray-300 dark:border-gray-600 rounded-r-md shadow-sm focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white sm:text-sm",{"text-right":s(x)}]),dir:s(x)?"rtl":"ltr"},null,42,er)),[[k,q.value,void 0,{number:!0}]]):d("",!0)]),i("p",tr,n(e.$t("inventory.gold_purity_help")),1)],8,Ka))}}),rr={class:"space-y-4"},lr={key:0,class:"flex items-center space-x-4"},ir={class:"flex-shrink-0"},or=["src","alt"],sr={class:"flex-1"},nr={class:"text-sm text-gray-900 dark:text-white"},dr={class:"text-xs text-gray-500 dark:text-gray-400"},cr={class:"space-y-2"},ur={class:"text-sm text-gray-600 dark:text-gray-400"},mr={class:"font-medium text-primary-600 hover:text-primary-500"},yr={class:"text-xs text-gray-500 dark:text-gray-400"},gr={key:1,class:"w-full bg-gray-200 rounded-full h-2"},xr={key:2,class:"text-sm text-red-600"},vr=r({__name:"CategoryImageUpload",props:{modelValue:{default:null},currentImage:{default:null},maxSize:{default:2},acceptedTypes:{default:()=>["image/jpeg","image/png","image/jpg","image/webp"]}},emits:["update:modelValue","uploaded","removed"],setup(e,{emit:t}){const r=e,m=t,{t:v}=K(),p=a(),b=a(null),f=a(null),k=a(!1),h=a(!1),_=a(0),$=a(null),C=e=>{var t;const a=null==(t=e.target.files)?void 0:t[0];a&&I(a)},q=e=>{var t;e.preventDefault(),e.stopPropagation(),k.value=!1;const a=null==(t=e.dataTransfer)?void 0:t.files;a&&a.length>0&&I(a[0])},j=e=>{e.preventDefault(),e.stopPropagation(),k.value=!0},V=e=>{e.preventDefault(),e.stopPropagation(),k.value=!1},I=e=>{if($.value=null,!r.acceptedTypes.includes(e.type))return void($.value=v("inventory.categories.invalid_file_type",{types:r.acceptedTypes.join(", ")}));const t=1024*r.maxSize*1024;if(e.size>t)return void($.value=v("inventory.categories.file_too_large",{maxSize:r.maxSize}));const a=new Image;a.onload=()=>a.width<100||a.height<100?($.value=v("inventory.categories.image_too_small"),void URL.revokeObjectURL(a.src)):a.width>2e3||a.height>2e3?($.value=v("inventory.categories.image_too_large"),void URL.revokeObjectURL(a.src)):(b.value=e,f.value&&URL.revokeObjectURL(f.value),f.value=URL.createObjectURL(e),m("update:modelValue",e),m("uploaded",e),S(),void URL.revokeObjectURL(a.src)),a.onerror=()=>{$.value=v("inventory.categories.invalid_image_file"),URL.revokeObjectURL(a.src)},a.src=URL.createObjectURL(e)},U=()=>{b.value=null,f.value&&(URL.revokeObjectURL(f.value),f.value=null),p.value&&(p.value.value=""),m("update:modelValue",null),m("removed")},S=()=>{h.value=!0,_.value=0;const e=setInterval(()=>{_.value+=10,_.value>=100&&(clearInterval(e),h.value=!1,_.value=0)},100)};return w(()=>r.modelValue,e=>{!e&&b.value&&U()}),y(()=>{f.value&&URL.revokeObjectURL(f.value)}),(e,t)=>{var a;return u(),l("div",rr,[e.currentImage||f.value?(u(),l("div",lr,[i("div",ir,[i("img",{src:f.value||e.currentImage||"",alt:s(v)("inventory.categories.image"),class:"h-20 w-20 rounded-lg object-cover border border-gray-300 dark:border-gray-600"},null,8,or)]),i("div",sr,[i("p",nr,n(s(v)("inventory.categories.image")),1),i("p",dr,n((null==(a=b.value)?void 0:a.name)||s(v)("common.current_image")),1),i("button",{onClick:U,type:"button",class:"mt-2 text-sm text-red-600 hover:text-red-500"},n(s(v)("inventory.categories.remove_image")),1)])])):d("",!0),i("div",{onDrop:q,onDragover:j,onDragleave:V,class:g(["relative border-2 border-dashed rounded-lg p-6 text-center hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",k.value?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-gray-300 dark:border-gray-600"])},[i("input",{ref_key:"fileInput",ref:p,type:"file",accept:"image/*",onChange:C,class:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"},null,544),i("div",cr,[o(s(O),{class:"mx-auto h-12 w-12 text-gray-400"}),i("div",ur,[i("span",mr,n(s(v)("inventory.categories.upload_image")),1),c(" "+n(s(v)("inventory.or_drag_drop")),1)]),i("p",yr,n(s(v)("inventory.image_formats")),1)])],34),h.value?(u(),l("div",gr,[i("div",{class:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:x({width:`${_.value}%`})},null,4)])):d("",!0),$.value?(u(),l("div",xr,n($.value),1)):d("",!0)])}}}),pr={class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},br={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},fr={class:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full sm:p-6"},kr={class:"mb-6 category-form-header"},hr={class:"flex justify-between items-center"},_r={class:"text-lg leading-6 font-medium text-gray-900 dark:text-white",id:"modal-title"},wr={class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},$r={class:"text-sm text-gray-500 dark:text-gray-400"},Cr={key:0,class:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md"},qr={class:"text-sm text-red-600 dark:text-red-400"},jr={class:"space-y-6"},Vr={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ir={for:"name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},Ur=["placeholder"],Sr={key:0,class:"mt-1 text-sm text-red-600"},Lr={for:"name_persian",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},zr=["placeholder"],Dr={key:0,class:"mt-1 text-sm text-red-600"},Er={for:"code",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},Tr=["placeholder"],Ar={key:0,class:"mt-1 text-sm text-red-600"},Mr={for:"parent_id",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},Or={key:0,class:"mt-1 text-sm text-red-600"},Nr={for:"default_gold_purity",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},Rr={key:0,class:"mt-1 text-sm text-red-600"},Pr={for:"sort_order",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},Br={key:0,class:"mt-1 text-sm text-red-600"},Fr={class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},Hr={key:0,class:"mt-1 text-sm text-red-600"},Gr={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Jr={for:"description",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},Kr=["placeholder"],Wr={key:0,class:"mt-1 text-sm text-red-600"},Yr={for:"description_persian",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},Qr=["placeholder"],Xr={key:0,class:"mt-1 text-sm text-red-600"},Zr={class:"flex items-center"},el={for:"is_active",class:"ml-2 block text-sm text-gray-900 dark:text-white"},tl={class:"mt-8 flex justify-end space-x-3"},al=["disabled"],rl={key:0,class:"animate-spin -ml-1 mr-3 h-4 w-4 text-white"},ll=r({__name:"CategoryFormModal",props:{category:{default:null},isEdit:{type:Boolean,default:!1},parentId:{default:null}},emits:["close","saved"],setup(e,{emit:t}){const r=e,s=t,y=Q(),{t:g}=K();Y(),U();const x=a(!1),v=a({}),p=$({name:"",name_persian:"",code:"",description:"",description_persian:"",parent_id:null,default_gold_purity:null,sort_order:0,is_active:!0,image:null}),b=async()=>{var e,t,a,l,i;x.value=!0,v.value={};try{if(p.parent_id&&(null==(e=r.category)?void 0:e.id)){if(p.parent_id===r.category.id)return void(v.value={parent_id:[g("inventory.categories.circular_reference_error")]});if(j(p.parent_id,r.category.id))return void(v.value={parent_id:[g("inventory.categories.circular_reference_error")]})}const t=new FormData;let a;Object.entries(p).forEach(([e,a])=>{null!=a&&("image"===e&&a instanceof File?t.append(e,a):"boolean"==typeof a?t.append(e,a?"1":"0"):t.append(e,String(a)))}),a=r.isEdit&&r.category?await y.updateCategory(r.category.id,t):await y.createCategory(t),s("saved",a)}catch(o){(null==(a=null==(t=o.response)?void 0:t.data)?void 0:a.errors)?v.value=o.response.data.errors:(null==(i=null==(l=o.response)?void 0:l.data)?void 0:i.message)?o.response.data.message.includes("circular")?v.value={parent_id:[g("inventory.categories.circular_reference_error")]}:v.value={general:[o.response.data.message]}:v.value={general:[g("common.error")]}}finally{x.value=!1}},h=e=>{p.image=e},_=()=>{p.image=null},j=(e,t)=>{const a=y.categories||[];let r=a.find(t=>t.id===e);for(;null==r?void 0:r.parent_id;){if(r.parent_id===t)return!0;r=a.find(e=>e.id===r.parent_id)}return!1},V=()=>{r.isEdit&&r.category?(p.name=r.category.name||"",p.name_persian=r.category.name_persian||"",p.code=r.category.code||"",p.description=r.category.description||"",p.description_persian=r.category.description_persian||"",p.parent_id=r.category.parent_id||null,p.default_gold_purity=r.category.default_gold_purity||null,p.sort_order=r.category.sort_order||0,p.is_active=r.category.is_active??!0):(p.name="",p.name_persian="",p.code="",p.description="",p.description_persian="",p.parent_id=r.parentId||null,p.default_gold_purity=null,p.sort_order=0,p.is_active=!0,p.image=null)};return w(()=>r.category,V,{immediate:!0}),w(()=>r.parentId,e=>{r.isEdit||(p.parent_id=e)}),m(()=>{V()}),(e,t)=>{var a,r;return u(),l("div",pr,[i("div",br,[i("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t[0]||(t[0]=t=>e.$emit("close"))}),i("div",fr,[i("form",{onSubmit:C(b,["prevent"])},[i("div",kr,[i("div",hr,[i("div",null,[i("h3",_r,n(e.isEdit?e.$t("inventory.categories.edit_category"):e.$t("inventory.categories.add_category")),1),i("p",wr,n(e.isEdit?e.$t("inventory.categories.edit_category"):e.$t("inventory.categories.description")),1)]),i("div",$r,n(e.$t("language.current_language")),1)])]),v.value.general?(u(),l("div",Cr,[i("p",qr,n(v.value.general[0]),1)])):d("",!0),i("div",jr,[i("div",Vr,[i("div",null,[i("label",Ir,n(e.$t("inventory.categories.name"))+" * ",1),f(i("input",{id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>p.name=e),type:"text",required:"",class:"mt-1 block w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white sm:text-sm",placeholder:e.$t("inventory.categories.name_placeholder")},null,8,Ur),[[k,p.name]]),v.value.name?(u(),l("p",Sr,n(v.value.name[0]),1)):d("",!0)]),i("div",null,[i("label",Lr,n(e.$t("inventory.categories.name_persian")),1),f(i("input",{id:"name_persian","onUpdate:modelValue":t[2]||(t[2]=e=>p.name_persian=e),type:"text",dir:"rtl",class:"mt-1 block w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white sm:text-sm",placeholder:e.$t("inventory.categories.name_persian_placeholder")},null,8,zr),[[k,p.name_persian]]),v.value.name_persian?(u(),l("p",Dr,n(v.value.name_persian[0]),1)):d("",!0)]),i("div",null,[i("label",Er,n(e.$t("inventory.categories.code"))+" * ",1),f(i("input",{id:"code","onUpdate:modelValue":t[3]||(t[3]=e=>p.code=e),type:"text",required:"",class:"mt-1 block w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white sm:text-sm",placeholder:e.$t("inventory.categories.code_placeholder")},null,8,Tr),[[k,p.code]]),v.value.code?(u(),l("p",Ar,n(v.value.code[0]),1)):d("",!0)]),i("div",null,[i("label",Mr,n(e.$t("inventory.categories.parent_category")),1),o(Ja,{id:"parent_id",modelValue:p.parent_id,"onUpdate:modelValue":t[4]||(t[4]=e=>p.parent_id=e),"exclude-id":null==(a=e.category)?void 0:a.id,placeholder:e.$t("inventory.categories.select_parent"),"initial-parent-id":e.parentId},null,8,["modelValue","exclude-id","placeholder","initial-parent-id"]),v.value.parent_id?(u(),l("p",Or,n(v.value.parent_id[0]),1)):d("",!0)]),i("div",null,[i("label",Nr,n(e.$t("inventory.categories.default_gold_purity")),1),o(ar,{id:"default_gold_purity",modelValue:p.default_gold_purity,"onUpdate:modelValue":t[5]||(t[5]=e=>p.default_gold_purity=e),placeholder:e.$t("inventory.categories.gold_purity_placeholder")},null,8,["modelValue","placeholder"]),v.value.default_gold_purity?(u(),l("p",Rr,n(v.value.default_gold_purity[0]),1)):d("",!0)]),i("div",null,[i("label",Pr,n(e.$t("inventory.categories.sort_order")),1),f(i("input",{id:"sort_order","onUpdate:modelValue":t[6]||(t[6]=e=>p.sort_order=e),type:"number",min:"0",class:"mt-1 block w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white sm:text-sm"},null,512),[[k,p.sort_order,void 0,{number:!0}]]),v.value.sort_order?(u(),l("p",Br,n(v.value.sort_order[0]),1)):d("",!0)])]),i("div",null,[i("label",Fr,n(e.$t("inventory.categories.image")),1),o(vr,{modelValue:p.image,"onUpdate:modelValue":t[7]||(t[7]=e=>p.image=e),"current-image":null==(r=e.category)?void 0:r.image_path,onUploaded:h,onRemoved:_},null,8,["modelValue","current-image"]),v.value.image?(u(),l("p",Hr,n(v.value.image[0]),1)):d("",!0)]),i("div",Gr,[i("div",null,[i("label",Jr,n(e.$t("inventory.categories.description")),1),f(i("textarea",{id:"description","onUpdate:modelValue":t[8]||(t[8]=e=>p.description=e),rows:"3",class:"mt-1 block w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white sm:text-sm",placeholder:e.$t("inventory.categories.description_placeholder")},null,8,Kr),[[k,p.description]]),v.value.description?(u(),l("p",Wr,n(v.value.description[0]),1)):d("",!0)]),i("div",null,[i("label",Yr,n(e.$t("inventory.categories.description_persian")),1),f(i("textarea",{id:"description_persian","onUpdate:modelValue":t[9]||(t[9]=e=>p.description_persian=e),rows:"3",dir:"rtl",class:"mt-1 block w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white sm:text-sm",placeholder:e.$t("inventory.categories.description_persian_placeholder")},null,8,Qr),[[k,p.description_persian]]),v.value.description_persian?(u(),l("p",Xr,n(v.value.description_persian[0]),1)):d("",!0)])]),i("div",Zr,[f(i("input",{id:"is_active","onUpdate:modelValue":t[10]||(t[10]=e=>p.is_active=e),type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[q,p.is_active]]),i("label",el,n(e.$t("inventory.categories.is_active")),1)])]),i("div",tl,[i("button",{type:"button",onClick:t[11]||(t[11]=t=>e.$emit("close")),class:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},n(e.$t("common.cancel")),1),i("button",{type:"submit",disabled:x.value,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed"},[x.value?(u(),l("span",rl,t[12]||(t[12]=[i("svg",{class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},[i("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),i("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):d("",!0),c(" "+n(e.isEdit?e.$t("common.update"):e.$t("common.create")),1)],8,al)])],32)])])])}}}),il={class:"space-y-6"},ol={class:"sm:flex sm:items-center sm:justify-between"},sl={class:"sm:flex-auto"},nl={class:"text-lg font-medium text-gray-900 dark:text-white"},dl={class:"mt-1 text-sm text-gray-700 dark:text-gray-300"},cl={class:"mt-4 sm:mt-0 sm:flex-none space-x-3 flex items-center"},ul={class:"text-sm text-gray-500 dark:text-gray-400"},ml={class:"bg-white dark:bg-gray-800 shadow rounded-lg"},yl={class:"px-4 py-5 sm:p-6"},gl={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},xl={for:"search",class:"sr-only"},vl={class:"relative"},pl={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},bl=["placeholder"],fl={for:"parent-filter",class:"sr-only"},kl={value:""},hl={value:"main"},_l={value:"with_subcategories"},wl={class:"flex space-x-2"},$l=r({__name:"CategoryManagement",setup(t){const r=Q(),{currentLanguage:y,isRTL:g,getLocalizedCategoryName:x}=Y();U();const v=a(""),p=a(""),_=a(new Set),w=a(!1),$=a(!1),C=a(!1),q=a(null),j=a(null),V=e(()=>{let e=r.categories||[];if(v.value){const t=v.value.toLowerCase();e=e.filter(e=>{var a,r,l;return(null==(a=e.name)?void 0:a.toLowerCase().includes(t))||(null==(r=e.name_persian)?void 0:r.toLowerCase().includes(t))||(null==(l=e.code)?void 0:l.toLowerCase().includes(t))})}return"main"===p.value?e=e.filter(e=>!e.parent_id):"with_subcategories"===p.value&&(e=e.filter(e=>e.has_children)),e}),I=e=>{q.value=e,$.value=!0},S=e=>{q.value=e,C.value=!0},L=e=>{j.value=e.id,w.value=!0},z=async()=>{if(q.value)try{await r.deleteCategory(q.value.id),C.value=!1,q.value=null}catch(e){}},D=async e=>{try{await r.reorderCategories(e)}catch(t){}},E=e=>{_.value.has(e)?_.value.delete(e):_.value.add(e)},T=()=>{var e;const t=(null==(e=r.categories)?void 0:e.map(e=>e.id))||[];_.value=new Set(t)},M=()=>{_.value.clear()},O=()=>{R(),r.fetchCategories()},R=()=>{w.value=!1,$.value=!1,q.value=null,j.value=null};return m(async()=>{await r.fetchCategories()}),(e,t)=>{var a;return u(),l("div",il,[i("div",ol,[i("div",sl,[i("h2",nl,n(e.$t("inventory.categories.title")),1),i("p",dl,n(e.$t("inventory.categories.description")),1)]),i("div",cl,[i("div",ul,n("fa"===s(y)?"فارسی":"English"),1),i("button",{onClick:t[0]||(t[0]=e=>w.value=!0),type:"button",class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},[o(s(A),{class:"h-4 w-4 mr-2"}),c(" "+n(e.$t("inventory.categories.add_category")),1)])])]),i("div",ml,[i("div",yl,[i("div",gl,[i("div",null,[i("label",xl,n(e.$t("inventory.categories.search_placeholder")),1),i("div",vl,[i("div",pl,[o(s(N),{class:"h-5 w-5 text-gray-400"})]),f(i("input",{id:"search","onUpdate:modelValue":t[1]||(t[1]=e=>v.value=e),type:"text",placeholder:e.$t("inventory.categories.search_placeholder"),class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white dark:bg-gray-700 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary-500 focus:border-primary-500 text-sm"},null,8,bl),[[k,v.value]])])]),i("div",null,[i("label",fl,n(e.$t("inventory.categories.filter_by_parent")),1),f(i("select",{id:"parent-filter","onUpdate:modelValue":t[2]||(t[2]=e=>p.value=e),class:"block w-full px-3 py-2 border border-gray-300 rounded-md leading-5 bg-white dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500 text-sm"},[i("option",kl,n(e.$t("inventory.categories.show_all")),1),i("option",hl,n(e.$t("inventory.categories.show_main_only")),1),i("option",_l,n(e.$t("inventory.categories.show_subcategories")),1)],512),[[h,p.value]])]),i("div",wl,[i("button",{onClick:T,type:"button",class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},n(e.$t("inventory.categories.expand_all")),1),i("button",{onClick:M,type:"button",class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},n(e.$t("inventory.categories.collapse_all")),1)])])])]),o(Pa,{categories:V.value,"expanded-nodes":_.value,loading:s(r).loading.categories,onEdit:I,onDelete:S,onReorder:D,onToggleExpand:E,onCreateSubcategory:L},null,8,["categories","expanded-nodes","loading"]),w.value||$.value?(u(),b(ll,{key:0,category:q.value,"is-edit":$.value,"parent-id":j.value,onClose:R,onSaved:O},null,8,["category","is-edit","parent-id"])):d("",!0),C.value?(u(),b(ce,{key:1,title:e.$t("inventory.categories.delete_category"),message:e.$t("inventory.categories.delete_confirmation",{name:null==(a=q.value)?void 0:a.name}),loading:s(r).loading.deleting,onConfirm:z,onCancel:t[3]||(t[3]=e=>C.value=!1)},null,8,["title","message","loading"])):d("",!0)])}}}),Cl={class:"fixed inset-0 z-50 overflow-y-auto"},ql={class:"flex min-h-screen items-center justify-center p-4"},jl={class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full"},Vl={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},Il={class:"flex items-center justify-between"},Ul={class:"text-lg font-medium text-gray-900 dark:text-white"},Sl={class:"space-y-4"},Ll={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},zl=["placeholder"],Dl={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},El={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Tl={value:""},Al=["value"],Ml={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},Ol={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Nl={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},Rl={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Pl=["placeholder"],Bl={class:"flex items-center"},Fl={class:"ml-2 block text-sm text-gray-900 dark:text-white"},Hl={class:"text-xs text-gray-500 dark:text-gray-400"},Gl={class:"mt-6 flex justify-end space-x-3"},Jl=["disabled"],Kl={key:0,class:"flex items-center"},Wl={key:1},Yl=r({__name:"CreateAuditModal",emits:["close","created"],setup(e,{emit:t}){const r=t,y=Q(),x=a(!1),b=a({}),_=$({audit_number:"",location_id:"",audit_date:(new Date).toISOString().split("T")[0],notes:"",auto_start:!1}),w=async()=>{var e,t;x.value=!0,b.value={};try{const e={..._,location_id:_.location_id||null},t=await y.createAudit(e);t&&_.auto_start&&await y.startAudit(t.id),r("created",t)}catch(a){(null==(t=null==(e=a.response)?void 0:e.data)?void 0:t.errors)&&(b.value=a.response.data.errors)}finally{x.value=!1}};return m(()=>{(()=>{const e=new Date,t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),l=String(e.getHours()).padStart(2,"0")+String(e.getMinutes()).padStart(2,"0");_.audit_number=`AUD-${t}${a}${r}-${l}`})()}),(e,t)=>(u(),l("div",Cl,[i("div",ql,[i("div",{class:"fixed inset-0 bg-black bg-opacity-25",onClick:t[0]||(t[0]=t=>e.$emit("close"))}),i("div",jl,[i("div",Vl,[i("div",Il,[i("h3",Ul,n(e.$t("inventory.create_audit")),1),i("button",{onClick:t[1]||(t[1]=t=>e.$emit("close")),class:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"},[o(s(R),{class:"h-6 w-6"})])])]),i("form",{onSubmit:C(w,["prevent"]),class:"p-6"},[i("div",Sl,[i("div",null,[i("label",Ll,n(e.$t("inventory.audit_number"))+" * ",1),f(i("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>_.audit_number=e),type:"text",required:"",class:g(["block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",b.value.audit_number?"border-red-300 focus:border-red-500 focus:ring-red-500":""]),placeholder:e.$t("inventory.audit_number_placeholder")},null,10,zl),[[k,_.audit_number]]),b.value.audit_number?(u(),l("p",Dl,n(b.value.audit_number[0]),1)):d("",!0)]),i("div",null,[i("label",El,n(e.$t("inventory.location")),1),f(i("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>_.location_id=e),class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[i("option",Tl,n(e.$t("inventory.all_locations")),1),(u(!0),l(v,null,p(s(y).locations,e=>(u(),l("option",{key:e.id,value:e.id},n(e.name),9,Al))),128))],512),[[h,_.location_id]]),i("p",Ml,n(e.$t("inventory.location_audit_help")),1)]),i("div",null,[i("label",Ol,n(e.$t("inventory.audit_date"))+" * ",1),f(i("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>_.audit_date=e),type:"date",required:"",class:g(["block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",b.value.audit_date?"border-red-300 focus:border-red-500 focus:ring-red-500":""])},null,2),[[k,_.audit_date]]),b.value.audit_date?(u(),l("p",Nl,n(b.value.audit_date[0]),1)):d("",!0)]),i("div",null,[i("label",Rl,n(e.$t("inventory.notes")),1),f(i("textarea",{"onUpdate:modelValue":t[5]||(t[5]=e=>_.notes=e),rows:"3",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:e.$t("inventory.audit_notes_placeholder")},null,8,Pl),[[k,_.notes]])]),i("div",Bl,[f(i("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>_.auto_start=e),type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[q,_.auto_start]]),i("label",Fl,n(e.$t("inventory.auto_start_audit")),1)]),i("p",Hl,n(e.$t("inventory.auto_start_help")),1)]),i("div",Gl,[i("button",{type:"button",onClick:t[7]||(t[7]=t=>e.$emit("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},n(e.$t("common.cancel")),1),i("button",{type:"submit",disabled:x.value,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed"},[x.value?(u(),l("span",Kl,[t[8]||(t[8]=i("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},[i("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),i("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),c(" "+n(e.$t("common.creating")),1)])):(u(),l("span",Wl,n(e.$t("inventory.create_audit")),1))],8,Jl)])],32)])])]))}}),Ql={class:"fixed inset-0 z-50 overflow-y-auto"},Xl={class:"flex min-h-screen items-center justify-center p-4"},Zl={class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto"},ei={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},ti={class:"flex items-center justify-between"},ai={class:"text-lg font-medium text-gray-900 dark:text-white"},ri={class:"text-sm text-gray-500 dark:text-gray-400"},li={class:"flex items-center space-x-2"},ii={class:"p-6"},oi={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},si={class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg"},ni={class:"text-sm font-medium text-blue-600 dark:text-blue-400"},di={class:"text-2xl font-bold text-blue-900 dark:text-blue-100"},ci={class:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg"},ui={class:"text-sm font-medium text-green-600 dark:text-green-400"},mi={class:"text-2xl font-bold text-green-900 dark:text-green-100"},yi={class:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg"},gi={class:"text-sm font-medium text-yellow-600 dark:text-yellow-400"},xi={class:"text-2xl font-bold text-yellow-900 dark:text-yellow-100"},vi={class:"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg"},pi={class:"text-sm font-medium text-red-600 dark:text-red-400"},bi={class:"text-2xl font-bold text-red-900 dark:text-red-100"},fi={class:"mb-6"},ki={class:"flex justify-between text-sm text-gray-600 dark:text-gray-400 mb-2"},hi={class:"w-full bg-gray-200 rounded-full h-2 dark:bg-gray-700"},_i={key:0,class:"mb-6 flex space-x-3"},wi=["disabled"],$i=["disabled"],Ci={class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden"},qi={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},ji={class:"text-lg font-medium text-gray-900 dark:text-white"},Vi={key:0,class:"p-6"},Ii={class:"animate-pulse space-y-4"},Ui={key:1,class:"overflow-x-auto"},Si={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Li={class:"bg-gray-50 dark:bg-gray-900"},zi={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Di={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Ei={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Ti={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Ai={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Mi={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Oi={key:0,class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Ni={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Ri={class:"px-6 py-4 whitespace-nowrap"},Pi={class:"flex items-center"},Bi={class:"flex-shrink-0 h-10 w-10"},Fi={class:"h-10 w-10 rounded-lg bg-gray-200 dark:bg-gray-600 flex items-center justify-center"},Hi={class:"ml-4"},Gi={class:"text-sm font-medium text-gray-900 dark:text-white"},Ji={class:"text-sm text-gray-500 dark:text-gray-400"},Ki={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Wi={class:"px-6 py-4 whitespace-nowrap"},Yi={key:0},Qi=["onUpdate:modelValue","onBlur"],Xi={key:1,class:"text-sm text-gray-900 dark:text-white"},Zi={class:"px-6 py-4 whitespace-nowrap"},eo={key:1,class:"text-sm text-gray-500 dark:text-gray-400"},to={class:"px-6 py-4 whitespace-nowrap"},ao={key:1,class:"text-sm text-gray-500 dark:text-gray-400"},ro={class:"px-6 py-4 whitespace-nowrap"},lo={key:0,class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},io=["onClick"],oo=r({__name:"AuditDetailsModal",props:{audit:{}},emits:["close","updated"],setup(t,{emit:r}){const y=t,b=r,h=Q(),{formatNumber:_,formatCurrency:w}=U(),$=a({starting:!1,completing:!1,updating:!1}),C=e(()=>{var e,t;return(null==(t=null==(e=y.audit)?void 0:e.audit_items)?void 0:t.filter(e=>e.is_counted).length)||0}),q=e=>{if(!e)return"";const t={pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",in_progress:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",completed:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",cancelled:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"};return t[e]||t.pending},j=async()=>{if(y.audit){$.value.starting=!0;try{await h.startAudit(y.audit.id),b("updated")}catch(e){}finally{$.value.starting=!1}}},V=async()=>{if(y.audit){$.value.completing=!0;try{await h.completeAudit(y.audit.id),b("updated")}catch(e){}finally{$.value.completing=!1}}};return m(async()=>{y.audit&&await h.fetchAudit(y.audit.id)}),(e,t)=>{var a,r,m,b,I,U,L,z,D,E,T,A,M,O,N,F,H,G,J;return u(),l("div",Ql,[i("div",Xl,[i("div",{class:"fixed inset-0 bg-black bg-opacity-25",onClick:t[0]||(t[0]=t=>e.$emit("close"))}),i("div",Zl,[i("div",ei,[i("div",ti,[i("div",null,[i("h3",ai,n(null==(a=e.audit)?void 0:a.audit_number),1),i("p",ri,n((null==(m=null==(r=e.audit)?void 0:r.location)?void 0:m.name)||e.$t("inventory.all_locations"))+" - "+n((J=null==(b=e.audit)?void 0:b.audit_date,J?new Date(J).toLocaleDateString():"-")),1)]),i("div",li,[i("span",{class:g(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",q(null==(I=e.audit)?void 0:I.status)])},n(e.$t(`inventory.audit_status.${null==(U=e.audit)?void 0:U.status}`)),3),i("button",{onClick:t[1]||(t[1]=t=>e.$emit("close")),class:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"},[o(s(R),{class:"h-6 w-6"})])])])]),i("div",ii,[i("div",oi,[i("div",si,[i("div",ni,n(e.$t("inventory.total_items")),1),i("div",di,n((null==(z=null==(L=e.audit)?void 0:L.audit_items)?void 0:z.length)||0),1)]),i("div",ci,[i("div",ui,n(e.$t("inventory.counted_items")),1),i("div",mi,n(C.value),1)]),i("div",yi,[i("div",gi,n(e.$t("inventory.items_with_variance")),1),i("div",xi,n((null==(D=e.audit)?void 0:D.items_with_variance_count)||0),1)]),i("div",vi,[i("div",pi,n(e.$t("inventory.total_variance_value")),1),i("div",bi,n(s(w)((null==(E=e.audit)?void 0:E.total_variance_value)||0)),1)])]),i("div",fi,[i("div",ki,[i("span",null,n(e.$t("inventory.audit_progress")),1),i("span",null,n(Math.round((null==(T=e.audit)?void 0:T.completion_percentage)||0))+"%",1)]),i("div",hi,[i("div",{class:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:x({width:`${(null==(A=e.audit)?void 0:A.completion_percentage)||0}%`})},null,4)])]),"completed"!==(null==(M=e.audit)?void 0:M.status)?(u(),l("div",_i,["pending"===(null==(O=e.audit)?void 0:O.status)?(u(),l("button",{key:0,onClick:j,disabled:$.value.starting,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50"},[o(s(P),{class:"h-4 w-4 mr-2"}),c(" "+n(e.$t("inventory.start_audit")),1)],8,wi)):d("",!0),"in_progress"===(null==(N=e.audit)?void 0:N.status)&&100===((null==(F=e.audit)?void 0:F.completion_percentage)||0)?(u(),l("button",{key:1,onClick:V,disabled:$.value.completing,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50"},[o(s(B),{class:"h-4 w-4 mr-2"}),c(" "+n(e.$t("inventory.complete_audit")),1)],8,$i)):d("",!0)])):d("",!0),i("div",Ci,[i("div",qi,[i("h4",ji,n(e.$t("inventory.audit_items")),1)]),s(h).loading.audit?(u(),l("div",Vi,[i("div",Ii,[(u(),l(v,null,p(5,e=>i("div",{key:e,class:"h-16 bg-gray-200 dark:bg-gray-700 rounded"})),64))])])):(u(),l("div",Ui,[i("table",Si,[i("thead",Li,[i("tr",null,[i("th",zi,n(e.$t("inventory.item")),1),i("th",Di,n(e.$t("inventory.expected_quantity")),1),i("th",Ei,n(e.$t("inventory.actual_quantity")),1),i("th",Ti,n(e.$t("inventory.variance")),1),i("th",Ai,n(e.$t("inventory.variance_value")),1),i("th",Mi,n(e.$t("common.status")),1),"in_progress"===(null==(H=e.audit)?void 0:H.status)?(u(),l("th",Oi,n(e.$t("common.actions")),1)):d("",!0)])]),i("tbody",Ni,[(u(!0),l(v,null,p(null==(G=e.audit)?void 0:G.audit_items,t=>{var a,r,c,m,x;return u(),l("tr",{key:t.id,class:g(["hover:bg-gray-50 dark:hover:bg-gray-700",0!==t.variance?"bg-yellow-50 dark:bg-yellow-900/10":""])},[i("td",Ri,[i("div",Pi,[i("div",Bi,[i("div",Fi,[o(s(S),{class:"h-6 w-6 text-gray-400"})])]),i("div",Hi,[i("div",Gi,n((null==(a=t.inventory_item)?void 0:a.localized_name)||(null==(r=t.inventory_item)?void 0:r.name)),1),i("div",Ji,n(null==(c=t.inventory_item)?void 0:c.sku),1)])])]),i("td",Ki,n(s(_)(t.expected_quantity)),1),i("td",Wi,["in_progress"!==(null==(m=e.audit)?void 0:m.status)||t.is_counted?(u(),l("div",Xi,n(null!==t.actual_quantity&&void 0!==t.actual_quantity?s(_)(t.actual_quantity):"-"),1)):(u(),l("div",Yi,[f(i("input",{"onUpdate:modelValue":e=>t.actual_quantity=e,onBlur:e=>(async e=>{if(y.audit&&!$.value.updating){$.value.updating=!0;try{await h.updateAuditItem(y.audit.id,e.inventory_item_id,{actual_quantity:e.actual_quantity}),y.audit&&await h.fetchAudit(y.audit.id)}catch(t){}finally{$.value.updating=!1}}})(t),type:"number",step:"0.001",min:"0",class:"block w-20 rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,40,Qi),[[k,t.actual_quantity,void 0,{number:!0}]])]))]),i("td",Zi,[null!==t.variance?(u(),l("span",{key:0,class:g(["text-sm font-medium",(t.variance||0)>0?"text-green-600 dark:text-green-400":(t.variance||0)<0?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"])},n((t.variance||0)>0?"+":"")+n(s(_)(t.variance||0)),3)):(u(),l("span",eo,"-"))]),i("td",to,[null!==t.variance_value?(u(),l("span",{key:0,class:g(["text-sm font-medium",(t.variance_value||0)>0?"text-green-600 dark:text-green-400":(t.variance_value||0)<0?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"])},n((t.variance_value||0)>0?"+":"")+n(s(w)(t.variance_value||0)),3)):(u(),l("span",ao,"-"))]),i("td",ro,[i("span",{class:g(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",t.is_counted?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"])},n(t.is_counted?e.$t("inventory.counted"):e.$t("inventory.pending")),3)]),"in_progress"===(null==(x=e.audit)?void 0:x.status)?(u(),l("td",lo,[t.is_counted?d("",!0):(u(),l("button",{key:0,onClick:e=>(async e=>{if(y.audit)try{await h.updateAuditItem(y.audit.id,e.inventory_item_id,{actual_quantity:e.actual_quantity||e.expected_quantity,is_counted:!0}),y.audit&&await h.fetchAudit(y.audit.id)}catch(t){}})(t),class:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300"},[o(s(B),{class:"h-4 w-4"})],8,io))])):d("",!0)],2)}),128))])])]))])])])])])}}}),so={class:"space-y-6"},no={class:"sm:flex sm:items-center sm:justify-between"},co={class:"sm:flex-auto"},uo={class:"text-lg font-medium text-gray-900 dark:text-white"},mo={class:"mt-1 text-sm text-gray-700 dark:text-gray-300"},yo={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},go={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-4"},xo={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},vo={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},po={value:""},bo={value:"pending"},fo={value:"in_progress"},ko={value:"completed"},ho={value:"cancelled"},_o={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},wo={value:""},$o=["value"],Co={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},qo={class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden"},jo={key:0,class:"p-6"},Vo={class:"animate-pulse space-y-4"},Io={key:1,class:"p-6 text-center"},Uo={class:"mt-2 text-sm font-medium text-gray-900 dark:text-white"},So={class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},Lo={class:"mt-6"},zo={key:2,class:"overflow-x-auto"},Do={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Eo={class:"bg-gray-50 dark:bg-gray-900"},To={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Ao={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Mo={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Oo={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},No={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Ro={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Po={class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Bo={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Fo={class:"px-6 py-4 whitespace-nowrap"},Ho={class:"text-sm font-medium text-gray-900 dark:text-white"},Go={class:"text-sm text-gray-500 dark:text-gray-400"},Jo={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Ko={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Wo={class:"px-6 py-4 whitespace-nowrap"},Yo={class:"px-6 py-4 whitespace-nowrap"},Qo={class:"flex items-center"},Xo={class:"w-16 bg-gray-200 rounded-full h-2 dark:bg-gray-700"},Zo={class:"ml-2 text-sm text-gray-900 dark:text-white"},es={class:"px-6 py-4 whitespace-nowrap"},ts={class:"text-sm text-gray-900 dark:text-white"},as={class:"text-sm text-gray-500 dark:text-gray-400"},rs={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},ls={class:"flex justify-end space-x-2"},is=["onClick"],os=["onClick"],ss=["onClick"],ns=["onClick"],ds=r({__name:"StockAuditInterface",setup(e){const t=Q(),{formatCurrency:r}=U(),y=a(!1),_=a(!1),w=a(!1),$=a(null),C=a({status:"",location_id:"",date_from:""}),q=e=>{const t={pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",in_progress:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",completed:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",cancelled:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"};return t[e]||t.pending},j=()=>{const e={...C.value};Object.keys(e).forEach(t=>{""===e[t]&&delete e[t]}),t.fetchAudits(e)},V=async()=>{if($.value)try{w.value=!1,$.value=null,j()}catch(e){}},I=()=>{y.value=!1,j()},S=()=>{_.value=!1,j()};return m(()=>{j()}),(e,a)=>{var m;return u(),l("div",so,[i("div",no,[i("div",co,[i("h2",uo,n(e.$t("inventory.stock_audits")),1),i("p",mo,n(e.$t("inventory.stock_audits_description")),1)]),i("div",yo,[i("button",{onClick:a[0]||(a[0]=e=>y.value=!0),type:"button",class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},[o(s(A),{class:"h-4 w-4 mr-2"}),c(" "+n(e.$t("inventory.create_audit")),1)])])]),i("div",go,[i("div",xo,[i("div",null,[i("label",vo,n(e.$t("common.status")),1),f(i("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>C.value.status=e),onChange:j,class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[i("option",po,n(e.$t("common.all_statuses")),1),i("option",bo,n(e.$t("inventory.audit_status.pending")),1),i("option",fo,n(e.$t("inventory.audit_status.in_progress")),1),i("option",ko,n(e.$t("inventory.audit_status.completed")),1),i("option",ho,n(e.$t("inventory.audit_status.cancelled")),1)],544),[[h,C.value.status]])]),i("div",null,[i("label",_o,n(e.$t("inventory.location")),1),f(i("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>C.value.location_id=e),onChange:j,class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[i("option",wo,n(e.$t("common.all_locations")),1),(u(!0),l(v,null,p(s(t).locations,e=>(u(),l("option",{key:e.id,value:e.id},n(e.name),9,$o))),128))],544),[[h,C.value.location_id]])]),i("div",null,[i("label",Co,n(e.$t("common.date_range")),1),f(i("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>C.value.date_from=e),type:"date",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[k,C.value.date_from]])])])]),i("div",qo,[s(t).loading.audits?(u(),l("div",jo,[i("div",Vo,[(u(),l(v,null,p(3,e=>i("div",{key:e,class:"h-20 bg-gray-200 dark:bg-gray-700 rounded"})),64))])])):0===s(t).audits.length?(u(),l("div",Io,[o(s(F),{class:"mx-auto h-12 w-12 text-gray-400"}),i("h3",Uo,n(e.$t("inventory.no_audits")),1),i("p",So,n(e.$t("inventory.no_audits_description")),1),i("div",Lo,[i("button",{onClick:a[4]||(a[4]=e=>y.value=!0),type:"button",class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[o(s(A),{class:"h-4 w-4 mr-2"}),c(" "+n(e.$t("inventory.create_first_audit")),1)])])])):(u(),l("div",zo,[i("table",Do,[i("thead",Eo,[i("tr",null,[i("th",To,n(e.$t("inventory.audit_number")),1),i("th",Ao,n(e.$t("inventory.location")),1),i("th",Mo,n(e.$t("inventory.audit_date")),1),i("th",Oo,n(e.$t("common.status")),1),i("th",No,n(e.$t("inventory.progress")),1),i("th",Ro,n(e.$t("inventory.variance")),1),i("th",Po,n(e.$t("common.actions")),1)])]),i("tbody",Bo,[(u(!0),l(v,null,p(s(t).audits,a=>{var c,m,y;return u(),l("tr",{key:a.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[i("td",Fo,[i("div",Ho,n(a.audit_number),1),i("div",Go,n((null==(c=a.auditor)?void 0:c.name)||"-"),1)]),i("td",Jo,n((null==(m=a.location)?void 0:m.name)||e.$t("common.all_locations")),1),i("td",Ko,n((y=a.audit_date,new Date(y).toLocaleDateString())),1),i("td",Wo,[i("span",{class:g(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",q(a.status)])},n(e.$t(`inventory.audit_status.${a.status}`)),3)]),i("td",Yo,[i("div",Qo,[i("div",Xo,[i("div",{class:"bg-primary-600 h-2 rounded-full",style:x({width:`${a.completion_percentage||0}%`})},null,4)]),i("span",Zo,n(Math.round(a.completion_percentage||0))+"% ",1)])]),i("td",es,[i("div",ts,n(a.items_with_variance_count||0)+" "+n(e.$t("inventory.items")),1),i("div",as,n(s(r)(a.total_variance_value||0)),1)]),i("td",rs,[i("div",ls,[i("button",{onClick:e=>(e=>{$.value=e,_.value=!0})(a),class:"text-primary-600 hover:text-primary-900 dark:text-primary-400 dark:hover:text-primary-300"},[o(s(L),{class:"h-4 w-4"})],8,is),"pending"===a.status?(u(),l("button",{key:0,onClick:e=>(async e=>{try{await t.startAudit(e.id),j()}catch(a){}})(a),class:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300"},[o(s(P),{class:"h-4 w-4"})],8,os)):d("",!0),"in_progress"===a.status?(u(),l("button",{key:1,onClick:e=>(async e=>{try{await t.completeAudit(e.id),j()}catch(a){}})(a),class:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300"},[o(s(B),{class:"h-4 w-4"})],8,ss)):d("",!0),["pending","in_progress"].includes(a.status)?(u(),l("button",{key:2,onClick:e=>(e=>{$.value=e,w.value=!0})(a),class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"},[o(s(D),{class:"h-4 w-4"})],8,ns)):d("",!0)])])])}),128))])])]))]),y.value?(u(),b(Yl,{key:0,onClose:a[5]||(a[5]=e=>y.value=!1),onCreated:I})):d("",!0),_.value?(u(),b(oo,{key:1,audit:$.value,onClose:a[6]||(a[6]=e=>_.value=!1),onUpdated:S},null,8,["audit"])):d("",!0),w.value?(u(),b(ce,{key:2,title:e.$t("inventory.delete_audit"),message:e.$t("inventory.delete_audit_confirmation",{number:null==(m=$.value)?void 0:m.audit_number}),loading:s(t).loading.deleting,onConfirm:V,onCancel:a[7]||(a[7]=e=>w.value=!1)},null,8,["title","message","loading"])):d("",!0)])}}}),cs={class:"fixed inset-0 z-50 overflow-y-auto"},us={class:"flex min-h-screen items-center justify-center p-4"},ms={class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full"},ys={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},gs={class:"flex items-center justify-between"},xs={class:"text-lg font-medium text-gray-900 dark:text-white"},vs={class:"space-y-4"},ps={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},bs={value:""},fs=["value"],ks={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},hs={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},_s={value:""},ws={value:"in"},$s={value:"out"},Cs={value:"transfer"},qs={value:"adjustment"},js={value:"wastage"},Vs={value:"production"},Is={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},Us={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Ss={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},Ls={key:0},zs={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Ds=["required"],Es={value:""},Ts=["value"],As={key:1},Ms={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Os=["required"],Ns={value:""},Rs=["value"],Ps={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Bs={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},Fs={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Hs=["placeholder"],Gs={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Js=["placeholder"],Ks={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},Ws={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Ys={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},Qs={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Xs=["placeholder"],Zs={class:"mt-6 flex justify-end space-x-3"},en=["disabled"],tn={key:0,class:"flex items-center"},an={key:1},rn=r({__name:"CreateMovementModal",emits:["close","created"],setup(e,{emit:t}){const r=t,y=Q(),x=a(!1),b=a({}),_=$({inventory_item_id:"",type:"",quantity:0,from_location_id:"",to_location_id:"",unit_cost:null,batch_number:"",reference_type:"",reference_id:null,movement_date:(new Date).toISOString().slice(0,16),notes:""}),w=()=>{_.from_location_id="",_.to_location_id=""},q=async()=>{var e,t;x.value=!0,b.value={};try{const e={..._,inventory_item_id:Number(_.inventory_item_id),from_location_id:_.from_location_id?Number(_.from_location_id):null,to_location_id:_.to_location_id?Number(_.to_location_id):null,unit_cost:_.unit_cost||null,reference_id:_.reference_id||null},t=await y.createMovement(e);r("created",t)}catch(a){(null==(t=null==(e=a.response)?void 0:e.data)?void 0:t.errors)&&(b.value=a.response.data.errors)}finally{x.value=!1}};return m(async()=>{0===y.items.length&&await y.fetchItems(),0===y.locations.length&&await y.fetchLocations()}),(e,t)=>(u(),l("div",cs,[i("div",us,[i("div",{class:"fixed inset-0 bg-black bg-opacity-25",onClick:t[0]||(t[0]=t=>e.$emit("close"))}),i("div",ms,[i("div",ys,[i("div",gs,[i("h3",xs,n(e.$t("inventory.add_movement")),1),i("button",{onClick:t[1]||(t[1]=t=>e.$emit("close")),class:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"},[o(s(R),{class:"h-6 w-6"})])])]),i("form",{onSubmit:C(q,["prevent"]),class:"p-6"},[i("div",vs,[i("div",null,[i("label",ps,n(e.$t("inventory.item"))+" * ",1),f(i("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>_.inventory_item_id=e),required:"",class:g(["block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",b.value.inventory_item_id?"border-red-300 focus:border-red-500 focus:ring-red-500":""])},[i("option",bs,n(e.$t("inventory.select_item")),1),(u(!0),l(v,null,p(s(y).items,e=>(u(),l("option",{key:e.id,value:e.id},n(e.localized_name||e.name)+" ("+n(e.sku)+") ",9,fs))),128))],2),[[h,_.inventory_item_id]]),b.value.inventory_item_id?(u(),l("p",ks,n(b.value.inventory_item_id[0]),1)):d("",!0)]),i("div",null,[i("label",hs,n(e.$t("inventory.movement_type"))+" * ",1),f(i("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>_.type=e),onChange:w,required:"",class:g(["block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",b.value.type?"border-red-300 focus:border-red-500 focus:ring-red-500":""])},[i("option",_s,n(e.$t("inventory.select_type")),1),i("option",ws,n(e.$t("inventory.movement_types.in")),1),i("option",$s,n(e.$t("inventory.movement_types.out")),1),i("option",Cs,n(e.$t("inventory.movement_types.transfer")),1),i("option",qs,n(e.$t("inventory.movement_types.adjustment")),1),i("option",js,n(e.$t("inventory.movement_types.wastage")),1),i("option",Vs,n(e.$t("inventory.movement_types.production")),1)],34),[[h,_.type]]),b.value.type?(u(),l("p",Is,n(b.value.type[0]),1)):d("",!0)]),i("div",null,[i("label",Us,n(e.$t("inventory.quantity"))+" * ",1),f(i("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>_.quantity=e),type:"number",step:"0.001",min:"0",required:"",class:g(["block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",b.value.quantity?"border-red-300 focus:border-red-500 focus:ring-red-500":""])},null,2),[[k,_.quantity,void 0,{number:!0}]]),b.value.quantity?(u(),l("p",Ss,n(b.value.quantity[0]),1)):d("",!0)]),["out","transfer"].includes(_.type)?(u(),l("div",Ls,[i("label",zs,n(e.$t("inventory.from_location"))+" * ",1),f(i("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>_.from_location_id=e),required:["out","transfer"].includes(_.type),class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[i("option",Es,n(e.$t("inventory.select_location")),1),(u(!0),l(v,null,p(s(y).locations,e=>(u(),l("option",{key:e.id,value:e.id},n(e.name),9,Ts))),128))],8,Ds),[[h,_.from_location_id]])])):d("",!0),["in","transfer"].includes(_.type)?(u(),l("div",As,[i("label",Ms,n(e.$t("inventory.to_location"))+" * ",1),f(i("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>_.to_location_id=e),required:["in","transfer"].includes(_.type),class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[i("option",Ns,n(e.$t("inventory.select_location")),1),(u(!0),l(v,null,p(s(y).locations,e=>(u(),l("option",{key:e.id,value:e.id},n(e.name),9,Rs))),128))],8,Os),[[h,_.to_location_id]])])):d("",!0),i("div",null,[i("label",Ps,n(e.$t("inventory.unit_cost")),1),f(i("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>_.unit_cost=e),type:"number",step:"0.01",min:"0",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[k,_.unit_cost,void 0,{number:!0}]]),i("p",Bs,n(e.$t("inventory.unit_cost_help")),1)]),i("div",null,[i("label",Fs,n(e.$t("inventory.batch_number")),1),f(i("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>_.batch_number=e),type:"text",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:e.$t("inventory.batch_number_placeholder")},null,8,Hs),[[k,_.batch_number]])]),i("div",null,[i("label",Gs,n(e.$t("inventory.reference")),1),f(i("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>_.reference_type=e),type:"text",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:e.$t("inventory.reference_placeholder")},null,8,Js),[[k,_.reference_type]]),i("p",Ks,n(e.$t("inventory.reference_help")),1)]),i("div",null,[i("label",Ws,n(e.$t("inventory.movement_date"))+" * ",1),f(i("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>_.movement_date=e),type:"datetime-local",required:"",class:g(["block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",b.value.movement_date?"border-red-300 focus:border-red-500 focus:ring-red-500":""])},null,2),[[k,_.movement_date]]),b.value.movement_date?(u(),l("p",Ys,n(b.value.movement_date[0]),1)):d("",!0)]),i("div",null,[i("label",Qs,n(e.$t("inventory.notes")),1),f(i("textarea",{"onUpdate:modelValue":t[11]||(t[11]=e=>_.notes=e),rows:"3",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:e.$t("inventory.movement_notes_placeholder")},null,8,Xs),[[k,_.notes]])])]),i("div",Zs,[i("button",{type:"button",onClick:t[12]||(t[12]=t=>e.$emit("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},n(e.$t("common.cancel")),1),i("button",{type:"submit",disabled:x.value,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed"},[x.value?(u(),l("span",tn,[t[13]||(t[13]=i("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},[i("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),i("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),c(" "+n(e.$t("common.creating")),1)])):(u(),l("span",an,n(e.$t("inventory.add_movement")),1))],8,en)])],32)])])]))}}),ln={class:"fixed inset-0 z-50 overflow-y-auto"},on={class:"flex min-h-screen items-center justify-center p-4"},sn={class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full"},nn={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},dn={class:"flex items-center justify-between"},cn={class:"text-lg font-medium text-gray-900 dark:text-white"},un={class:"text-sm text-gray-500 dark:text-gray-400"},mn={class:"flex items-center space-x-2"},yn={class:"p-6"},gn={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},xn={class:"space-y-4"},vn={class:"text-md font-medium text-gray-900 dark:text-white"},pn={class:"space-y-3"},bn={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},fn={class:"mt-1"},kn={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},hn={class:"mt-1 text-lg font-semibold text-gray-900 dark:text-white"},_n={key:0},wn={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},$n={class:"mt-1 text-sm text-gray-900 dark:text-white"},Cn={key:1},qn={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},jn={class:"mt-1 text-lg font-semibold text-blue-600 dark:text-blue-400"},Vn={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},In={class:"mt-1 text-sm text-gray-900 dark:text-white"},Un={class:"space-y-4"},Sn={class:"text-md font-medium text-gray-900 dark:text-white"},Ln={class:"space-y-3"},zn={key:0},Dn={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},En={class:"mt-1 text-sm text-gray-900 dark:text-white"},Tn={key:1},An={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Mn={class:"mt-1 text-sm text-gray-900 dark:text-white"},On={key:2},Nn={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Rn={class:"mt-1 text-sm text-gray-900 dark:text-white flex items-center"},Pn={class:"bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-xs"},Bn={class:"bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-xs"},Fn={class:"md:col-span-2 space-y-4"},Hn={class:"text-md font-medium text-gray-900 dark:text-white"},Gn={class:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4"},Jn={class:"flex items-center"},Kn={class:"flex-shrink-0 h-12 w-12"},Wn={class:"h-12 w-12 rounded-lg bg-gray-200 dark:bg-gray-600 flex items-center justify-center"},Yn={class:"ml-4 flex-1"},Qn={class:"text-sm font-medium text-gray-900 dark:text-white"},Xn={class:"text-sm text-gray-500 dark:text-gray-400"},Zn={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},ed={key:0,class:"md:col-span-2 space-y-4"},td={class:"text-md font-medium text-gray-900 dark:text-white"},ad={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},rd={key:0},ld={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},id={class:"mt-1 text-sm text-gray-900 dark:text-white font-mono"},od={key:1},sd={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},nd={class:"mt-1 text-sm text-gray-900 dark:text-white"},dd={key:0,class:"text-gray-500 dark:text-gray-400"},cd={key:2,class:"md:col-span-2"},ud={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},md={class:"mt-1 text-sm text-gray-900 dark:text-white"},yd={class:"md:col-span-2 space-y-4"},gd={class:"text-md font-medium text-gray-900 dark:text-white"},xd={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},vd={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},pd={class:"mt-1 text-sm text-gray-900 dark:text-white"},bd={key:0},fd={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},kd={class:"mt-1 text-sm text-gray-900 dark:text-white"},hd={class:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-end"},_d=r({__name:"MovementDetailsModal",props:{movement:{}},emits:["close"],setup(e){const{formatNumber:t,formatCurrency:a}=U(),r=e=>e?new Date(e).toLocaleString():"-",m=e=>{if(!e)return"";const t={in:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",out:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",transfer:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",adjustment:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",wastage:"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400",production:"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400"};return t[e]||t.adjustment};return(e,y)=>{var x,v,p,b,f,k,h,_,w,$,C,q,j,V,I,U,L,z,D,E,T,A,M,O,N,P,B,F,G,J,K,W,Y,Q,X,Z,ee;return u(),l("div",ln,[i("div",on,[i("div",{class:"fixed inset-0 bg-black bg-opacity-25",onClick:y[0]||(y[0]=t=>e.$emit("close"))}),i("div",sn,[i("div",nn,[i("div",dn,[i("div",null,[i("h3",cn,n(e.$t("inventory.movement_details")),1),i("p",un,n((null==(v=null==(x=e.movement)?void 0:x.inventory_item)?void 0:v.localized_name)||(null==(b=null==(p=e.movement)?void 0:p.inventory_item)?void 0:b.name)),1)]),i("div",mn,[i("span",{class:g(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",m(null==(f=e.movement)?void 0:f.type)])},n(e.$t(`inventory.movement_types.${null==(k=e.movement)?void 0:k.type}`)),3),i("button",{onClick:y[1]||(y[1]=t=>e.$emit("close")),class:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"},[o(s(R),{class:"h-6 w-6"})])])])]),i("div",yn,[i("div",gn,[i("div",xn,[i("h4",vn,n(e.$t("inventory.movement_information")),1),i("dl",pn,[i("div",null,[i("dt",bn,n(e.$t("inventory.movement_type")),1),i("dd",fn,[i("span",{class:g(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",m(null==(h=e.movement)?void 0:h.type)])},n(e.$t(`inventory.movement_types.${null==(_=e.movement)?void 0:_.type}`)),3)])]),i("div",null,[i("dt",kn,n(e.$t("inventory.quantity")),1),i("dd",hn,[i("span",{class:g([(null==(w=e.movement)?void 0:w.is_inbound)?"text-green-600 dark:text-green-400":(null==($=e.movement)?void 0:$.is_outbound)?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"])},n((null==(C=e.movement)?void 0:C.is_inbound)?"+":(null==(q=e.movement)?void 0:q.is_outbound)?"-":"")+n(s(t)((null==(j=e.movement)?void 0:j.quantity)||0)),3)])]),(null==(V=e.movement)?void 0:V.unit_cost)?(u(),l("div",_n,[i("dt",wn,n(e.$t("inventory.unit_cost")),1),i("dd",$n,n(s(a)(e.movement.unit_cost)),1)])):d("",!0),(null==(I=e.movement)?void 0:I.total_value)?(u(),l("div",Cn,[i("dt",qn,n(e.$t("inventory.total_value")),1),i("dd",jn,n(s(a)(e.movement.total_value)),1)])):d("",!0),i("div",null,[i("dt",Vn,n(e.$t("inventory.movement_date")),1),i("dd",In,n(r(null==(U=e.movement)?void 0:U.movement_date)),1)])])]),i("div",Un,[i("h4",Sn,n(e.$t("inventory.location_information")),1),i("dl",Ln,[(null==(L=e.movement)?void 0:L.from_location)?(u(),l("div",zn,[i("dt",Dn,n(e.$t("inventory.from_location")),1),i("dd",En,n(e.movement.from_location.name),1)])):d("",!0),(null==(z=e.movement)?void 0:z.to_location)?(u(),l("div",Tn,[i("dt",An,n(e.$t("inventory.to_location")),1),i("dd",Mn,n(e.movement.to_location.name),1)])):d("",!0),"transfer"===(null==(D=e.movement)?void 0:D.type)&&(null==(E=e.movement)?void 0:E.from_location)&&(null==(T=e.movement)?void 0:T.to_location)?(u(),l("div",On,[i("dt",Nn,n(e.$t("inventory.transfer_direction")),1),i("dd",Rn,[i("span",Pn,n(e.movement.from_location.name),1),o(s(H),{class:"h-4 w-4 mx-2 text-gray-400"}),i("span",Bn,n(e.movement.to_location.name),1)])])):d("",!0)])]),i("div",Fn,[i("h4",Hn,n(e.$t("inventory.item_information")),1),i("div",Gn,[i("div",Jn,[i("div",Kn,[i("div",Wn,[o(s(S),{class:"h-8 w-8 text-gray-400"})])]),i("div",Yn,[i("div",Qn,n((null==(M=null==(A=e.movement)?void 0:A.inventory_item)?void 0:M.localized_name)||(null==(N=null==(O=e.movement)?void 0:O.inventory_item)?void 0:N.name)),1),i("div",Xn,n(e.$t("inventory.sku"))+": "+n(null==(B=null==(P=e.movement)?void 0:P.inventory_item)?void 0:B.sku),1),(null==(G=null==(F=e.movement)?void 0:F.inventory_item)?void 0:G.category)?(u(),l("div",Zn,n(e.$t("inventory.category"))+": "+n(e.movement.inventory_item.category.name),1)):d("",!0)])])])]),(null==(J=e.movement)?void 0:J.batch_number)||(null==(K=e.movement)?void 0:K.reference_type)||(null==(W=e.movement)?void 0:W.notes)?(u(),l("div",ed,[i("h4",td,n(e.$t("inventory.additional_information")),1),i("dl",ad,[(null==(Y=e.movement)?void 0:Y.batch_number)?(u(),l("div",rd,[i("dt",ld,n(e.$t("inventory.batch_number")),1),i("dd",id,n(e.movement.batch_number),1)])):d("",!0),(null==(Q=e.movement)?void 0:Q.reference_type)?(u(),l("div",od,[i("dt",sd,n(e.$t("inventory.reference")),1),i("dd",nd,[c(n(e.movement.reference_type)+" ",1),e.movement.reference_id?(u(),l("span",dd," (#"+n(e.movement.reference_id)+") ",1)):d("",!0)])])):d("",!0),(null==(X=e.movement)?void 0:X.notes)?(u(),l("div",cd,[i("dt",ud,n(e.$t("inventory.notes")),1),i("dd",md,n(e.movement.notes),1)])):d("",!0)])])):d("",!0),i("div",yd,[i("h4",gd,n(e.$t("inventory.audit_information")),1),i("dl",xd,[i("div",null,[i("dt",vd,n(e.$t("common.created_at")),1),i("dd",pd,n(r(null==(Z=e.movement)?void 0:Z.created_at)),1)]),(null==(ee=e.movement)?void 0:ee.user)?(u(),l("div",bd,[i("dt",fd,n(e.$t("inventory.created_by")),1),i("dd",kd,n(e.movement.user.name),1)])):d("",!0)])])])]),i("div",hd,[i("button",{onClick:y[2]||(y[2]=t=>e.$emit("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},n(e.$t("common.close")),1)])])])])}}}),wd={class:"space-y-6"},$d={class:"sm:flex sm:items-center sm:justify-between"},Cd={class:"sm:flex-auto"},qd={class:"text-lg font-medium text-gray-900 dark:text-white"},jd={class:"mt-1 text-sm text-gray-700 dark:text-gray-300"},Vd={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},Id={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-4"},Ud={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Sd={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Ld=["placeholder"],zd={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Dd={value:""},Ed={value:"in"},Td={value:"out"},Ad={value:"transfer"},Md={value:"adjustment"},Od={value:"wastage"},Nd={value:"production"},Rd={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Pd={value:""},Bd=["value"],Fd={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Hd={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Gd={class:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg"},Jd={class:"text-sm font-medium text-green-600 dark:text-green-400"},Kd={class:"text-2xl font-bold text-green-900 dark:text-green-100"},Wd={class:"text-sm text-green-600 dark:text-green-400"},Yd={class:"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg"},Qd={class:"text-sm font-medium text-red-600 dark:text-red-400"},Xd={class:"text-2xl font-bold text-red-900 dark:text-red-100"},Zd={class:"text-sm text-red-600 dark:text-red-400"},ec={class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg"},tc={class:"text-sm font-medium text-blue-600 dark:text-blue-400"},ac={class:"text-2xl font-bold text-blue-900 dark:text-blue-100"},rc={class:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg"},lc={class:"text-sm font-medium text-yellow-600 dark:text-yellow-400"},ic={class:"text-2xl font-bold text-yellow-900 dark:text-yellow-100"},oc={class:"text-sm text-yellow-600 dark:text-yellow-400"},sc={class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden"},nc={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},dc={class:"text-lg font-medium text-gray-900 dark:text-white"},cc={key:0,class:"p-6"},uc={class:"animate-pulse space-y-4"},mc={key:1,class:"p-6 text-center"},yc={class:"mt-2 text-sm font-medium text-gray-900 dark:text-white"},gc={class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},xc={key:2,class:"overflow-x-auto"},vc={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},pc={class:"bg-gray-50 dark:bg-gray-900"},bc={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},fc={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},kc={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},hc={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},_c={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},wc={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},$c={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Cc={class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},qc={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},jc={class:"px-6 py-4 whitespace-nowrap"},Vc={class:"flex items-center"},Ic={class:"flex-shrink-0 h-10 w-10"},Uc={class:"h-10 w-10 rounded-lg bg-gray-200 dark:bg-gray-600 flex items-center justify-center"},Sc={class:"ml-4"},Lc={class:"text-sm font-medium text-gray-900 dark:text-white"},zc={class:"text-sm text-gray-500 dark:text-gray-400"},Dc={class:"px-6 py-4 whitespace-nowrap"},Ec={class:"px-6 py-4 whitespace-nowrap"},Tc={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Ac={key:0},Mc={class:"text-xs text-gray-500 dark:text-gray-400"},Oc={class:"text-xs text-gray-500 dark:text-gray-400"},Nc={key:1},Rc={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Pc={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Bc={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Fc={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Hc={class:"flex justify-end space-x-2"},Gc=["onClick"],Jc=r({__name:"MovementHistory",setup(t){const r=Q(),{formatNumber:y,formatCurrency:x}=U(),_=a(!1),w=a(!1),$=a(null),C=a({search:"",type:"",location_id:"",date_from:""}),q=e(()=>r.movements.filter(e=>e.is_inbound)),j=e(()=>r.movements.filter(e=>e.is_outbound)),V=e(()=>r.movements.filter(e=>e.is_transfer)),I=e(()=>r.movements.filter(e=>"adjustment"===e.type)),z=e(()=>q.value.reduce((e,t)=>e+(t.total_value||0),0)),D=e(()=>j.value.reduce((e,t)=>e+(t.total_value||0),0)),E=e(()=>I.value.reduce((e,t)=>e+(t.total_value||0),0)),T=e=>{const t={in:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",out:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",transfer:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",adjustment:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",wastage:"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400",production:"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400"};return t[e]||t.adjustment},M=((e,t)=>{let a;return function(...r){clearTimeout(a),a=setTimeout(()=>{clearTimeout(a),e(...r)},t)}})(()=>{O()},300),O=()=>{const e={...C.value};Object.keys(e).forEach(t=>{""===e[t]&&delete e[t]}),r.fetchMovements(e)},N=()=>{_.value=!1,O()};return m(()=>{O()}),(e,t)=>(u(),l("div",wd,[i("div",$d,[i("div",Cd,[i("h2",qd,n(e.$t("inventory.movement_history")),1),i("p",jd,n(e.$t("inventory.movement_history_description")),1)]),i("div",Vd,[i("button",{onClick:t[0]||(t[0]=e=>_.value=!0),type:"button",class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},[o(s(A),{class:"h-4 w-4 mr-2"}),c(" "+n(e.$t("inventory.add_movement")),1)])])]),i("div",Id,[i("div",Ud,[i("div",null,[i("label",Sd,n(e.$t("inventory.item")),1),f(i("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>C.value.search=e),onInput:t[2]||(t[2]=(...e)=>s(M)&&s(M)(...e)),type:"text",placeholder:e.$t("inventory.search_items"),class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,40,Ld),[[k,C.value.search]])]),i("div",null,[i("label",zd,n(e.$t("inventory.movement_type")),1),f(i("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>C.value.type=e),onChange:O,class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[i("option",Dd,n(e.$t("common.all_types")),1),i("option",Ed,n(e.$t("inventory.movement_types.in")),1),i("option",Td,n(e.$t("inventory.movement_types.out")),1),i("option",Ad,n(e.$t("inventory.movement_types.transfer")),1),i("option",Md,n(e.$t("inventory.movement_types.adjustment")),1),i("option",Od,n(e.$t("inventory.movement_types.wastage")),1),i("option",Nd,n(e.$t("inventory.movement_types.production")),1)],544),[[h,C.value.type]])]),i("div",null,[i("label",Rd,n(e.$t("inventory.location")),1),f(i("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>C.value.location_id=e),onChange:O,class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[i("option",Pd,n(e.$t("common.all_locations")),1),(u(!0),l(v,null,p(s(r).locations,e=>(u(),l("option",{key:e.id,value:e.id},n(e.name),9,Bd))),128))],544),[[h,C.value.location_id]])]),i("div",null,[i("label",Fd,n(e.$t("common.date_from")),1),f(i("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>C.value.date_from=e),onChange:O,type:"date",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,544),[[k,C.value.date_from]])])])]),i("div",Hd,[i("div",Gd,[i("div",Jd,n(e.$t("inventory.total_inbound")),1),i("div",Kd,n(q.value.length),1),i("div",Wd,n(s(x)(z.value)),1)]),i("div",Yd,[i("div",Qd,n(e.$t("inventory.total_outbound")),1),i("div",Xd,n(j.value.length),1),i("div",Zd,n(s(x)(D.value)),1)]),i("div",ec,[i("div",tc,n(e.$t("inventory.total_transfers")),1),i("div",ac,n(V.value.length),1)]),i("div",rc,[i("div",lc,n(e.$t("inventory.total_adjustments")),1),i("div",ic,n(I.value.length),1),i("div",oc,n(s(x)(E.value)),1)])]),i("div",sc,[i("div",nc,[i("h3",dc,n(e.$t("inventory.movements_list")),1)]),s(r).loading.movements?(u(),l("div",cc,[i("div",uc,[(u(),l(v,null,p(5,e=>i("div",{key:e,class:"h-16 bg-gray-200 dark:bg-gray-700 rounded"})),64))])])):0===s(r).movements.length?(u(),l("div",mc,[o(s(G),{class:"mx-auto h-12 w-12 text-gray-400"}),i("h3",yc,n(e.$t("inventory.no_movements")),1),i("p",gc,n(e.$t("inventory.no_movements_description")),1)])):(u(),l("div",xc,[i("table",vc,[i("thead",pc,[i("tr",null,[i("th",bc,n(e.$t("inventory.item")),1),i("th",fc,n(e.$t("inventory.movement_type")),1),i("th",kc,n(e.$t("inventory.quantity")),1),i("th",hc,n(e.$t("inventory.locations")),1),i("th",_c,n(e.$t("inventory.unit_cost")),1),i("th",wc,n(e.$t("inventory.total_value")),1),i("th",$c,n(e.$t("common.date")),1),i("th",Cc,n(e.$t("common.actions")),1)])]),i("tbody",qc,[(u(!0),l(v,null,p(s(r).movements,t=>{var a,r,d,c,m,v,p,b;return u(),l("tr",{key:t.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[i("td",jc,[i("div",Vc,[i("div",Ic,[i("div",Uc,[o(s(S),{class:"h-6 w-6 text-gray-400"})])]),i("div",Sc,[i("div",Lc,n((null==(a=t.inventory_item)?void 0:a.localized_name)||(null==(r=t.inventory_item)?void 0:r.name)),1),i("div",zc,n(null==(d=t.inventory_item)?void 0:d.sku),1)])])]),i("td",Dc,[i("span",{class:g(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",T(t.type)])},n(e.$t(`inventory.movement_types.${t.type}`)),3)]),i("td",Ec,[i("div",{class:g(["text-sm font-medium",t.is_inbound?"text-green-600 dark:text-green-400":t.is_outbound?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"])},n(t.is_inbound?"+":t.is_outbound?"-":"")+n(s(y)(t.quantity)),3)]),i("td",Tc,["transfer"===t.type?(u(),l("div",Ac,[i("div",Mc,n(e.$t("inventory.from"))+": "+n((null==(c=t.from_location)?void 0:c.name)||"-"),1),i("div",Oc,n(e.$t("inventory.to"))+": "+n((null==(m=t.to_location)?void 0:m.name)||"-"),1)])):(u(),l("div",Nc,n((null==(v=t.to_location)?void 0:v.name)||(null==(p=t.from_location)?void 0:p.name)||"-"),1))]),i("td",Rc,n(t.unit_cost?s(x)(t.unit_cost):"-"),1),i("td",Pc,n(t.total_value?s(x)(t.total_value):"-"),1),i("td",Bc,n((b=t.movement_date,new Date(b).toLocaleString())),1),i("td",Fc,[i("div",Hc,[i("button",{onClick:e=>(e=>{$.value=e,w.value=!0})(t),class:"text-primary-600 hover:text-primary-900 dark:text-primary-400 dark:hover:text-primary-300"},[o(s(L),{class:"h-4 w-4"})],8,Gc)])])])}),128))])])]))]),_.value?(u(),b(rn,{key:0,onClose:t[6]||(t[6]=e=>_.value=!1),onCreated:N})):d("",!0),w.value?(u(),b(_d,{key:1,movement:$.value,onClose:t[7]||(t[7]=e=>w.value=!1)},null,8,["movement"])):d("",!0)]))}}),Kc={class:"fixed inset-0 z-50 overflow-y-auto"},Wc={class:"flex min-h-screen items-center justify-center p-4"},Yc={class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full"},Qc={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},Xc={class:"flex items-center justify-between"},Zc={class:"text-lg font-medium text-gray-900 dark:text-white"},eu={class:"space-y-4"},tu={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},au={value:""},ru=["value"],lu={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},iu={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},ou={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},su={value:""},nu=["value"],du={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},cu={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},uu={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},mu={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},yu={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},gu={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},xu={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},vu={key:0,class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg"},pu={class:"text-sm font-medium text-blue-600 dark:text-blue-400 mb-2"},bu={class:"space-y-1 text-sm text-blue-900 dark:text-blue-100"},fu={class:"flex justify-between"},ku={class:"flex justify-between"},hu={class:"flex justify-between font-medium border-t border-blue-200 dark:border-blue-700 pt-1"},_u={key:0,class:"flex justify-between"},wu={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},$u=["placeholder"],Cu={class:"flex items-center"},qu={class:"ml-2 block text-sm text-gray-900 dark:text-white"},ju={class:"mt-6 flex justify-end space-x-3"},Vu=["disabled"],Iu={key:0,class:"flex items-center"},Uu={key:1},Su=r({__name:"BOMFormModal",props:{bom:{default:null},isEdit:{type:Boolean,default:!1}},emits:["close","saved"],setup(t,{emit:r}){const y=t,x=r,b=Q(),{formatNumber:_,formatCurrency:j}=U(),V=a(!1),I=a({}),S=$({finished_item_id:"",component_item_id:"",quantity_required:0,wastage_percentage:0,is_active:!0,notes:""}),L=e(()=>y.isEdit&&y.bom),z=e(()=>b.items.filter(e=>e.id!==Number(S.finished_item_id))),D=e(()=>S.quantity_required*S.wastage_percentage/100),E=e(()=>S.quantity_required+D.value),T=e(()=>b.items.find(e=>e.id===Number(S.component_item_id))),A=e(()=>T.value?E.value*(T.value.cost_price||0):0),M=async()=>{var e,t;V.value=!0,I.value={};try{const e={...S,finished_item_id:Number(S.finished_item_id),component_item_id:Number(S.component_item_id)};let t;L.value&&y.bom||(t=await b.createBOM(e)),t&&x("saved",t)}catch(a){(null==(t=null==(e=a.response)?void 0:e.data)?void 0:t.errors)&&(I.value=a.response.data.errors)}finally{V.value=!1}},O=()=>{var e,t;y.bom&&Object.assign(S,{finished_item_id:(null==(e=y.bom.finished_item_id)?void 0:e.toString())||"",component_item_id:(null==(t=y.bom.component_item_id)?void 0:t.toString())||"",quantity_required:y.bom.quantity_required||0,wastage_percentage:y.bom.wastage_percentage||0,is_active:y.bom.is_active??!0,notes:y.bom.notes||""})};return w(()=>y.bom,O,{immediate:!0}),w(()=>S.finished_item_id,()=>{S.component_item_id===S.finished_item_id&&(S.component_item_id="")}),m(async()=>{0===b.items.length&&await b.fetchItems(),O()}),(e,t)=>(u(),l("div",Kc,[i("div",Wc,[i("div",{class:"fixed inset-0 bg-black bg-opacity-25",onClick:t[0]||(t[0]=t=>e.$emit("close"))}),i("div",Yc,[i("div",Qc,[i("div",Xc,[i("h3",Zc,n(L.value?e.$t("inventory.edit_bom"):e.$t("inventory.create_bom")),1),i("button",{onClick:t[1]||(t[1]=t=>e.$emit("close")),class:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"},[o(s(R),{class:"h-6 w-6"})])])]),i("form",{onSubmit:C(M,["prevent"]),class:"p-6"},[i("div",eu,[i("div",null,[i("label",tu,n(e.$t("inventory.finished_item"))+" * ",1),f(i("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>S.finished_item_id=e),required:"",class:g(["block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",I.value.finished_item_id?"border-red-300 focus:border-red-500 focus:ring-red-500":""])},[i("option",au,n(e.$t("inventory.select_finished_item")),1),(u(!0),l(v,null,p(s(b).items,e=>(u(),l("option",{key:e.id,value:e.id},n(e.localized_name||e.name)+" ("+n(e.sku)+") ",9,ru))),128))],2),[[h,S.finished_item_id]]),I.value.finished_item_id?(u(),l("p",lu,n(I.value.finished_item_id[0]),1)):d("",!0),i("p",iu,n(e.$t("inventory.finished_item_help")),1)]),i("div",null,[i("label",ou,n(e.$t("inventory.component_item"))+" * ",1),f(i("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>S.component_item_id=e),required:"",class:g(["block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",I.value.component_item_id?"border-red-300 focus:border-red-500 focus:ring-red-500":""])},[i("option",su,n(e.$t("inventory.select_component_item")),1),(u(!0),l(v,null,p(z.value,e=>(u(),l("option",{key:e.id,value:e.id},n(e.localized_name||e.name)+" ("+n(e.sku)+") ",9,nu))),128))],2),[[h,S.component_item_id]]),I.value.component_item_id?(u(),l("p",du,n(I.value.component_item_id[0]),1)):d("",!0),i("p",cu,n(e.$t("inventory.component_item_help")),1)]),i("div",null,[i("label",uu,n(e.$t("inventory.quantity_required"))+" * ",1),f(i("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>S.quantity_required=e),type:"number",step:"0.001",min:"0",required:"",class:g(["block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",I.value.quantity_required?"border-red-300 focus:border-red-500 focus:ring-red-500":""])},null,2),[[k,S.quantity_required,void 0,{number:!0}]]),I.value.quantity_required?(u(),l("p",mu,n(I.value.quantity_required[0]),1)):d("",!0),i("p",yu,n(e.$t("inventory.quantity_required_help")),1)]),i("div",null,[i("label",gu,n(e.$t("inventory.wastage_percentage")),1),f(i("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>S.wastage_percentage=e),type:"number",step:"0.01",min:"0",max:"100",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[k,S.wastage_percentage,void 0,{number:!0}]]),i("p",xu,n(e.$t("inventory.wastage_percentage_help")),1)]),E.value>0?(u(),l("div",vu,[i("div",pu,n(e.$t("inventory.calculated_totals")),1),i("div",bu,[i("div",fu,[i("span",null,n(e.$t("inventory.base_quantity"))+":",1),i("span",null,n(s(_)(S.quantity_required)),1)]),i("div",ku,[i("span",null,n(e.$t("inventory.wastage"))+" ("+n(s(_)(S.wastage_percentage))+"%):",1),i("span",null,n(s(_)(D.value)),1)]),i("div",hu,[i("span",null,n(e.$t("inventory.total_required"))+":",1),i("span",null,n(s(_)(E.value)),1)]),A.value>0?(u(),l("div",_u,[i("span",null,n(e.$t("inventory.estimated_cost"))+":",1),i("span",null,n(s(j)(A.value)),1)])):d("",!0)])])):d("",!0),i("div",null,[i("label",wu,n(e.$t("inventory.notes")),1),f(i("textarea",{"onUpdate:modelValue":t[6]||(t[6]=e=>S.notes=e),rows:"3",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:e.$t("inventory.bom_notes_placeholder")},null,8,$u),[[k,S.notes]])]),i("div",Cu,[f(i("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>S.is_active=e),type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[q,S.is_active]]),i("label",qu,n(e.$t("inventory.is_active")),1)])]),i("div",ju,[i("button",{type:"button",onClick:t[8]||(t[8]=t=>e.$emit("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},n(e.$t("common.cancel")),1),i("button",{type:"submit",disabled:V.value,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed"},[V.value?(u(),l("span",Iu,[t[9]||(t[9]=i("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},[i("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),i("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),c(" "+n(e.$t("common.saving")),1)])):(u(),l("span",Uu,n(L.value?e.$t("common.update"):e.$t("common.create")),1))],8,Vu)])],32)])])]))}}),Lu={class:"fixed inset-0 z-50 overflow-y-auto"},zu={class:"flex min-h-screen items-center justify-center p-4"},Du={class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-3xl w-full"},Eu={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},Tu={class:"flex items-center justify-between"},Au={class:"text-lg font-medium text-gray-900 dark:text-white"},Mu={class:"text-sm text-gray-500 dark:text-gray-400"},Ou={class:"flex items-center space-x-2"},Nu={class:"p-6"},Ru={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Pu={class:"space-y-4"},Bu={class:"text-md font-medium text-gray-900 dark:text-white"},Fu={class:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4"},Hu={class:"flex items-center"},Gu={class:"flex-shrink-0 h-12 w-12"},Ju={class:"h-12 w-12 rounded-lg bg-blue-200 dark:bg-blue-800 flex items-center justify-center"},Ku={class:"ml-4 flex-1"},Wu={class:"text-sm font-medium text-blue-900 dark:text-blue-100"},Yu={class:"text-sm text-blue-700 dark:text-blue-300"},Qu={key:0,class:"text-sm text-blue-700 dark:text-blue-300"},Xu={class:"mt-4 grid grid-cols-2 gap-4"},Zu={class:"text-xs font-medium text-blue-600 dark:text-blue-400 uppercase"},em={class:"text-sm font-semibold text-blue-900 dark:text-blue-100"},tm={class:"text-xs font-medium text-blue-600 dark:text-blue-400 uppercase"},am={class:"text-sm font-semibold text-blue-900 dark:text-blue-100"},rm={class:"space-y-4"},lm={class:"text-md font-medium text-gray-900 dark:text-white"},im={class:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4"},om={class:"flex items-center"},sm={class:"flex-shrink-0 h-12 w-12"},nm={class:"h-12 w-12 rounded-lg bg-green-200 dark:bg-green-800 flex items-center justify-center"},dm={class:"ml-4 flex-1"},cm={class:"text-sm font-medium text-green-900 dark:text-green-100"},um={class:"text-sm text-green-700 dark:text-green-300"},mm={key:0,class:"text-sm text-green-700 dark:text-green-300"},ym={class:"mt-4 grid grid-cols-2 gap-4"},gm={class:"text-xs font-medium text-green-600 dark:text-green-400 uppercase"},xm={class:"text-sm font-semibold text-green-900 dark:text-green-100"},vm={class:"text-xs font-medium text-green-600 dark:text-green-400 uppercase"},pm={class:"text-sm font-semibold text-green-900 dark:text-green-100"},bm={class:"lg:col-span-2 space-y-4"},fm={class:"text-md font-medium text-gray-900 dark:text-white"},km={class:"bg-gray-50 dark:bg-gray-900 rounded-lg p-6"},hm={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},_m={class:"text-center"},wm={class:"text-2xl font-bold text-gray-900 dark:text-white"},$m={class:"text-sm text-gray-500 dark:text-gray-400"},Cm={class:"text-center"},qm={class:"text-2xl font-bold text-yellow-600 dark:text-yellow-400"},jm={class:"text-sm text-gray-500 dark:text-gray-400"},Vm={class:"text-center"},Im={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},Um={class:"text-sm text-gray-500 dark:text-gray-400"},Sm={class:"text-center"},Lm={class:"text-2xl font-bold text-green-600 dark:text-green-400"},zm={class:"text-sm text-gray-500 dark:text-gray-400"},Dm={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},Em={class:"text-sm font-medium text-gray-900 dark:text-white mb-3"},Tm={class:"space-y-2 text-sm"},Am={class:"flex justify-between"},Mm={class:"text-gray-600 dark:text-gray-400"},Om={class:"text-gray-900 dark:text-white"},Nm={class:"flex justify-between"},Rm={class:"text-gray-600 dark:text-gray-400"},Pm={class:"text-gray-900 dark:text-white"},Bm={class:"flex justify-between font-medium border-t border-gray-200 dark:border-gray-700 pt-2"},Fm={class:"text-gray-900 dark:text-white"},Hm={class:"text-gray-900 dark:text-white"},Gm={class:"flex justify-between"},Jm={class:"text-gray-600 dark:text-gray-400"},Km={class:"text-gray-900 dark:text-white"},Wm={class:"flex justify-between font-medium border-t border-gray-200 dark:border-gray-700 pt-2"},Ym={class:"text-gray-900 dark:text-white"},Qm={class:"text-green-600 dark:text-green-400 font-semibold"},Xm={class:"lg:col-span-2 space-y-4"},Zm={class:"text-md font-medium text-gray-900 dark:text-white"},ey={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ty={class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg"},ay={class:"text-sm font-medium text-blue-600 dark:text-blue-400 mb-2"},ry={class:"text-2xl font-bold text-blue-900 dark:text-blue-100"},ly={class:"text-sm text-blue-700 dark:text-blue-300"},iy={key:0,class:"lg:col-span-2 space-y-4"},oy={class:"text-md font-medium text-gray-900 dark:text-white"},sy={class:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4"},ny={class:"space-y-3"},dy={key:0},cy={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},uy={class:"mt-1 text-sm text-gray-900 dark:text-white"},my={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},yy={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},gy={class:"mt-1"},xy={key:0},vy={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},py={class:"mt-1 text-sm text-gray-900 dark:text-white"},by=r({__name:"BOMDetailsModal",props:{bom:{}},emits:["close","edit","delete"],setup(t){const a=t,{t:r}=K(),{formatNumber:m,formatCurrency:y}=U(),x=e(()=>a.bom?a.bom.quantity_required*a.bom.wastage_percentage/100:0),v=e(()=>{var e,t,r;return(null==(t=null==(e=a.bom)?void 0:e.component_item)?void 0:t.quantity)&&(null==(r=a.bom)?void 0:r.total_quantity_required)?Math.floor(a.bom.component_item.quantity/a.bom.total_quantity_required):0}),p=e(()=>{var e,t,r;const l=(null==(t=null==(e=a.bom)?void 0:e.component_item)?void 0:t.quantity)||0,i=(null==(r=a.bom)?void 0:r.total_quantity_required)||0;return l>=10*i?"sufficient":l>=i?"low":"insufficient"}),b=e(()=>{var e,t,l;const i=(null==(t=null==(e=a.bom)?void 0:e.component_item)?void 0:t.quantity)||0,o=(null==(l=a.bom)?void 0:l.total_quantity_required)||0;if("sufficient"===p.value)return r("inventory.sufficient_stock_message",{quantity:m(i)});if("low"===p.value)return r("inventory.low_stock_message",{quantity:m(i)});return r("inventory.insufficient_stock_message",{shortage:m(o-i)})});return(e,t)=>{var a,r,f,k,h,_,w,$,C,q,j,V,I,U,L,E,T,A,M,O,N,P,B,F,H,G,J,K,W,Y,Q,X,Z,ee,te,ae,re,le,ie,oe,se,ne,de,ce,ue;return u(),l("div",Lu,[i("div",zu,[i("div",{class:"fixed inset-0 bg-black bg-opacity-25",onClick:t[0]||(t[0]=t=>e.$emit("close"))}),i("div",Du,[i("div",Eu,[i("div",Tu,[i("div",null,[i("h3",Au,n(e.$t("inventory.bom_details")),1),i("p",Mu,n((null==(r=null==(a=e.bom)?void 0:a.finished_item)?void 0:r.localized_name)||(null==(k=null==(f=e.bom)?void 0:f.finished_item)?void 0:k.name)),1)]),i("div",Ou,[i("button",{onClick:t[1]||(t[1]=t=>e.bom&&e.$emit("edit",e.bom)),class:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[o(s(z),{class:"h-4 w-4 mr-2"}),c(" "+n(e.$t("common.edit")),1)]),i("button",{onClick:t[2]||(t[2]=t=>e.bom&&e.$emit("delete",e.bom)),class:"inline-flex items-center px-3 py-2 border border-red-300 shadow-sm text-sm leading-4 font-medium rounded-md text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},[o(s(D),{class:"h-4 w-4 mr-2"}),c(" "+n(e.$t("common.delete")),1)]),i("button",{onClick:t[3]||(t[3]=t=>e.$emit("close")),class:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"},[o(s(R),{class:"h-6 w-6"})])])])]),i("div",Nu,[i("div",Ru,[i("div",Pu,[i("h4",Bu,n(e.$t("inventory.finished_item")),1),i("div",Fu,[i("div",Hu,[i("div",Gu,[i("div",Ju,[o(s(S),{class:"h-8 w-8 text-blue-600 dark:text-blue-400"})])]),i("div",Ku,[i("div",Wu,n((null==(_=null==(h=e.bom)?void 0:h.finished_item)?void 0:_.localized_name)||(null==($=null==(w=e.bom)?void 0:w.finished_item)?void 0:$.name)),1),i("div",Yu,n(e.$t("inventory.sku"))+": "+n(null==(q=null==(C=e.bom)?void 0:C.finished_item)?void 0:q.sku),1),(null==(V=null==(j=e.bom)?void 0:j.finished_item)?void 0:V.category)?(u(),l("div",Qu,n(e.$t("inventory.category"))+": "+n(e.bom.finished_item.category.name),1)):d("",!0)])]),i("div",Xu,[i("div",null,[i("div",Zu,n(e.$t("inventory.unit_price")),1),i("div",em,n(s(y)((null==(U=null==(I=e.bom)?void 0:I.finished_item)?void 0:U.unit_price)||0)),1)]),i("div",null,[i("div",tm,n(e.$t("inventory.current_stock")),1),i("div",am,n(s(m)((null==(E=null==(L=e.bom)?void 0:L.finished_item)?void 0:E.quantity)||0)),1)])])])]),i("div",rm,[i("h4",lm,n(e.$t("inventory.component_item")),1),i("div",im,[i("div",om,[i("div",sm,[i("div",nm,[o(s(S),{class:"h-8 w-8 text-green-600 dark:text-green-400"})])]),i("div",dm,[i("div",cm,n((null==(A=null==(T=e.bom)?void 0:T.component_item)?void 0:A.localized_name)||(null==(O=null==(M=e.bom)?void 0:M.component_item)?void 0:O.name)),1),i("div",um,n(e.$t("inventory.sku"))+": "+n(null==(P=null==(N=e.bom)?void 0:N.component_item)?void 0:P.sku),1),(null==(F=null==(B=e.bom)?void 0:B.component_item)?void 0:F.category)?(u(),l("div",mm,n(e.$t("inventory.category"))+": "+n(e.bom.component_item.category.name),1)):d("",!0)])]),i("div",ym,[i("div",null,[i("div",gm,n(e.$t("inventory.cost_price")),1),i("div",xm,n(s(y)((null==(G=null==(H=e.bom)?void 0:H.component_item)?void 0:G.cost_price)||0)),1)]),i("div",null,[i("div",vm,n(e.$t("inventory.available_stock")),1),i("div",pm,n(s(m)((null==(K=null==(J=e.bom)?void 0:J.component_item)?void 0:K.quantity)||0)),1)])])])]),i("div",bm,[i("h4",fm,n(e.$t("inventory.bom_calculations")),1),i("div",km,[i("div",hm,[i("div",_m,[i("div",wm,n(s(m)((null==(W=e.bom)?void 0:W.quantity_required)||0)),1),i("div",$m,n(e.$t("inventory.base_quantity")),1)]),i("div",Cm,[i("div",qm,n(s(m)((null==(Y=e.bom)?void 0:Y.wastage_percentage)||0))+"% ",1),i("div",jm,n(e.$t("inventory.wastage_percentage")),1)]),i("div",Vm,[i("div",Im,n(s(m)((null==(Q=e.bom)?void 0:Q.total_quantity_required)||0)),1),i("div",Um,n(e.$t("inventory.total_required")),1)]),i("div",Sm,[i("div",Lm,n(s(y)((null==(X=e.bom)?void 0:X.total_cost)||0)),1),i("div",zm,n(e.$t("inventory.total_cost")),1)])]),i("div",Dm,[i("h5",Em,n(e.$t("inventory.calculation_breakdown")),1),i("div",Tm,[i("div",Am,[i("span",Mm,n(e.$t("inventory.base_quantity"))+": ",1),i("span",Om,n(s(m)((null==(Z=e.bom)?void 0:Z.quantity_required)||0)),1)]),i("div",Nm,[i("span",Rm,n(e.$t("inventory.wastage"))+" ("+n(s(m)((null==(ee=e.bom)?void 0:ee.wastage_percentage)||0))+"%): ",1),i("span",Pm,n(s(m)(x.value)),1)]),i("div",Bm,[i("span",Fm,n(e.$t("inventory.total_required"))+": ",1),i("span",Hm,n(s(m)((null==(te=e.bom)?void 0:te.total_quantity_required)||0)),1)]),i("div",Gm,[i("span",Jm,n(e.$t("inventory.unit_cost"))+": ",1),i("span",Km,n(s(y)((null==(re=null==(ae=e.bom)?void 0:ae.component_item)?void 0:re.cost_price)||0)),1)]),i("div",Wm,[i("span",Ym,n(e.$t("inventory.total_cost"))+": ",1),i("span",Qm,n(s(y)((null==(le=e.bom)?void 0:le.total_cost)||0)),1)])])])])]),i("div",Xm,[i("h4",Zm,n(e.$t("inventory.production_analysis")),1),i("div",ey,[i("div",ty,[i("div",ay,n(e.$t("inventory.possible_production")),1),i("div",ry,n(v.value),1),i("div",ly,n(e.$t("inventory.units_can_produce")),1)]),i("div",{class:g(["p-4 rounded-lg","sufficient"===p.value?"bg-green-50 dark:bg-green-900/20":"low"===p.value?"bg-yellow-50 dark:bg-yellow-900/20":"bg-red-50 dark:bg-red-900/20"])},[i("div",{class:g(["text-sm font-medium mb-2","sufficient"===p.value?"text-green-600 dark:text-green-400":"low"===p.value?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"])},n(e.$t("inventory.stock_status")),3),i("div",{class:g(["text-lg font-bold","sufficient"===p.value?"text-green-900 dark:text-green-100":"low"===p.value?"text-yellow-900 dark:text-yellow-100":"text-red-900 dark:text-red-100"])},n(e.$t(`inventory.stock_status_${p.value}`)),3),i("div",{class:g(["text-sm","sufficient"===p.value?"text-green-700 dark:text-green-300":"low"===p.value?"text-yellow-700 dark:text-yellow-300":"text-red-700 dark:text-red-300"])},n(b.value),3)],2)])]),(null==(ie=e.bom)?void 0:ie.notes)||(null==(oe=e.bom)?void 0:oe.created_at)?(u(),l("div",iy,[i("h4",oy,n(e.$t("inventory.additional_information")),1),i("div",sy,[i("dl",ny,[(null==(se=e.bom)?void 0:se.notes)?(u(),l("div",dy,[i("dt",cy,n(e.$t("inventory.notes")),1),i("dd",uy,n(e.bom.notes),1)])):d("",!0),i("div",my,[i("div",null,[i("dt",yy,n(e.$t("common.status")),1),i("dd",gy,[i("span",{class:g(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",(null==(ne=e.bom)?void 0:ne.is_active)?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"])},n((null==(de=e.bom)?void 0:de.is_active)?e.$t("common.active"):e.$t("common.inactive")),3)])]),(null==(ce=e.bom)?void 0:ce.created_at)?(u(),l("div",xy,[i("dt",vy,n(e.$t("common.created_at")),1),i("dd",py,n((ue=e.bom.created_at,new Date(ue).toLocaleString())),1)])):d("",!0)])])])])):d("",!0)])])])])])}}}),fy={class:"space-y-6"},ky={class:"sm:flex sm:items-center sm:justify-between"},hy={class:"sm:flex-auto"},_y={class:"text-lg font-medium text-gray-900 dark:text-white"},wy={class:"mt-1 text-sm text-gray-700 dark:text-gray-300"},$y={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},Cy={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-4"},qy={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},jy={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Vy=["placeholder"],Iy={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Uy={value:""},Sy={value:"1"},Ly={value:"0"},zy={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Dy={value:""},Ey=["value"],Ty={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Ay={class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg"},My={class:"text-sm font-medium text-blue-600 dark:text-blue-400"},Oy={class:"text-2xl font-bold text-blue-900 dark:text-blue-100"},Ny={class:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg"},Ry={class:"text-sm font-medium text-green-600 dark:text-green-400"},Py={class:"text-2xl font-bold text-green-900 dark:text-green-100"},By={class:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg"},Fy={class:"text-sm font-medium text-yellow-600 dark:text-yellow-400"},Hy={class:"text-2xl font-bold text-yellow-900 dark:text-yellow-100"},Gy={class:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg"},Jy={class:"text-sm font-medium text-purple-600 dark:text-purple-400"},Ky={class:"text-2xl font-bold text-purple-900 dark:text-purple-100"},Wy={class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden"},Yy={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},Qy={class:"text-lg font-medium text-gray-900 dark:text-white"},Xy={key:0,class:"p-6"},Zy={class:"animate-pulse space-y-4"},eg={key:1,class:"p-6 text-center"},tg={class:"mt-2 text-sm font-medium text-gray-900 dark:text-white"},ag={class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},rg={class:"mt-6"},lg={key:2,class:"overflow-x-auto"},ig={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},og={class:"bg-gray-50 dark:bg-gray-900"},sg={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},ng={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},dg={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},cg={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},ug={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},mg={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},yg={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},gg={class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},xg={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},vg={class:"px-6 py-4 whitespace-nowrap"},pg={class:"flex items-center"},bg={class:"flex-shrink-0 h-10 w-10"},fg={class:"h-10 w-10 rounded-lg bg-blue-100 dark:bg-blue-900/20 flex items-center justify-center"},kg={class:"ml-4"},hg={class:"text-sm font-medium text-gray-900 dark:text-white"},_g={class:"text-sm text-gray-500 dark:text-gray-400"},wg={class:"px-6 py-4 whitespace-nowrap"},$g={class:"flex items-center"},Cg={class:"flex-shrink-0 h-8 w-8"},qg={class:"h-8 w-8 rounded-lg bg-green-100 dark:bg-green-900/20 flex items-center justify-center"},jg={class:"ml-3"},Vg={class:"text-sm font-medium text-gray-900 dark:text-white"},Ig={class:"text-sm text-gray-500 dark:text-gray-400"},Ug={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Sg={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Lg={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},zg={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Dg={class:"px-6 py-4 whitespace-nowrap"},Eg={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Tg={class:"flex justify-end space-x-2"},Ag=["onClick"],Mg=["onClick"],Og=["onClick"],Ng=r({__name:"BOMManagement",setup(t){const r=Q(),{formatNumber:y,formatCurrency:x}=U(),_=a(!1),w=a(!1),$=a(!1),C=a(!1),q=a(null),j=a({search:"",is_active:"",category_id:""}),V=e(()=>r.boms.filter(e=>e.is_active)),I=e(()=>{const e=new Set;return r.boms.forEach(t=>{t.finished_item_id&&e.add(t.finished_item_id)}),Array.from(e)}),E=e(()=>{const e=new Set;return r.boms.forEach(t=>{t.component_item_id&&e.add(t.component_item_id)}),Array.from(e)}),T=((e,t)=>{let a;return function(...r){clearTimeout(a),a=setTimeout(()=>{clearTimeout(a),e(...r)},t)}})(()=>{M()},300),M=()=>{const e={...j.value};Object.keys(e).forEach(t=>{""===e[t]&&delete e[t]}),r.fetchBOMs(e)},O=e=>{q.value=e,w.value=!0,$.value=!1},N=e=>{q.value=e,C.value=!0,$.value=!1},R=async()=>{if(q.value)try{C.value=!1,q.value=null,M()}catch(e){}},P=()=>{_.value=!1,w.value=!1,q.value=null},B=()=>{P(),M()};return m(()=>{M()}),(e,t)=>(u(),l("div",fy,[i("div",ky,[i("div",hy,[i("h2",_y,n(e.$t("inventory.bom_management")),1),i("p",wy,n(e.$t("inventory.bom_description")),1)]),i("div",$y,[i("button",{onClick:t[0]||(t[0]=e=>_.value=!0),type:"button",class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},[o(s(A),{class:"h-4 w-4 mr-2"}),c(" "+n(e.$t("inventory.create_bom")),1)])])]),i("div",Cy,[i("div",qy,[i("div",null,[i("label",jy,n(e.$t("inventory.finished_item")),1),f(i("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>j.value.search=e),onInput:t[2]||(t[2]=(...e)=>s(T)&&s(T)(...e)),type:"text",placeholder:e.$t("inventory.search_finished_items"),class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,40,Vy),[[k,j.value.search]])]),i("div",null,[i("label",Iy,n(e.$t("common.status")),1),f(i("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>j.value.is_active=e),onChange:M,class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[i("option",Uy,n(e.$t("common.all_statuses")),1),i("option",Sy,n(e.$t("common.active")),1),i("option",Ly,n(e.$t("common.inactive")),1)],544),[[h,j.value.is_active]])]),i("div",null,[i("label",zy,n(e.$t("inventory.category")),1),f(i("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>j.value.category_id=e),onChange:M,class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[i("option",Dy,n(e.$t("common.all_categories")),1),(u(!0),l(v,null,p(s(r).categories,e=>(u(),l("option",{key:e.id,value:e.id},n(e.name),9,Ey))),128))],544),[[h,j.value.category_id]])])])]),i("div",Ty,[i("div",Ay,[i("div",My,n(e.$t("inventory.total_boms")),1),i("div",Oy,n(s(r).boms.length),1)]),i("div",Ny,[i("div",Ry,n(e.$t("inventory.active_boms")),1),i("div",Py,n(V.value.length),1)]),i("div",By,[i("div",Fy,n(e.$t("inventory.finished_items")),1),i("div",Hy,n(I.value.length),1)]),i("div",Gy,[i("div",Jy,n(e.$t("inventory.component_items")),1),i("div",Ky,n(E.value.length),1)])]),i("div",Wy,[i("div",Yy,[i("h3",Qy,n(e.$t("inventory.bom_list")),1)]),s(r).loading.boms?(u(),l("div",Xy,[i("div",Zy,[(u(),l(v,null,p(5,e=>i("div",{key:e,class:"h-16 bg-gray-200 dark:bg-gray-700 rounded"})),64))])])):0===s(r).boms.length?(u(),l("div",eg,[o(s(J),{class:"mx-auto h-12 w-12 text-gray-400"}),i("h3",tg,n(e.$t("inventory.no_boms")),1),i("p",ag,n(e.$t("inventory.no_boms_description")),1),i("div",rg,[i("button",{onClick:t[5]||(t[5]=e=>_.value=!0),type:"button",class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[o(s(A),{class:"h-4 w-4 mr-2"}),c(" "+n(e.$t("inventory.create_first_bom")),1)])])])):(u(),l("div",lg,[i("table",ig,[i("thead",og,[i("tr",null,[i("th",sg,n(e.$t("inventory.finished_item")),1),i("th",ng,n(e.$t("inventory.component_item")),1),i("th",dg,n(e.$t("inventory.quantity_required")),1),i("th",cg,n(e.$t("inventory.wastage_percentage")),1),i("th",ug,n(e.$t("inventory.total_required")),1),i("th",mg,n(e.$t("inventory.total_cost")),1),i("th",yg,n(e.$t("common.status")),1),i("th",gg,n(e.$t("common.actions")),1)])]),i("tbody",xg,[(u(!0),l(v,null,p(s(r).boms,t=>{var a,r,d,c,m,v;return u(),l("tr",{key:t.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[i("td",vg,[i("div",pg,[i("div",bg,[i("div",fg,[o(s(S),{class:"h-6 w-6 text-blue-600 dark:text-blue-400"})])]),i("div",kg,[i("div",hg,n((null==(a=t.finished_item)?void 0:a.localized_name)||(null==(r=t.finished_item)?void 0:r.name)),1),i("div",_g,n(null==(d=t.finished_item)?void 0:d.sku),1)])])]),i("td",wg,[i("div",$g,[i("div",Cg,[i("div",qg,[o(s(S),{class:"h-4 w-4 text-green-600 dark:text-green-400"})])]),i("div",jg,[i("div",Vg,n((null==(c=t.component_item)?void 0:c.localized_name)||(null==(m=t.component_item)?void 0:m.name)),1),i("div",Ig,n(null==(v=t.component_item)?void 0:v.sku),1)])])]),i("td",Ug,n(s(y)(t.quantity_required)),1),i("td",Sg,n(s(y)(t.wastage_percentage))+"% ",1),i("td",Lg,n(s(y)(t.total_quantity_required||0)),1),i("td",zg,n(s(x)(t.total_cost||0)),1),i("td",Dg,[i("span",{class:g(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",t.is_active?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"])},n(t.is_active?e.$t("common.active"):e.$t("common.inactive")),3)]),i("td",Eg,[i("div",Tg,[i("button",{onClick:e=>(e=>{q.value=e,$.value=!0})(t),class:"text-primary-600 hover:text-primary-900 dark:text-primary-400 dark:hover:text-primary-300"},[o(s(L),{class:"h-4 w-4"})],8,Ag),i("button",{onClick:e=>O(t),class:"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300"},[o(s(z),{class:"h-4 w-4"})],8,Mg),i("button",{onClick:e=>N(t),class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"},[o(s(D),{class:"h-4 w-4"})],8,Og)])])])}),128))])])]))]),_.value||w.value?(u(),b(Su,{key:0,bom:q.value,"is-edit":w.value,onClose:P,onSaved:B},null,8,["bom","is-edit"])):d("",!0),$.value?(u(),b(by,{key:1,bom:q.value,onClose:t[6]||(t[6]=e=>$.value=!1),onEdit:O,onDelete:N},null,8,["bom"])):d("",!0),C.value?(u(),b(ce,{key:2,title:e.$t("inventory.delete_bom"),message:e.$t("inventory.delete_bom_confirmation"),loading:s(r).loading.deleting,onConfirm:R,onCancel:t[7]||(t[7]=e=>C.value=!1)},null,8,["title","message","loading"])):d("",!0)]))}}),Rg={class:"fixed inset-0 z-50 overflow-y-auto"},Pg={class:"flex min-h-screen items-center justify-center p-4"},Bg={class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto"},Fg={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},Hg={class:"flex items-center justify-between"},Gg={class:"text-lg font-medium text-gray-900 dark:text-white"},Jg={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Kg={class:"md:col-span-2"},Wg={class:"text-md font-medium text-gray-900 dark:text-white mb-4"},Yg={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Qg=["placeholder"],Xg={key:0,class:"mt-1 text-xs text-blue-600 dark:text-blue-400"},Zg={key:1,class:"mt-1 text-sm text-red-600 dark:text-red-400"},ex={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},tx=["placeholder"],ax={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},rx=["placeholder"],lx={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},ix={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},ox={value:""},sx=["value"],nx={key:0},dx={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},cx=["disabled"],ux={value:""},mx=["value"],yx={key:0},gx={key:0,class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},xx={key:1,class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},vx={class:"md:col-span-2"},px={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},bx=["placeholder"],fx={class:"md:col-span-2"},kx={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},hx=["placeholder"],_x={key:0,class:"md:col-span-2"},wx={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},$x={class:"px-3 py-2 bg-gray-50 dark:bg-gray-700 rounded-md border border-gray-300 dark:border-gray-600"},Cx={class:"text-sm text-gray-900 dark:text-white"},qx={class:"md:col-span-2"},jx={class:"text-md font-medium text-gray-900 dark:text-white mb-4 mt-6"},Vx={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Ix={value:""},Ux=["value"],Sx={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Lx={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},zx={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Dx={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Ex={class:"md:col-span-2"},Tx={class:"text-md font-medium text-gray-900 dark:text-white mb-4 mt-6"},Ax={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Mx=["placeholder"],Ox={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},Nx={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Rx=["placeholder"],Px={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},Bx={class:"md:col-span-2"},Fx={class:"text-md font-medium text-gray-900 dark:text-white mb-4 mt-6"},Hx={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Gx=["placeholder"],Jx={key:0,class:"mt-1 text-xs text-blue-600 dark:text-blue-400"},Kx={key:1,class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},Wx={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Yx={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},Qx={class:"md:col-span-2"},Xx={class:"text-md font-medium text-gray-900 dark:text-white mb-4 mt-6"},Zx={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},ev=["placeholder"],tv={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},av=["placeholder"],rv={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},lv={class:"flex items-center"},iv={class:"ml-2 block text-sm text-gray-900 dark:text-white"},ov={class:"flex items-center"},sv={class:"ml-2 block text-sm text-gray-900 dark:text-white"},nv={class:"flex items-center"},dv={class:"ml-2 block text-sm text-gray-900 dark:text-white"},cv={class:"md:col-span-2"},uv={class:"text-md font-medium text-gray-900 dark:text-white mb-4 mt-6"},mv={class:"mt-2"},yv={class:"flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md dark:border-gray-600"},gv={class:"space-y-1 text-center"},xv={class:"flex text-sm text-gray-600 dark:text-gray-400"},vv={class:"relative cursor-pointer bg-white dark:bg-gray-800 rounded-md font-medium text-primary-600 hover:text-primary-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-primary-500"},pv={class:"pl-1"},bv={class:"text-xs text-gray-500 dark:text-gray-400"},fv={key:0,class:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4"},kv=["src","alt"],hv=["onClick"],_v={class:"mt-8 flex justify-end space-x-3"},wv=["disabled"],$v={key:0,class:"flex items-center"},Cv={key:1},qv=r({__name:"ItemFormModal",props:{item:{default:null},isEdit:{type:Boolean,default:!1}},emits:["close","saved"],setup(t,{emit:r}){const y=t,x=r,b=Q(),_=a(!1),j=a({}),V=a(),I=a([]),U=a([]),S=$({name:"",name_persian:"",description:"",description_persian:"",sku:"",category_id:"",main_category_id:"",location_id:"",quantity:0,unit_price:null,cost_price:null,gold_purity:null,weight:null,serial_number:"",batch_number:"",expiry_date:"",minimum_stock:null,maximum_stock:null,is_active:!0,track_serial:!1,track_batch:!1}),L=e(()=>y.isEdit&&y.item),z=e(()=>b.categories.filter(e=>!e.parent_id)),D=e(()=>S.main_category_id?b.categories.filter(e=>e.parent_id===parseInt(S.main_category_id)):[]),E=e(()=>S.category_id?b.categories.find(e=>e.id===parseInt(S.category_id)):S.main_category_id?b.categories.find(e=>e.id===parseInt(S.main_category_id)):null),T=e(()=>S.category_id?b.categories.find(e=>e.id===parseInt(S.category_id)):null),A=e(()=>{const e=[];if(S.main_category_id){const t=b.categories.find(e=>e.id===parseInt(S.main_category_id));t&&e.push(t.localized_name||t.name)}if(S.category_id&&S.category_id!==S.main_category_id){const t=b.categories.find(e=>e.id===parseInt(S.category_id));t&&e.push(t.localized_name||t.name)}return e.join(" > ")}),M=e=>{const t=e.target.files;t&&Array.from(t).forEach(e=>{if(e.type.startsWith("image/")){I.value.push(e);const t=new FileReader;t.onload=e=>{var t;(null==(t=e.target)?void 0:t.result)&&U.value.push(e.target.result)},t.readAsDataURL(e)}})},N=()=>{S.category_id="";const e=b.categories.find(e=>e.id===parseInt(S.main_category_id));(null==e?void 0:e.default_gold_purity)&&!S.gold_purity&&(S.gold_purity=e.default_gold_purity)},P=()=>{const e=b.categories.find(e=>e.id===parseInt(S.category_id));(null==e?void 0:e.default_gold_purity)&&(S.gold_purity=e.default_gold_purity),!S.name&&e&&(S.name=e.name),!S.name_persian&&(null==e?void 0:e.name_persian)&&(S.name_persian=e.name_persian)},B=async()=>{var e,t;_.value=!0,j.value={};try{const e=new FormData;let t;Object.entries(S).forEach(([t,a])=>{null!==a&&""!==a&&("boolean"==typeof a?e.append(t,a?"1":"0"):e.append(t,a.toString()))}),!S.category_id&&S.main_category_id&&e.append("category_id",S.main_category_id.toString()),I.value.forEach((t,a)=>{e.append(`images[${a}]`,t)}),t=L.value&&y.item?await b.updateItem(y.item.id,e):await b.createItem(e),t&&x("saved",t)}catch(a){(null==(t=null==(e=a.response)?void 0:e.data)?void 0:t.errors)&&(j.value=a.response.data.errors)}finally{_.value=!1}},F=()=>{y.item&&Object.assign(S,{name:y.item.name||"",name_persian:y.item.name_persian||"",description:y.item.description||"",description_persian:y.item.description_persian||"",sku:y.item.sku||"",category_id:y.item.category_id||"",main_category_id:y.item.main_category_id||"",location_id:y.item.location_id||"",quantity:y.item.quantity||0,unit_price:y.item.unit_price||0,cost_price:y.item.cost_price||0,gold_purity:y.item.gold_purity||null,weight:y.item.weight||null,serial_number:y.item.serial_number||"",batch_number:y.item.batch_number||"",expiry_date:y.item.expiry_date||"",minimum_stock:y.item.minimum_stock||null,maximum_stock:y.item.maximum_stock||null,is_active:y.item.is_active??!0,track_serial:y.item.track_serial||!1,track_batch:y.item.track_batch||!1})};return w(()=>y.item,F,{immediate:!0}),m(async()=>{try{const e=[];0===b.categories.length&&e.push(b.fetchCategories()),0===b.locations.length&&e.push(b.fetchLocations()),await Promise.all(e),F()}catch(e){}}),(e,t)=>{var a,r,m;return u(),l("div",Rg,[i("div",Pg,[i("div",{class:"fixed inset-0 bg-black bg-opacity-25",onClick:t[0]||(t[0]=t=>e.$emit("close"))}),i("div",Bg,[i("div",Fg,[i("div",Hg,[i("h3",Gg,n(L.value?e.$t("inventory.edit_item"):e.$t("inventory.add_item")),1),i("button",{onClick:t[1]||(t[1]=t=>e.$emit("close")),class:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"},[o(s(R),{class:"h-6 w-6"})])])]),i("form",{onSubmit:C(B,["prevent"]),class:"p-6"},[i("div",Jg,[i("div",Kg,[i("h4",Wg,n(e.$t("inventory.basic_information")),1)]),i("div",null,[i("label",Yg,n(e.$t("inventory.name")),1),f(i("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>S.name=e),type:"text",class:g(["block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",j.value.name?"border-red-300 focus:border-red-500 focus:ring-red-500":""]),placeholder:T.value?T.value.localized_name||T.value.name:"Enter item name"},null,10,Qg),[[k,S.name]]),!S.name&&T.value?(u(),l("p",Xg,n(e.$t("inventory.name_auto_from_category",{category:T.value.localized_name||T.value.name})),1)):d("",!0),j.value.name?(u(),l("p",Zg,n(j.value.name[0]),1)):d("",!0)]),i("div",null,[i("label",ex,n(e.$t("inventory.name_persian")),1),f(i("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>S.name_persian=e),type:"text",dir:"rtl",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:e.$t("inventory.name_persian_placeholder")},null,8,tx),[[k,S.name_persian]])]),i("div",null,[i("label",ax,n(e.$t("inventory.sku"))+" * ",1),f(i("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>S.sku=e),type:"text",required:"",class:g(["block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",j.value.sku?"border-red-300 focus:border-red-500 focus:ring-red-500":""]),placeholder:e.$t("inventory.sku_placeholder")},null,10,rx),[[k,S.sku]]),j.value.sku?(u(),l("p",lx,n(j.value.sku[0]),1)):d("",!0)]),i("div",null,[i("label",ix,n(e.$t("inventory.categories.main_category")),1),f(i("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>S.main_category_id=e),onChange:N,class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[i("option",ox,n(e.$t("inventory.categories.select_main_category")),1),(u(!0),l(v,null,p(z.value,e=>(u(),l("option",{key:e.id,value:e.id},[e.image_path?(u(),l("span",nx,"🖼️ ")):d("",!0),c(n(e.localized_name||e.name),1)],8,sx))),128))],544),[[h,S.main_category_id]])]),i("div",null,[i("label",dx,n(e.$t("inventory.categories.subcategory")),1),f(i("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>S.category_id=e),onChange:P,disabled:!S.main_category_id||0===D.value.length,class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"},[i("option",ux,n(e.$t("inventory.categories.select_subcategory")),1),(u(!0),l(v,null,p(D.value,e=>(u(),l("option",{key:e.id,value:e.id},[e.image_path?(u(),l("span",yx,"🖼️ ")):d("",!0),c(n(e.localized_name||e.name),1)],8,mx))),128))],40,cx),[[h,S.category_id]]),S.main_category_id?0===D.value.length?(u(),l("p",xx,n(e.$t("inventory.categories.no_subcategories")),1)):d("",!0):(u(),l("p",gx,n(e.$t("inventory.categories.select_main_first")),1))]),i("div",vx,[i("label",px,n(e.$t("inventory.description")),1),f(i("textarea",{"onUpdate:modelValue":t[7]||(t[7]=e=>S.description=e),rows:"3",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:e.$t("inventory.description_placeholder")},null,8,bx),[[k,S.description]])]),i("div",fx,[i("label",kx,n(e.$t("inventory.description_persian")),1),f(i("textarea",{"onUpdate:modelValue":t[8]||(t[8]=e=>S.description_persian=e),rows:"3",dir:"rtl",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:e.$t("inventory.description_persian_placeholder")},null,8,hx),[[k,S.description_persian]])]),A.value?(u(),l("div",_x,[i("label",wx,n(e.$t("inventory.categories.category_path")),1),i("div",$x,[i("span",Cx,n(A.value),1)])])):d("",!0),i("div",qx,[i("h4",jx,n(e.$t("inventory.location_stock")),1)]),i("div",null,[i("label",Vx,n(e.$t("inventory.location")),1),f(i("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>S.location_id=e),class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[i("option",Ix,n(e.$t("inventory.select_location")),1),(u(!0),l(v,null,p(s(b).locations,e=>(u(),l("option",{key:e.id,value:e.id},n(e.name),9,Ux))),128))],512),[[h,S.location_id]])]),i("div",null,[i("label",Sx,n(e.$t("inventory.quantity"))+" * ",1),f(i("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>S.quantity=e),type:"number",step:"0.001",min:"0",required:"",class:g(["block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",j.value.quantity?"border-red-300 focus:border-red-500 focus:ring-red-500":""])},null,2),[[k,S.quantity,void 0,{number:!0}]]),j.value.quantity?(u(),l("p",Lx,n(j.value.quantity[0]),1)):d("",!0)]),i("div",null,[i("label",zx,n(e.$t("inventory.minimum_stock")),1),f(i("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>S.minimum_stock=e),type:"number",step:"0.001",min:"0",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[k,S.minimum_stock,void 0,{number:!0}]])]),i("div",null,[i("label",Dx,n(e.$t("inventory.maximum_stock")),1),f(i("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>S.maximum_stock=e),type:"number",step:"0.001",min:"0",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[k,S.maximum_stock,void 0,{number:!0}]])]),i("div",Ex,[i("h4",Tx,n(e.$t("inventory.pricing")),1)]),i("div",null,[i("label",Ax,n(e.$t("inventory.unit_price")),1),f(i("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>S.unit_price=e),type:"number",step:"0.01",min:"0",placeholder:e.$t("inventory.price_on_request"),class:g(["block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",j.value.unit_price?"border-red-300 focus:border-red-500 focus:ring-red-500":""])},null,10,Mx),[[k,S.unit_price,void 0,{number:!0}]]),j.value.unit_price?(u(),l("p",Ox,n(j.value.unit_price[0]),1)):d("",!0)]),i("div",null,[i("label",Nx,n(e.$t("inventory.cost_price")),1),f(i("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>S.cost_price=e),type:"number",step:"0.01",min:"0",placeholder:e.$t("inventory.price_on_request"),class:g(["block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",j.value.cost_price?"border-red-300 focus:border-red-500 focus:ring-red-500":""])},null,10,Rx),[[k,S.cost_price,void 0,{number:!0}]]),j.value.cost_price?(u(),l("p",Px,n(j.value.cost_price[0]),1)):d("",!0)]),i("div",Bx,[i("h4",Fx,n(e.$t("inventory.jewelry_info")),1)]),i("div",null,[i("label",Hx,n(e.$t("inventory.gold_purity")),1),f(i("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>S.gold_purity=e),type:"number",step:"0.001",min:"0",max:"24",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:(null==(a=E.value)?void 0:a.default_gold_purity)?E.value.default_gold_purity.toString():"18.000"},null,8,Gx),[[k,S.gold_purity,void 0,{number:!0}]]),(null==(r=E.value)?void 0:r.default_gold_purity)?(u(),l("p",Jx,n(e.$t("inventory.categories.default_from_category",{purity:(m=E.value.default_gold_purity,`${("string"==typeof m?parseFloat(m):m).toFixed(1)}K`),category:E.value.localized_name||E.value.name})),1)):(u(),l("p",Kx,n(e.$t("inventory.gold_purity_help")),1))]),i("div",null,[i("label",Wx,n(e.$t("inventory.weight")),1),f(i("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>S.weight=e),type:"number",step:"0.001",min:"0",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:"0.000"},null,512),[[k,S.weight,void 0,{number:!0}]]),i("p",Yx,n(e.$t("inventory.weight_help")),1)]),i("div",Qx,[i("h4",Xx,n(e.$t("inventory.tracking")),1)]),i("div",null,[i("label",Zx,n(e.$t("inventory.serial_number")),1),f(i("input",{"onUpdate:modelValue":t[17]||(t[17]=e=>S.serial_number=e),type:"text",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:e.$t("inventory.serial_number_placeholder")},null,8,ev),[[k,S.serial_number]])]),i("div",null,[i("label",tv,n(e.$t("inventory.batch_number")),1),f(i("input",{"onUpdate:modelValue":t[18]||(t[18]=e=>S.batch_number=e),type:"text",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:e.$t("inventory.batch_number_placeholder")},null,8,av),[[k,S.batch_number]])]),i("div",null,[i("label",rv,n(e.$t("inventory.expiry_date")),1),f(i("input",{"onUpdate:modelValue":t[19]||(t[19]=e=>S.expiry_date=e),type:"date",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[k,S.expiry_date]])]),i("div",lv,[f(i("input",{"onUpdate:modelValue":t[20]||(t[20]=e=>S.track_serial=e),type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[q,S.track_serial]]),i("label",iv,n(e.$t("inventory.track_serial")),1)]),i("div",ov,[f(i("input",{"onUpdate:modelValue":t[21]||(t[21]=e=>S.track_batch=e),type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[q,S.track_batch]]),i("label",sv,n(e.$t("inventory.track_batch")),1)]),i("div",nv,[f(i("input",{"onUpdate:modelValue":t[22]||(t[22]=e=>S.is_active=e),type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[q,S.is_active]]),i("label",dv,n(e.$t("inventory.is_active")),1)]),i("div",cv,[i("h4",uv,n(e.$t("inventory.images")),1),i("div",mv,[i("div",yv,[i("div",gv,[o(s(O),{class:"mx-auto h-12 w-12 text-gray-400"}),i("div",xv,[i("label",vv,[i("span",null,n(e.$t("inventory.upload_image")),1),i("input",{ref_key:"imageInput",ref:V,type:"file",accept:"image/*",multiple:"",class:"sr-only",onChange:M},null,544)]),i("p",pv,n(e.$t("inventory.or_drag_drop")),1)]),i("p",bv,n(e.$t("inventory.image_formats")),1)])]),U.value.length>0?(u(),l("div",fv,[(u(!0),l(v,null,p(U.value,(e,t)=>(u(),l("div",{key:t,class:"relative"},[i("img",{src:e,alt:`Preview ${t+1}`,class:"h-24 w-24 object-cover rounded-lg"},null,8,kv),i("button",{onClick:e=>(e=>{I.value.splice(e,1),U.value.splice(e,1)})(t),type:"button",class:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600"},[o(s(R),{class:"h-4 w-4"})],8,hv)]))),128))])):d("",!0)])])]),i("div",_v,[i("button",{type:"button",onClick:t[23]||(t[23]=t=>e.$emit("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},n(e.$t("common.cancel")),1),i("button",{type:"submit",disabled:_.value,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed"},[_.value?(u(),l("span",$v,[t[24]||(t[24]=i("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},[i("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),i("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),c(" "+n(e.$t("common.saving")),1)])):(u(),l("span",Cv,n(L.value?e.$t("common.update"):e.$t("common.create")),1))],8,wv)])],32)])])])}}}),jv={class:"fixed inset-0 z-50 overflow-y-auto"},Vv={class:"flex min-h-screen items-center justify-center p-4"},Iv={class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto"},Uv={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},Sv={class:"flex items-center justify-between"},Lv={class:"text-lg font-medium text-gray-900 dark:text-white"},zv={class:"text-sm text-gray-500 dark:text-gray-400"},Dv={class:"flex items-center space-x-2"},Ev={class:"p-6"},Tv={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Av={class:"lg:col-span-2 space-y-6"},Mv={class:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4"},Ov={class:"text-md font-medium text-gray-900 dark:text-white mb-4"},Nv={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Rv={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Pv={class:"mt-1 text-sm text-gray-900 dark:text-white"},Bv={key:0},Fv={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Hv={class:"mt-1 text-sm text-gray-900 dark:text-white",dir:"rtl"},Gv={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Jv={class:"mt-1 text-sm text-gray-900 dark:text-white"},Kv={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Wv={class:"mt-1 text-sm text-gray-900 dark:text-white"},Yv={key:1,class:"md:col-span-2"},Qv={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Xv={class:"mt-1 text-sm text-gray-900 dark:text-white"},Zv={key:2,class:"md:col-span-2"},ep={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},tp={class:"mt-1 text-sm text-gray-900 dark:text-white",dir:"rtl"},ap={class:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4"},rp={class:"text-md font-medium text-gray-900 dark:text-white mb-4"},lp={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ip={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},op={class:"mt-1 text-lg font-semibold text-gray-900 dark:text-white"},sp={key:0},np={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},dp={class:"mt-1 text-sm text-gray-900 dark:text-white"},cp={key:1},up={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},mp={class:"mt-1 text-sm text-gray-900 dark:text-white"},yp={class:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4"},gp={class:"text-md font-medium text-gray-900 dark:text-white mb-4"},xp={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},vp={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},pp={class:"mt-1 text-lg font-semibold text-green-600 dark:text-green-400"},bp={key:0},fp={key:1,class:"text-gray-500 dark:text-gray-400 italic text-sm"},kp={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},hp={class:"mt-1 text-lg font-semibold text-gray-900 dark:text-white"},_p={key:0},wp={key:1,class:"text-gray-500 dark:text-gray-400 italic text-sm"},$p={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Cp={class:"mt-1 text-lg font-semibold text-blue-600 dark:text-blue-400"},qp={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},jp={class:"mt-1 text-lg font-semibold text-gray-900 dark:text-white"},Vp={key:0,class:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4"},Ip={class:"text-md font-medium text-gray-900 dark:text-white mb-4"},Up={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Sp={key:0},Lp={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},zp={class:"mt-1 text-sm text-gray-900 dark:text-white"},Dp={key:1},Ep={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Tp={class:"mt-1 text-sm text-gray-900 dark:text-white"},Ap={key:1,class:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4"},Mp={class:"text-md font-medium text-gray-900 dark:text-white mb-4"},Op={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Np={key:0},Rp={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Pp={class:"mt-1 text-sm text-gray-900 dark:text-white font-mono"},Bp={key:1},Fp={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Hp={class:"mt-1 text-sm text-gray-900 dark:text-white font-mono"},Gp={key:2},Jp={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Kp={class:"mt-1 text-sm text-gray-900 dark:text-white"},Wp={class:"space-y-6"},Yp={class:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4"},Qp={class:"text-md font-medium text-gray-900 dark:text-white mb-4"},Xp={class:"space-y-3"},Zp={class:"flex items-center justify-between"},eb={class:"text-sm text-gray-500 dark:text-gray-400"},tb={key:0,class:"flex items-center justify-between"},ab={class:"text-sm text-gray-500 dark:text-gray-400"},rb={class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400"},lb={key:1,class:"flex items-center justify-between"},ib={class:"text-sm text-gray-500 dark:text-gray-400"},ob={class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400"},sb={key:2,class:"flex items-center justify-between"},nb={class:"text-sm text-gray-500 dark:text-gray-400"},db={class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"},cb={key:0,class:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4"},ub={class:"text-md font-medium text-gray-900 dark:text-white mb-4"},mb={class:"space-y-3"},yb={key:0,class:"flex items-center"},gb={class:"text-sm text-gray-900 dark:text-white"},xb={key:1,class:"flex items-center"},vb={class:"text-sm text-gray-900 dark:text-white"},pb={class:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4"},bb={class:"text-md font-medium text-gray-900 dark:text-white mb-4"},fb={class:"space-y-3"},kb={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},hb={class:"mt-1 text-sm text-gray-900 dark:text-white"},_b={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},wb={class:"mt-1 text-sm text-gray-900 dark:text-white"},$b={class:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4"},Cb={class:"text-md font-medium text-gray-900 dark:text-white mb-4"},qb={class:"space-y-2"},jb=r({__name:"ItemDetailsModal",props:{item:{}},emits:["close","edit","delete"],setup(e){const{formatNumber:t,formatCurrency:a}=U(),r=e=>e?new Date(e).toLocaleString():"-",m=()=>{},y=()=>{},x=()=>{};return(e,v)=>{var p,b,f,k,h,_,w,$,C,q,j,V,I,U,S,L,E,T,A,M,O,N,P,F,H,G,J,K,W,Y,Q,X,Z,ee,te,ae,re,le,ie,oe,se,ne,de;return u(),l("div",jv,[i("div",Vv,[i("div",{class:"fixed inset-0 bg-black bg-opacity-25",onClick:v[0]||(v[0]=t=>e.$emit("close"))}),i("div",Iv,[i("div",Uv,[i("div",Sv,[i("div",null,[i("h3",Lv,n((null==(p=e.item)?void 0:p.localized_name)||(null==(b=e.item)?void 0:b.name)),1),i("p",zv,n(e.$t("inventory.sku"))+": "+n(null==(f=e.item)?void 0:f.sku),1)]),i("div",Dv,[i("button",{onClick:v[1]||(v[1]=t=>e.item&&e.$emit("edit",e.item)),class:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[o(s(z),{class:"h-4 w-4 mr-2"}),c(" "+n(e.$t("common.edit")),1)]),i("button",{onClick:v[2]||(v[2]=t=>e.item&&e.$emit("delete",e.item)),class:"inline-flex items-center px-3 py-2 border border-red-300 shadow-sm text-sm leading-4 font-medium rounded-md text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},[o(s(D),{class:"h-4 w-4 mr-2"}),c(" "+n(e.$t("common.delete")),1)]),i("button",{onClick:v[3]||(v[3]=t=>e.$emit("close")),class:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"},[o(s(R),{class:"h-6 w-6"})])])])]),i("div",Ev,[i("div",Tv,[i("div",Av,[i("div",Mv,[i("h4",Ov,n(e.$t("inventory.basic_information")),1),i("dl",Nv,[i("div",null,[i("dt",Rv,n(e.$t("inventory.name")),1),i("dd",Pv,n(null==(k=e.item)?void 0:k.name),1)]),(null==(h=e.item)?void 0:h.name_persian)?(u(),l("div",Bv,[i("dt",Fv,n(e.$t("inventory.name_persian")),1),i("dd",Hv,n(e.item.name_persian),1)])):d("",!0),i("div",null,[i("dt",Gv,n(e.$t("inventory.category")),1),i("dd",Jv,n((null==(w=null==(_=e.item)?void 0:_.category)?void 0:w.name)||"-"),1)]),i("div",null,[i("dt",Kv,n(e.$t("inventory.location")),1),i("dd",Wv,n((null==(C=null==($=e.item)?void 0:$.location)?void 0:C.name)||"-"),1)]),(null==(q=e.item)?void 0:q.description)?(u(),l("div",Yv,[i("dt",Qv,n(e.$t("inventory.description")),1),i("dd",Xv,n(e.item.description),1)])):d("",!0),(null==(j=e.item)?void 0:j.description_persian)?(u(),l("div",Zv,[i("dt",ep,n(e.$t("inventory.description_persian")),1),i("dd",tp,n(e.item.description_persian),1)])):d("",!0)])]),i("div",ap,[i("h4",rp,n(e.$t("inventory.stock_information")),1),i("dl",lp,[i("div",null,[i("dt",ip,n(e.$t("inventory.current_quantity")),1),i("dd",op,n(s(t)((null==(V=e.item)?void 0:V.quantity)||0)),1)]),(null==(I=e.item)?void 0:I.minimum_stock)?(u(),l("div",sp,[i("dt",np,n(e.$t("inventory.minimum_stock")),1),i("dd",dp,n(s(t)(e.item.minimum_stock)),1)])):d("",!0),(null==(U=e.item)?void 0:U.maximum_stock)?(u(),l("div",cp,[i("dt",up,n(e.$t("inventory.maximum_stock")),1),i("dd",mp,n(s(t)(e.item.maximum_stock)),1)])):d("",!0)])]),i("div",yp,[i("h4",gp,n(e.$t("inventory.pricing")),1),i("dl",xp,[i("div",null,[i("dt",vp,n(e.$t("inventory.unit_price")),1),i("dd",pp,[null!==(null==(S=e.item)?void 0:S.unit_price)&&void 0!==(null==(L=e.item)?void 0:L.unit_price)?(u(),l("span",bp,n(s(a)(e.item.unit_price)),1)):(u(),l("span",fp,n(e.$t("inventory.price_on_request")),1))])]),i("div",null,[i("dt",kp,n(e.$t("inventory.cost_price")),1),i("dd",hp,[null!==(null==(E=e.item)?void 0:E.cost_price)&&void 0!==(null==(T=e.item)?void 0:T.cost_price)?(u(),l("span",_p,n(s(a)(e.item.cost_price)),1)):(u(),l("span",wp,n(e.$t("inventory.price_on_request")),1))])]),i("div",null,[i("dt",$p,n(e.$t("inventory.total_value")),1),i("dd",Cp,n(s(a)((null==(A=e.item)?void 0:A.total_value)||0)),1)]),i("div",null,[i("dt",qp,n(e.$t("inventory.total_cost")),1),i("dd",jp,n(s(a)((null==(M=e.item)?void 0:M.total_cost)||0)),1)])])]),(null==(O=e.item)?void 0:O.gold_purity)||(null==(N=e.item)?void 0:N.weight)?(u(),l("div",Vp,[i("h4",Ip,n(e.$t("inventory.jewelry_info")),1),i("dl",Up,[(null==(P=e.item)?void 0:P.gold_purity)?(u(),l("div",Sp,[i("dt",Lp,n(e.$t("inventory.gold_purity")),1),i("dd",zp,n(s(t)(e.item.gold_purity))+" "+n(e.$t("inventory.karat")),1)])):d("",!0),(null==(F=e.item)?void 0:F.weight)?(u(),l("div",Dp,[i("dt",Ep,n(e.$t("inventory.weight")),1),i("dd",Tp,n(s(t)(e.item.weight))+" "+n(e.$t("inventory.grams")),1)])):d("",!0)])])):d("",!0),(null==(H=e.item)?void 0:H.serial_number)||(null==(G=e.item)?void 0:G.batch_number)||(null==(J=e.item)?void 0:J.expiry_date)?(u(),l("div",Ap,[i("h4",Mp,n(e.$t("inventory.tracking")),1),i("dl",Op,[(null==(K=e.item)?void 0:K.serial_number)?(u(),l("div",Np,[i("dt",Rp,n(e.$t("inventory.serial_number")),1),i("dd",Pp,n(e.item.serial_number),1)])):d("",!0),(null==(W=e.item)?void 0:W.batch_number)?(u(),l("div",Bp,[i("dt",Fp,n(e.$t("inventory.batch_number")),1),i("dd",Hp,n(e.item.batch_number),1)])):d("",!0),(null==(Y=e.item)?void 0:Y.expiry_date)?(u(),l("div",Gp,[i("dt",Jp,n(e.$t("inventory.expiry_date")),1),i("dd",Kp,n((de=e.item.expiry_date,de?new Date(de).toLocaleDateString():"-")),1)])):d("",!0)])])):d("",!0)]),i("div",Wp,[i("div",Yp,[i("h4",Qp,n(e.$t("common.status")),1),i("div",Xp,[i("div",Zp,[i("span",eb,n(e.$t("inventory.active")),1),i("span",{class:g(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",(null==(Q=e.item)?void 0:Q.is_active)?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"])},n((null==(X=e.item)?void 0:X.is_active)?e.$t("common.yes"):e.$t("common.no")),3)]),(null==(Z=e.item)?void 0:Z.is_low_stock)?(u(),l("div",tb,[i("span",ab,n(e.$t("inventory.stock_status")),1),i("span",rb,n(e.$t("inventory.low_stock")),1)])):d("",!0),(null==(ee=e.item)?void 0:ee.is_expiring)?(u(),l("div",lb,[i("span",ib,n(e.$t("inventory.expiry_status")),1),i("span",ob,n(e.$t("inventory.expiring")),1)])):d("",!0),(null==(te=e.item)?void 0:te.is_expired)?(u(),l("div",sb,[i("span",nb,n(e.$t("inventory.expiry_status")),1),i("span",db,n(e.$t("inventory.expired")),1)])):d("",!0)])]),(null==(ae=e.item)?void 0:ae.track_serial)||(null==(re=e.item)?void 0:re.track_batch)?(u(),l("div",cb,[i("h4",ub,n(e.$t("inventory.tracking_options")),1),i("div",mb,[(null==(le=e.item)?void 0:le.track_serial)?(u(),l("div",yb,[o(s(B),{class:"h-4 w-4 text-green-500 mr-2"}),i("span",gb,n(e.$t("inventory.track_serial")),1)])):d("",!0),(null==(ie=e.item)?void 0:ie.track_batch)?(u(),l("div",xb,[o(s(B),{class:"h-4 w-4 text-green-500 mr-2"}),i("span",vb,n(e.$t("inventory.track_batch")),1)])):d("",!0)])])):d("",!0),i("div",pb,[i("h4",bb,n(e.$t("inventory.timestamps")),1),i("dl",fb,[i("div",null,[i("dt",kb,n(e.$t("common.created_at")),1),i("dd",hb,n(r(null==(oe=e.item)?void 0:oe.created_at)),1)]),i("div",null,[i("dt",_b,n(e.$t("common.updated_at")),1),i("dd",wb,n(r(null==(se=e.item)?void 0:se.updated_at)),1)])])]),i("div",$b,[i("h4",Cb,n(e.$t("inventory.quick_actions")),1),i("div",qb,[i("button",{onClick:m,class:"w-full text-left px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md"},n(e.$t("inventory.view_movements")),1),i("button",{onClick:y,class:"w-full text-left px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md"},n(e.$t("inventory.adjust_stock")),1),(null==(ne=e.item)?void 0:ne.track_serial)?(u(),l("button",{key:0,onClick:x,class:"w-full text-left px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md"},n(e.$t("inventory.view_serial_numbers")),1)):d("",!0)])])])])])])])])}}}),Vb={class:"space-y-6"},Ib={class:"sm:flex sm:items-center sm:justify-between"},Ub={class:"sm:flex-auto"},Sb={class:"text-2xl font-semibold text-gray-900 dark:text-white"},Lb={class:"mt-2 text-sm text-gray-700 dark:text-gray-300"},zb={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},Db={class:"border-b border-gray-200 dark:border-gray-700"},Eb={class:"-mb-px flex space-x-8"},Tb=["onClick"],Ab={class:"mt-6"},Mb={key:0},Ob={key:1},Nb={key:2},Rb={key:3},Pb={key:4},Bb=r({__name:"InventoryView",setup(e){const t=Q(),r=a("items"),y=a(!1),x=a(!1),f=a(!1),k=a(!1),h=a(null),_=[{key:"items",label:"inventory.tabs.items"},{key:"categories",label:"inventory.tabs.categories"},{key:"audit",label:"inventory.tabs.stock_audit"},{key:"movements",label:"inventory.tabs.movements"},{key:"bom",label:"inventory.tabs.bom"}],w=e=>{h.value=e,x.value=!0,f.value=!1},$=e=>{h.value=e,f.value=!0},C=e=>{h.value=e,k.value=!0,f.value=!1},q=async()=>{if(h.value)try{await t.deleteItem(h.value.id),k.value=!1,h.value=null}catch(e){}},j=()=>{V(),t.fetchItems()},V=()=>{y.value=!1,x.value=!1,f.value=!1,h.value=null};return m(async()=>{await Promise.all([t.fetchItems(),t.fetchCategories(),t.fetchLocations()])}),(e,a)=>{var m;return u(),l("div",Vb,[i("div",Ib,[i("div",Ub,[i("h1",Sb,n(e.$t("inventory.title")),1),i("p",Lb,n(e.$t("inventory.description")),1)]),i("div",zb,[i("button",{onClick:a[0]||(a[0]=e=>y.value=!0),type:"button",class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},[o(s(A),{class:"h-4 w-4 mr-2"}),c(" "+n(e.$t("inventory.add_item")),1)])])]),i("div",Db,[i("nav",Eb,[(u(),l(v,null,p(_,t=>i("button",{key:t.key,onClick:e=>r.value=t.key,class:g(["whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm",r.value===t.key?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"])},n(e.$t(t.label)),11,Tb)),64))])]),i("div",Ab,["items"===r.value?(u(),l("div",Mb,[o(ua,{onEditItem:w,onViewItem:$,onDeleteItem:C})])):d("",!0),"categories"===r.value?(u(),l("div",Ob,[o($l)])):d("",!0),"audit"===r.value?(u(),l("div",Nb,[o(ds)])):d("",!0),"movements"===r.value?(u(),l("div",Rb,[o(Jc)])):d("",!0),"bom"===r.value?(u(),l("div",Pb,[o(Ng)])):d("",!0)]),y.value||x.value?(u(),b(qv,{key:0,item:h.value,"is-edit":x.value,onClose:V,onSaved:j},null,8,["item","is-edit"])):d("",!0),f.value?(u(),b(jb,{key:1,item:h.value,onClose:V,onEdit:w,onDelete:C},null,8,["item"])):d("",!0),k.value?(u(),b(ce,{key:2,title:e.$t("inventory.delete_item"),message:e.$t("inventory.delete_confirmation",{name:null==(m=h.value)?void 0:m.name}),loading:s(t).loading.deleting,onConfirm:q,onCancel:a[1]||(a[1]=e=>k.value=!1)},null,8,["title","message","loading"])):d("",!0)])}}}),Fb=Object.freeze(Object.defineProperty({__proto__:null,default:Bb},Symbol.toStringTag,{value:"Module"}));export{Fb as I,ce as _,Y as a,ue as b,Q as u};
