import{d as e,r as a,c as t,x as l,y as s,C as r,z as i,I as m,G as u,O as o,D as n,L as d,k as c,V as v,P as p,u as x}from"./chunk-f09d03cd.js";import{a as b}from"./chunk-779da291.js";import{_ as y}from"./chunk-8d35e1c0.js";import"./chunk-44e84328.js";import"./chunk-87351f13.js";import"./chunk-63a63872.js";import"./chunk-e5f6a124.js";const f={class:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8"},h={class:"sm:mx-auto sm:w-full sm:max-w-md"},g={class:"text-center"},k={class:"text-3xl font-bold text-gray-900"},w={class:"mt-2 text-sm text-gray-600"},_={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},j={class:"card"},$={key:0,class:"mb-4 p-3 bg-green-50 border border-green-200 rounded-md"},C={class:"text-sm text-green-600"},P={key:1,class:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md"},V={class:"text-sm text-red-600"},z={for:"email",class:"form-label"},O=["disabled"],q={key:0,class:"mt-1 text-sm text-red-600"},B=["disabled"],F={key:0,class:"flex items-center justify-center"},A={key:1},D={key:3,class:"text-center"},E={class:"text-sm text-gray-600 mb-4"},G=["disabled"],H={class:"mt-6 text-center"},I={class:"mt-6 text-center"},L=e({__name:"ForgotPasswordView",setup(e){const L=a({email:""}),M=a(!1),S=a(null),U=a(!1),J=a({}),K=t(()=>""!==L.value.email.trim()&&0===Object.keys(J.value).length),N=e=>{if("email"===e)L.value.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(L.value.email)?delete J.value.email:J.value.email="Please enter a valid email address":J.value.email="Email is required"},Q=async()=>{var e,a;if(N("email"),0===Object.keys(J.value).length)try{M.value=!0,S.value=null,await b.auth.forgotPassword({email:L.value.email}),U.value=!0}catch(t){S.value=(null==(a=null==(e=t.response)?void 0:e.data)?void 0:a.message)||"Failed to send reset email"}finally{M.value=!1}},R=async()=>{await Q()};return(e,a)=>{const t=p("router-link");return x(),l("div",f,[s("div",h,[s("div",g,[s("h2",k,r(e.$t("auth.forgot_password")),1),s("p",w,r(e.$t("auth.forgot_password_description")),1)])]),s("div",_,[s("div",j,[U.value?(x(),l("div",$,[s("p",C,r(e.$t("auth.reset_email_sent")),1)])):i("",!0),S.value?(x(),l("div",P,[s("p",V,r(S.value),1)])):i("",!0),U.value?(x(),l("div",D,[s("p",E,r(e.$t("auth.check_email_instructions")),1),s("button",{onClick:R,disabled:M.value,class:"btn btn-outline"},r(e.$t("auth.resend_email")),9,G)])):(x(),l("form",{key:2,onSubmit:m(Q,["prevent"]),class:"space-y-6"},[s("div",null,[s("label",z,r(e.$t("auth.email")),1),u(s("input",{id:"email","onUpdate:modelValue":a[0]||(a[0]=e=>L.value.email=e),type:"email",required:"",disabled:M.value,class:n(["form-input",{"opacity-50":M.value,"border-red-300 focus:border-red-500 focus:ring-red-500":J.value.email}]),onBlur:a[1]||(a[1]=e=>N("email"))},null,42,O),[[o,L.value.email]]),J.value.email?(x(),l("p",q,r(J.value.email),1)):i("",!0)]),s("div",null,[s("button",{type:"submit",disabled:M.value||!K.value,class:n(["w-full btn btn-primary",{"opacity-50 cursor-not-allowed":M.value||!K.value}])},[M.value?(x(),l("span",F,[a[2]||(a[2]=s("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),d(" "+r(e.$t("common.loading")),1)])):(x(),l("span",A,r(e.$t("auth.send_reset_link")),1))],10,B)])],32)),s("div",H,[c(t,{to:"/login",class:"text-sm font-medium text-primary-600 hover:text-primary-500"},{default:v(()=>[d(r(e.$t("auth.back_to_login")),1)]),_:1})]),s("div",I,[c(y)])])])])}}});export{L as default};
