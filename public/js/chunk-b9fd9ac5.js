var e=Object.defineProperty,t=(t,a,r)=>(((t,a,r)=>{a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r})(t,"symbol"!=typeof a?a+"":a,r),r);import{c as a,q as r,r as i,d as s,x as o,y as l,k as n,B as d,C as c,z as u,E as m,u as g,G as y,M as p,o as x,H as v,N as b,F as f,D as h,A as k,J as _,O as w,K as $,P as C,w as q,a as M,l as j,L as T,Q as V}from"./chunk-6e15bf0e.js";import{a as S,r as I,_ as R,u as U,b as L,c as D,d as A,e as z,f as E,g as P,h as O,i as N,j as H,k as F,l as B,m as G,n as J,o as K,p as Q,q as W,s as Y,t as X}from"./chunk-026199ed.js";import{u as Z}from"./chunk-b3261f71.js";import{_ as ee}from"./chunk-e5f6a124.js";function te(){const{locale:e,t:t}=Z(),r=a(()=>"fa"===e.value),i=a(()=>e.value),s=t=>"fa"===e.value?t.toLocaleString("fa-IR"):t.toLocaleString("en-US"),o=t=>t?"fa"===e.value&&t.name_persian?t.name_persian:t.name||"":"",l=a=>{if(!a)return"";if("fa"===e.value){return`${s(a)} ${t("inventory.categories.gold_purity_karat")}`}return`${a}K`};return{locale:e,isRTL:r,currentLanguage:i,formatNumber:s,formatCurrency:(t,a="USD")=>"fa"===e.value?new Intl.NumberFormat("fa-IR",{style:"currency",currency:"USD"===a?"IRR":a}).format(t):new Intl.NumberFormat("en-US",{style:"currency",currency:a}).format(t),formatDate:t=>{const a="string"==typeof t?new Date(t):t;return"fa"===e.value?new Intl.DateTimeFormat("fa-IR-u-ca-persian").format(a):new Intl.DateTimeFormat("en-US").format(a)},getDirection:()=>r.value?"rtl":"ltr",switchLanguage:t=>{e.value=t,document.documentElement.dir="fa"===t?"rtl":"ltr",document.documentElement.lang=t,localStorage.setItem("preferred-language",t)},getLocalizedCategoryName:o,getLocalizedCategoryDescription:t=>t?"fa"===e.value&&t.description_persian?t.description_persian:t.description||"":"",formatGoldPurity:l,formatGoldPurityDisplay:a=>{if(!a)return"";const r=l(a),i=t("inventory.categories.gold_purity_terminology");return e.value,`${i}: ${r}`},getCategoryPath:(t,a=[])=>{if(!t)return"";const r=[];let i=t;for(;i;)r.unshift(o(i)),i=a.find(e=>e.id===i.parent_id);const s="fa"===e.value?" ← ":" → ";return r.join(s)},formatPersianNumerals:t=>{if("fa"!==e.value)return t;const a=["۰","۱","۲","۳","۴","۵","۶","۷","۸","۹"];return t.replace(/\d/g,e=>a[parseInt(e)])},t:t}}const ae=r("inventory",()=>{const e=i([]),t=i(null),r=i([]),s=i([]),o=i(null),l=i([]),n=i([]),d=i([]),c=i({items:!1,item:!1,movements:!1,audits:!1,audit:!1,boms:!1,categories:!1,locations:!1,creating:!1,updating:!1,deleting:!1}),u=i({current_page:1,last_page:1,per_page:15,total:0}),m=i({search:"",category_id:"",location_id:"",is_active:"",is_low_stock:"",is_expiring:"",sort_by:"name",sort_direction:"asc"}),g=a(()=>{var t;return(null==(t=e.value)?void 0:t.filter(e=>e.is_active))||[]}),y=a(()=>{var t;return(null==(t=e.value)?void 0:t.filter(e=>e.is_low_stock))||[]}),p=a(()=>{var t;return(null==(t=e.value)?void 0:t.filter(e=>e.is_expiring))||[]}),x=a(()=>{var t;return(null==(t=e.value)?void 0:t.reduce((e,t)=>e+(t.total_value||0),0))||0}),v=a(()=>{var t;return(null==(t=e.value)?void 0:t.reduce((e,t)=>e+(t.total_cost||0),0))||0}),b=a(()=>{var t;const a={};return null==(t=e.value)||t.forEach(e=>{var t;const r=(null==(t=e.category)?void 0:t.name)||"Uncategorized";a[r]||(a[r]=[]),a[r].push(e)}),a}),f=a(()=>{var t;const a={};return null==(t=e.value)||t.forEach(e=>{var t;const r=(null==(t=e.location)?void 0:t.name)||"No Location";a[r]||(a[r]=[]),a[r].push(e)}),a}),h=async t=>{c.value.items=!0;try{const a={...m.value,...t},r=await S.inventory.getItems(a);if(r.data.success){const t=r.data.data;e.value=t.data,u.value={current_page:t.current_page,last_page:t.last_page,per_page:t.per_page,total:t.total}}}catch(a){throw a}finally{c.value.items=!1}},k=async()=>{c.value.categories=!0;try{const e=await S.inventory.getCategories();e.data.success&&(n.value=e.data.data)}catch(e){throw e}finally{c.value.categories=!1}},_=async e=>{c.value.audit=!0;try{const t=await S.inventory.getAudit(e);t.data.success&&(o.value=t.data.data)}catch(t){throw t}finally{c.value.audit=!1}};return{items:e,currentItem:t,movements:r,audits:s,currentAudit:o,boms:l,categories:n,locations:d,loading:c,pagination:u,filters:m,activeItems:g,lowStockItems:y,expiringItems:p,totalInventoryValue:x,totalInventoryCost:v,itemsByCategory:b,itemsByLocation:f,fetchItems:h,fetchItem:async e=>{c.value.item=!0;try{const a=await S.inventory.getItem(e);a.data.success&&(t.value=a.data.data)}catch(a){throw a}finally{c.value.item=!1}},createItem:async t=>{c.value.creating=!0;try{const a=await S.inventory.createItem(t);if(a.data.success){const t=a.data.data;return e.value||(e.value=[]),e.value.unshift(t),t}}catch(a){throw a}finally{c.value.creating=!1}},updateItem:async(a,r)=>{var i;c.value.updating=!0;try{const s=await S.inventory.updateItem(a,r);if(s.data.success){const r=s.data.data,o=e.value.findIndex(e=>e.id===a);return-1!==o&&(e.value[o]=r),(null==(i=t.value)?void 0:i.id)===a&&(t.value=r),r}}catch(s){throw s}finally{c.value.updating=!1}},deleteItem:async a=>{var r;c.value.deleting=!0;try{(await S.inventory.deleteItem(a)).data.success&&(e.value=e.value.filter(e=>e.id!==a),(null==(r=t.value)?void 0:r.id)===a&&(t.value=null))}catch(i){throw i}finally{c.value.deleting=!1}},fetchMovements:async e=>{c.value.movements=!0;try{const t=await S.inventory.getMovements(e);t.data.success&&(r.value=t.data.data)}catch(t){throw t}finally{c.value.movements=!1}},createMovement:async e=>{try{const t=await S.inventory.createMovement(e);if(t.data.success){const e=t.data.data;return r.value.unshift(e),await h(),e}}catch(t){throw t}},fetchCategories:k,createCategory:async e=>{c.value.creating=!0;try{const t=await S.inventory.createCategory(e);if(t.data.success){const e=t.data.data;return n.value.push(e),e}}catch(t){throw t}finally{c.value.creating=!1}},updateCategory:async(e,t)=>{c.value.updating=!0;try{const a=await S.inventory.updateCategory(e,t);if(a.data.success){const t=a.data.data,r=n.value.findIndex(t=>t.id===e);return-1!==r&&(n.value[r]=t),t}}catch(a){throw a}finally{c.value.updating=!1}},deleteCategory:async e=>{c.value.deleting=!0;try{(await S.inventory.deleteCategory(e)).data.success&&(n.value=n.value.filter(t=>t.id!==e))}catch(t){throw t}finally{c.value.deleting=!1}},reorderCategories:async e=>{try{const t=await S.inventory.reorderCategories(e);if(t.data.success)return await k(),t.data.data}catch(t){throw t}},fetchLocations:async()=>{c.value.locations=!0;try{const e=await S.inventory.getLocations();e.data.success&&(d.value=e.data.data)}catch(e){throw e}finally{c.value.locations=!1}},createLocation:async e=>{try{const t=await S.inventory.createLocation(e);if(t.data.success){const e=t.data.data;return d.value.push(e),e}}catch(t){throw t}},fetchAudits:async e=>{c.value.audits=!0;try{const t=await S.inventory.getAudits(e);t.data.success&&(s.value=t.data.data)}catch(t){throw t}finally{c.value.audits=!1}},fetchAudit:_,createAudit:async e=>{try{const t=await S.inventory.createAudit(e);if(t.data.success){const e=t.data.data;return s.value.unshift(e),e}}catch(t){throw t}},startAudit:async e=>{var t;try{const a=await S.inventory.startAudit(e);if(a.data.success){const r=a.data.data,i=s.value.findIndex(t=>t.id===e);return-1!==i&&(s.value[i]=r),(null==(t=o.value)?void 0:t.id)===e&&(o.value=r),r}}catch(a){throw a}},completeAudit:async e=>{var t;try{const a=await S.inventory.completeAudit(e);if(a.data.success){const r=a.data.data,i=s.value.findIndex(t=>t.id===e);return-1!==i&&(s.value[i]=r),(null==(t=o.value)?void 0:t.id)===e&&(o.value=r),r}}catch(a){throw a}},updateAuditItem:async(e,t,a)=>{var r;try{const i=await S.inventory.updateAuditItem(e,t,a);if(i.data.success)return(null==(r=o.value)?void 0:r.id)===e&&await _(e),i.data.data}catch(i){throw i}},fetchBOMs:async e=>{c.value.boms=!0;try{const t=await S.inventory.getBOMs(e);t.data.success&&(l.value=t.data.data)}catch(t){throw t}finally{c.value.boms=!1}},createBOM:async e=>{try{const t=await S.inventory.createBOM(e);if(t.data.success){const e=t.data.data;return l.value.push(e),e}}catch(t){throw t}},updateFilters:e=>{m.value={...m.value,...e}},resetFilters:()=>{m.value={search:"",category_id:"",location_id:"",is_active:"",is_low_stock:"",is_expiring:"",sort_by:"name",sort_direction:"asc"}},clearCurrentItem:()=>{t.value=null},clearCurrentAudit:()=>{o.value=null}}}),re={class:"fixed inset-0 z-50 overflow-y-auto"},ie={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},se={class:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6"},oe={class:"sm:flex sm:items-start"},le={class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900 sm:mx-0 sm:h-10 sm:w-10"},ne={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},de={class:"text-lg leading-6 font-medium text-gray-900 dark:text-white"},ce={class:"mt-2"},ue={class:"text-sm text-gray-500 dark:text-gray-400"},me={class:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse"},ge=["disabled"],ye={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},pe=s({__name:"ConfirmationModal",props:{title:{},message:{},loading:{type:Boolean,default:!1}},emits:["confirm","cancel"],setup:e=>(e,t)=>(g(),o("div",re,[l("div",ie,[l("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t[0]||(t[0]=t=>e.$emit("cancel"))}),l("div",se,[l("div",oe,[l("div",le,[n(d(I),{class:"h-6 w-6 text-red-600 dark:text-red-400"})]),l("div",ne,[l("h3",de,c(e.title),1),l("div",ce,[l("p",ue,c(e.message),1)])])]),l("div",me,[l("button",{type:"button",onClick:t[1]||(t[1]=t=>e.$emit("confirm")),disabled:e.loading,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"},[e.loading?(g(),o("div",ye)):u("",!0),m(" "+c(e.$t("common.confirm")),1)],8,ge),l("button",{type:"button",onClick:t[2]||(t[2]=t=>e.$emit("cancel")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-700 text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:w-auto sm:text-sm"},c(e.$t("common.cancel")),1)])])])]))});function xe(){const e=i(null),t=i(!1),r=i(null),s=a(()=>t.value),o=a(()=>!!r.value),l=a(()=>!!e.value),n=async(a,i={})=>{var s,o;try{t.value=!0,r.value=null;const s=(await a()).data.data;return e.value=s,i.onSuccess&&i.onSuccess(s),s}catch(l){const e=(null==(o=null==(s=l.response)?void 0:s.data)?void 0:o.message)||l.message||"An error occurred";return r.value=e,i.onError&&i.onError(e),i.showErrorToast,null}finally{t.value=!1}};return{data:e,loading:t,error:r,isLoading:s,hasError:o,hasData:l,execute:n,reset:()=>{e.value=null,t.value=!1,r.value=null},get:async(e,t)=>n(()=>ee(()=>import("./chunk-026199ed.js").then(e=>e.ag),["/js/chunk-026199ed.js","/js/chunk-6e15bf0e.js","/js/chunk-b3261f71.js","/js/chunk-842293c6.js","/js/chunk-63a63872.js","/js/chunk-e5f6a124.js","/css/dashboard-components-1b6384cc.css"],import.meta.url).then(a=>a.get(e,t))),post:async(e,t,a)=>n(()=>ee(()=>import("./chunk-026199ed.js").then(e=>e.ag),["/js/chunk-026199ed.js","/js/chunk-6e15bf0e.js","/js/chunk-b3261f71.js","/js/chunk-842293c6.js","/js/chunk-63a63872.js","/js/chunk-e5f6a124.js","/css/dashboard-components-1b6384cc.css"],import.meta.url).then(r=>r.post(e,t,a))),put:async(e,t,a)=>n(()=>ee(()=>import("./chunk-026199ed.js").then(e=>e.ag),["/js/chunk-026199ed.js","/js/chunk-6e15bf0e.js","/js/chunk-b3261f71.js","/js/chunk-842293c6.js","/js/chunk-63a63872.js","/js/chunk-e5f6a124.js","/css/dashboard-components-1b6384cc.css"],import.meta.url).then(r=>r.put(e,t,a))),delete:async(e,t)=>n(()=>ee(()=>import("./chunk-026199ed.js").then(e=>e.ag),["/js/chunk-026199ed.js","/js/chunk-6e15bf0e.js","/js/chunk-b3261f71.js","/js/chunk-842293c6.js","/js/chunk-63a63872.js","/js/chunk-e5f6a124.js","/css/dashboard-components-1b6384cc.css"],import.meta.url).then(a=>a.del(e,t)))}}const ve=new class{constructor(){t(this,"tabSwitchMetrics",[]),t(this,"apiResponseMetrics",[]),t(this,"loadingMetrics",[]),t(this,"cacheMetrics",{totalRequests:0,cacheHits:0,cacheMisses:0,hitRate:0,lastUpdated:new Date}),t(this,"thresholds",{tabSwitchTime:100,apiResponseTime:500,cacheHitRate:.85,loadingTime:300}),t(this,"maxMetricsHistory",1e3)}startTabSwitch(e,t){const a=`${e}-${Date.now()}`,r=performance.now();return sessionStorage.setItem(`tab-switch-${a}`,JSON.stringify({startTime:r,tabId:e,fromRoute:t,timestamp:(new Date).toISOString()})),a}endTabSwitch(e,t){const a=sessionStorage.getItem(`tab-switch-${e}`);if(!a)return null;const{startTime:r,tabId:i,fromRoute:s}=JSON.parse(a),o={tabId:i,switchTime:performance.now()-r,timestamp:new Date,fromRoute:s,toRoute:t};return this.recordTabSwitchMetrics(o),sessionStorage.removeItem(`tab-switch-${e}`),o}recordTabSwitchMetrics(e){this.tabSwitchMetrics.push(e),this.trimMetricsHistory(this.tabSwitchMetrics),e.switchTime,this.thresholds.tabSwitchTime}recordApiResponseMetrics(e){this.apiResponseMetrics.push(e),this.trimMetricsHistory(this.apiResponseMetrics),e.responseTime,this.thresholds.apiResponseTime}recordCacheHit(e){this.cacheMetrics.totalRequests++,this.cacheMetrics.cacheHits++,this.updateCacheHitRate()}recordCacheMiss(e){this.cacheMetrics.totalRequests++,this.cacheMetrics.cacheMisses++,this.updateCacheHitRate()}updateCacheHitRate(){this.cacheMetrics.hitRate=this.cacheMetrics.totalRequests>0?this.cacheMetrics.cacheHits/this.cacheMetrics.totalRequests:0,this.cacheMetrics.lastUpdated=new Date,this.cacheMetrics.hitRate<this.thresholds.cacheHitRate&&this.cacheMetrics.totalRequests}recordLoadingMetrics(e){this.loadingMetrics.push(e),this.trimMetricsHistory(this.loadingMetrics),e.loadTime,this.thresholds.loadingTime}setThresholds(e){this.thresholds={...this.thresholds,...e}}getThresholds(){return{...this.thresholds}}generatePerformanceReport(){const e=this.generateTabSwitchingReport(),t=this.generateApiPerformanceReport(),a=this.generateLoadingPerformanceReport(),r=this.generateOptimizationSuggestions();return{tabSwitching:e,apiPerformance:t,cachePerformance:{...this.cacheMetrics},loadingPerformance:a,optimizationSuggestions:r}}generateTabSwitchingReport(){if(0===this.tabSwitchMetrics.length)return{averageTime:0,slowestSwitch:null,fastestSwitch:null,totalSwitches:0,thresholdViolations:0};const e=this.tabSwitchMetrics.map(e=>e.switchTime),t=e.reduce((e,t)=>e+t,0)/e.length,a=this.tabSwitchMetrics.reduce((e,t)=>t.switchTime>e.switchTime?t:e),r=this.tabSwitchMetrics.reduce((e,t)=>t.switchTime<e.switchTime?t:e),i=this.tabSwitchMetrics.filter(e=>e.switchTime>this.thresholds.tabSwitchTime).length;return{averageTime:t,slowestSwitch:a,fastestSwitch:r,totalSwitches:this.tabSwitchMetrics.length,thresholdViolations:i}}generateApiPerformanceReport(){if(0===this.apiResponseMetrics.length)return{averageResponseTime:0,slowestEndpoint:null,fastestEndpoint:null,totalRequests:0,thresholdViolations:0};const e=this.apiResponseMetrics.map(e=>e.responseTime),t=e.reduce((e,t)=>e+t,0)/e.length,a=this.apiResponseMetrics.reduce((e,t)=>t.responseTime>e.responseTime?t:e),r=this.apiResponseMetrics.reduce((e,t)=>t.responseTime<e.responseTime?t:e),i=this.apiResponseMetrics.filter(e=>e.responseTime>this.thresholds.apiResponseTime).length;return{averageResponseTime:t,slowestEndpoint:a,fastestEndpoint:r,totalRequests:this.apiResponseMetrics.length,thresholdViolations:i}}generateLoadingPerformanceReport(){if(0===this.loadingMetrics.length)return{averageLoadTime:0,slowestComponent:null,fastestComponent:null,totalLoads:0,thresholdViolations:0};const e=this.loadingMetrics.map(e=>e.loadTime),t=e.reduce((e,t)=>e+t,0)/e.length,a=this.loadingMetrics.reduce((e,t)=>t.loadTime>e.loadTime?t:e),r=this.loadingMetrics.reduce((e,t)=>t.loadTime<e.loadTime?t:e),i=this.loadingMetrics.filter(e=>e.loadTime>this.thresholds.loadingTime).length;return{averageLoadTime:t,slowestComponent:a,fastestComponent:r,totalLoads:this.loadingMetrics.length,thresholdViolations:i}}generateOptimizationSuggestions(){const e=[],t=this.generateTabSwitchingReport(),a=this.generateApiPerformanceReport(),r=this.generateLoadingPerformanceReport();return t.averageTime>.8*this.thresholds.tabSwitchTime&&e.push("Consider implementing route preloading to improve tab switching performance"),t.thresholdViolations>.1*t.totalSwitches&&e.push("High number of slow tab switches detected - review component loading strategies"),a.averageResponseTime>.7*this.thresholds.apiResponseTime&&e.push("API response times are approaching threshold - consider implementing request optimization"),a.thresholdViolations>.05*a.totalRequests&&e.push("Frequent API timeout violations - review endpoint performance and caching strategies"),this.cacheMetrics.hitRate<this.thresholds.cacheHitRate&&e.push(`Cache hit rate is ${(100*this.cacheMetrics.hitRate).toFixed(1)}% - consider expanding cache coverage`),this.cacheMetrics.hitRate<.5&&this.cacheMetrics.totalRequests>50&&e.push("Very low cache hit rate detected - review cache invalidation strategies"),r.averageLoadTime>.8*this.thresholds.loadingTime&&e.push("Component loading times are high - consider implementing lazy loading and code splitting"),e}trimMetricsHistory(e){e.length>this.maxMetricsHistory&&e.splice(0,e.length-this.maxMetricsHistory)}clearAllMetrics(){this.tabSwitchMetrics=[],this.apiResponseMetrics=[],this.loadingMetrics=[],this.cacheMetrics.totalRequests=0,this.cacheMetrics.cacheHits=0,this.cacheMetrics.cacheMisses=0,this.cacheMetrics.hitRate=0,this.cacheMetrics.lastUpdated=new Date}exportMetrics(){return{tabSwitchMetrics:[...this.tabSwitchMetrics],apiResponseMetrics:[...this.apiResponseMetrics],loadingMetrics:[...this.loadingMetrics],cacheMetrics:{...this.cacheMetrics},thresholds:{...this.thresholds}}}};function be(e){const t=y(),r=p(),s=i(!0),o=i(null),l=new Map,n=i(null),d=i(0),c=i(0),u=a(()=>{const e=n.value;return e?e.cachePerformance.hitRate:0}),m=e=>{if(!s.value)return"";const t=e||`tab-${Date.now()}`,a=ve.startTabSwitch(t,r.path);return o.value=a,a},g=e=>{if(!s.value||!o.value)return null;const t=ve.endTabSwitch(o.value,e||r.path);return t&&(d.value=t.switchTime),o.value=null,t},v=(e,t,a,r=!1)=>{if(!s.value)return;const i={endpoint:e,responseTime:t,timestamp:new Date,status:a,cacheHit:r};ve.recordApiResponseMetrics(i),c.value=t,r?ve.recordCacheHit(e):ve.recordCacheMiss(e)},b=(e,t,a=!1)=>{if(!s.value)return;const r={component:e,loadTime:t,timestamp:new Date,isInitialLoad:a};ve.recordLoadingMetrics(r)},f=()=>{const e=ve.generatePerformanceReport();return n.value=e,e},h=()=>ve.getThresholds();return x(()=>{(()=>{let e=null;t.beforeEach((t,a)=>{s.value&&a.path!==t.path&&(e=performance.now(),m(`route-${String(t.name)||t.path}`))}),t.afterEach((t,a)=>{s.value&&e&&a.path!==t.path&&(g(t.path),e=null)})})()}),{isMonitoring:s,performanceReport:n,lastTabSwitchTime:d,lastApiResponseTime:c,cacheHitRate:u,mark:t=>{if(!s.value)return;const a=performance.now();l.set(t,a),performance.mark&&performance.mark(`${e||"component"}-${t}`)},measure:(t,a,r)=>{if(!s.value)return 0;const i=l.get(a),o=r?l.get(r):performance.now();if(void 0===i||void 0===o)return 0;const n=o-i;if(e&&ve.recordLoadingMetrics({component:e,loadTime:n,timestamp:new Date,isInitialLoad:t.includes("initial")||t.includes("mount")}),performance.measure)try{performance.measure(`${e||"component"}-${t}`,`${e||"component"}-${a}`,r?`${e||"component"}-${r}`:void 0)}catch(d){}return n},startTabSwitchTracking:m,endTabSwitchTracking:g,recordApiResponse:v,createApiInterceptor:()=>({request:e=>(e.metadata={startTime:performance.now()},e),response:e=>{var t,a,r;const i=performance.now(),o=null==(a=null==(t=e.config)?void 0:t.metadata)?void 0:a.startTime;if(o&&s.value){const t=i-o,a="true"===(null==(r=e.headers)?void 0:r["x-cache-hit"]);v(e.config.url||"unknown",t,e.status,a)}return e},error:e=>{var t,a,r,i;const o=performance.now(),l=null==(a=null==(t=e.config)?void 0:t.metadata)?void 0:a.startTime;if(l&&s.value){const t=o-l;v((null==(r=e.config)?void 0:r.url)||"unknown",t,(null==(i=e.response)?void 0:i.status)||0,!1)}return Promise.reject(e)}}),recordComponentLoad:b,trackComponentPerformance:e=>{const t=performance.now();return x(()=>{const a=performance.now()-t;b(e,a,!0)}),{recordOperation:(t,a)=>{b(`${e}-${t}`,a)}}},measureAsyncOperation:async(e,t)=>{const a=performance.now();try{const r=await e(),i=performance.now()-a;return b(t,i),{result:r,duration:i}}catch(r){const e=performance.now()-a;throw b(`${t}-error`,e),r}},measureSyncOperation:(e,t)=>{const a=performance.now();try{const r=e(),i=performance.now()-a;return b(t,i),{result:r,duration:i}}catch(r){const e=performance.now()-a;throw b(`${t}-error`,e),r}},generateReport:f,getOptimizationSuggestions:()=>f().optimizationSuggestions,checkPerformanceAlerts:()=>{const e=f(),t=h(),a=[];return e.tabSwitching.averageTime>t.tabSwitchTime&&a.push(`Average tab switch time (${e.tabSwitching.averageTime.toFixed(0)}ms) exceeds threshold (${t.tabSwitchTime}ms)`),e.apiPerformance.averageResponseTime>t.apiResponseTime&&a.push(`Average API response time (${e.apiPerformance.averageResponseTime.toFixed(0)}ms) exceeds threshold (${t.apiResponseTime}ms)`),e.cachePerformance.hitRate<t.cacheHitRate&&e.cachePerformance.totalRequests>10&&a.push(`Cache hit rate (${(100*e.cachePerformance.hitRate).toFixed(1)}%) below threshold (${100*t.cacheHitRate}%)`),e.loadingPerformance.averageLoadTime>t.loadingTime&&a.push(`Average loading time (${e.loadingPerformance.averageLoadTime.toFixed(0)}ms) exceeds threshold (${t.loadingTime}ms)`),a},setPerformanceThresholds:e=>{ve.setThresholds(e)},getPerformanceThresholds:h,enableMonitoring:()=>{s.value=!0},disableMonitoring:()=>{s.value=!1},clearMetrics:()=>{ve.clearAllMetrics(),n.value=null,d.value=0,c.value=0},exportMetrics:()=>ve.exportMetrics()}}const fe=s({__name:"SkeletonLoader",props:{width:{},height:{},variant:{default:"rectangular"},lines:{default:1},class:{default:""}},setup(e){const t=e,r=a(()=>{switch(t.variant){case"text":return"h-4";case"circular":return"rounded-full w-10 h-10";case"card":return"h-32";default:return"h-6"}}),i=a(()=>{const e={};return t.width&&(e.width="number"==typeof t.width?`${t.width}px`:t.width),t.height&&(e.height="number"==typeof t.height?`${t.height}px`:t.height),e}),s=a(()=>t.class);return(e,t)=>(g(),o("div",{class:v(["animate-pulse bg-gray-200 dark:bg-gray-700 rounded",r.value,s.value]),style:b(i.value)},null,6))}}),he=R(fe,[["__scopeId","data-v-49350051"]]),ke={class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden"},_e={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},we={class:"overflow-x-auto"},$e={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Ce={class:"bg-gray-50 dark:bg-gray-900"},qe={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Me={key:0,class:"flex items-center"},je={class:"space-y-2"},Te={key:1,class:"flex justify-end space-x-2"},Ve={class:"px-6 py-4 border-t border-gray-200 dark:border-gray-700"},Se={class:"flex items-center justify-between"},Ie={class:"flex space-x-2"},Re=s({__name:"TableSkeleton",props:{rows:{default:5},columns:{default:6}},setup(e){const t=e=>{const t=["100px","80px","120px","90px","110px","70px"];return t[(e-1)%t.length]};return(e,a)=>(g(),o("div",ke,[l("div",_e,[n(he,{width:"200px",height:"24px"})]),l("div",we,[l("table",$e,[l("thead",Ce,[l("tr",null,[(g(!0),o(f,null,h(e.columns,e=>(g(),o("th",{key:`header-${e}`,class:"px-6 py-3 text-left"},[n(he,{width:"80px",height:"16px"})]))),128))])]),l("tbody",qe,[(g(!0),o(f,null,h(e.rows,a=>(g(),o("tr",{key:`row-${a}`,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[(g(!0),o(f,null,h(e.columns,r=>(g(),o("td",{key:`cell-${a}-${r}`,class:"px-6 py-4 whitespace-nowrap"},[1===r?(g(),o("div",Me,[n(he,{variant:"circular",class:"mr-4"}),l("div",je,[n(he,{width:"120px",height:"16px"}),n(he,{width:"80px",height:"12px"})])])):r===e.columns?(g(),o("div",Te,[n(he,{width:"24px",height:"24px"}),n(he,{width:"24px",height:"24px"}),n(he,{width:"24px",height:"24px"})])):(g(),k(he,{key:2,width:t(r),height:"16px"},null,8,["width"]))]))),128))]))),128))])])]),l("div",Ve,[l("div",Se,[n(he,{width:"200px",height:"16px"}),l("div",Ie,[n(he,{width:"80px",height:"32px"}),n(he,{width:"80px",height:"32px"})])])])]))}}),Ue={class:"space-y-6"},Le={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6"},De={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Ae={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},ze=["placeholder"],Ee={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Pe={value:""},Oe=["value"],Ne={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},He={value:""},Fe=["value"],Be={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Ge={value:""},Je={value:"active"},Ke={value:"low_stock"},Qe={value:"expiring"},We={value:"expired"},Ye={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4"},Xe={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Ze={value:""},et=["value"],tt={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},at=["placeholder"],rt={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},it=["placeholder"],st={class:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4"},ot={class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg"},lt={class:"text-sm font-medium text-blue-600 dark:text-blue-400"},nt={class:"text-2xl font-bold text-blue-900 dark:text-blue-100"},dt={class:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg"},ct={class:"text-sm font-medium text-green-600 dark:text-green-400"},ut={class:"text-2xl font-bold text-green-900 dark:text-green-100"},mt={class:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg"},gt={class:"text-sm font-medium text-yellow-600 dark:text-yellow-400"},yt={class:"text-2xl font-bold text-yellow-900 dark:text-yellow-100"},pt={class:"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg"},xt={class:"text-sm font-medium text-red-600 dark:text-red-400"},vt={class:"text-2xl font-bold text-red-900 dark:text-red-100"},bt={class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden"},ft={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},ht={class:"text-lg font-medium text-gray-900 dark:text-white"},kt={key:1,class:"p-6 text-center"},_t={class:"text-gray-500 dark:text-gray-400"},wt={key:2,class:"overflow-x-auto"},$t={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Ct={class:"bg-gray-50 dark:bg-gray-900"},qt={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Mt={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},jt={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Tt={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Vt={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},St={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},It={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Rt={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Ut={class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Lt={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Dt={class:"px-6 py-4 whitespace-nowrap"},At={class:"flex items-center"},zt={class:"flex-shrink-0 h-10 w-10"},Et={class:"h-10 w-10 rounded-lg bg-gray-200 dark:bg-gray-600 flex items-center justify-center"},Pt={class:"ml-4"},Ot={class:"text-sm font-medium text-gray-900 dark:text-white"},Nt={class:"text-sm text-gray-500 dark:text-gray-400"},Ht={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Ft={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Bt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Gt={class:"px-6 py-4 whitespace-nowrap"},Jt={class:"text-sm text-gray-900 dark:text-white"},Kt={key:0,class:"text-xs text-red-600 dark:text-red-400"},Qt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Wt={key:0},Yt={key:1,class:"text-gray-500 dark:text-gray-400 italic"},Xt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Zt={key:0},ea={key:1,class:"text-gray-400"},ta={class:"px-6 py-4 whitespace-nowrap"},aa={class:"flex flex-col space-y-1"},ra={key:0,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400"},ia={key:1,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"},sa={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},oa={class:"flex justify-end space-x-2"},la=["onClick"],na=["onClick"],da=["onClick"],ca={key:3,class:"px-6 py-4 border-t border-gray-200 dark:border-gray-700"},ua={class:"flex items-center justify-between"},ma={class:"text-sm text-gray-700 dark:text-gray-300"},ga={class:"flex space-x-2"},ya=["disabled"],pa=["disabled"],xa=s({__name:"InventoryList",emits:["view-item","edit-item","delete-item"],setup(e){const{locale:t}=Z(),a=ae(),{formatNumber:r,formatCurrency:s}=U(),{execute:m}=xe(),{mark:y,measure:p}=be("InventoryList"),b=i(""),C=i({category_id:"",location_id:"",status:"",gold_purity_range:"",gold_purity_min:null,gold_purity_max:null}),q=i([]),M=E(()=>{y("search-start"),V(),p("search-duration","search-start")},300),j=E(()=>{y("filter-start"),V(),p("filter-duration","filter-start")},500),T=e=>{if(!e)return"-";const a="string"==typeof e?parseFloat(e):e;if(isNaN(a))return"-";if("fa"===t.value){const e=["۰","۱","۲","۳","۴","۵","۶","۷","۸","۹"];return`${a.toFixed(1).replace(/\d/g,t=>e[parseInt(t)])} عیار`}return`${a.toFixed(1)}K`},V=()=>{const e={search:b.value,...C.value,page:1};Object.keys(e).forEach(t=>{""===e[t]&&delete e[t]}),a.fetchItems(e)},I=e=>{if(e>=1&&e<=a.pagination.last_page){const t={search:b.value,...C.value,page:e};Object.keys(t).forEach(e=>{""===t[e]&&delete t[e]}),a.fetchItems(t)}};return x(()=>{(async()=>{try{const e=await m(()=>S.get("/api/inventory/gold-purity-options"));e&&(q.value=e.purity_ranges||[])}catch(e){}})(),V()}),(e,t)=>{var i;return g(),o("div",Ue,[l("div",Le,[l("div",De,[l("div",null,[l("label",Ae,c(e.$t("common.search")),1),_(l("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>b.value=e),onInput:t[1]||(t[1]=(...e)=>d(M)&&d(M)(...e)),type:"text",placeholder:e.$t("inventory.search_placeholder"),class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,40,ze),[[w,b.value]])]),l("div",null,[l("label",Ee,c(e.$t("inventory.category")),1),_(l("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>C.value.category_id=e),onChange:V,class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[l("option",Pe,c(e.$t("common.all_categories")),1),(g(!0),o(f,null,h(d(a).categories||[],e=>(g(),o("option",{key:e.id,value:e.id},c(e.name),9,Oe))),128))],544),[[$,C.value.category_id]])]),l("div",null,[l("label",Ne,c(e.$t("inventory.location")),1),_(l("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>C.value.location_id=e),onChange:V,class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[l("option",He,c(e.$t("common.all_locations")),1),(g(!0),o(f,null,h(d(a).locations||[],e=>(g(),o("option",{key:e.id,value:e.id},c(e.name),9,Fe))),128))],544),[[$,C.value.location_id]])]),l("div",null,[l("label",Be,c(e.$t("common.status")),1),_(l("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>C.value.status=e),onChange:V,class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[l("option",Ge,c(e.$t("common.all_statuses")),1),l("option",Je,c(e.$t("common.active")),1),l("option",Ke,c(e.$t("inventory.low_stock")),1),l("option",Qe,c(e.$t("inventory.expiring")),1),l("option",We,c(e.$t("inventory.expired")),1)],544),[[$,C.value.status]])])]),l("div",Ye,[l("div",null,[l("label",Xe,c(e.$t("inventory.gold_purity_range")),1),_(l("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>C.value.gold_purity_range=e),onChange:V,class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[l("option",Ze,c(e.$t("common.all")),1),(g(!0),o(f,null,h(q.value,e=>(g(),o("option",{key:e.label,value:e.label},c(e.label),9,et))),128))],544),[[$,C.value.gold_purity_range]])]),l("div",null,[l("label",tt,c(e.$t("inventory.gold_purity_min")),1),_(l("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>C.value.gold_purity_min=e),onInput:t[7]||(t[7]=(...e)=>d(j)&&d(j)(...e)),type:"number",step:"0.001",min:"0",max:"24",placeholder:e.$t("inventory.gold_purity_min"),class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,40,at),[[w,C.value.gold_purity_min,void 0,{number:!0}]])]),l("div",null,[l("label",rt,c(e.$t("inventory.gold_purity_max")),1),_(l("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>C.value.gold_purity_max=e),onInput:t[9]||(t[9]=(...e)=>d(j)&&d(j)(...e)),type:"number",step:"0.001",min:"0",max:"24",placeholder:e.$t("inventory.gold_purity_max"),class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,40,it),[[w,C.value.gold_purity_max,void 0,{number:!0}]])])]),l("div",st,[l("div",ot,[l("div",lt,c(e.$t("inventory.total_items")),1),l("div",nt,c(d(a).pagination.total),1)]),l("div",dt,[l("div",ct,c(e.$t("inventory.total_value")),1),l("div",ut,c(d(s)(d(a).totalInventoryValue)),1)]),l("div",mt,[l("div",gt,c(e.$t("inventory.low_stock_items")),1),l("div",yt,c(d(a).lowStockItems.length),1)]),l("div",pt,[l("div",xt,c(e.$t("inventory.expiring_items")),1),l("div",vt,c(d(a).expiringItems.length),1)])])]),l("div",bt,[l("div",ft,[l("h3",ht,c(e.$t("inventory.items_list")),1)]),d(a).loading.items?(g(),k(Re,{key:0,rows:10,columns:9})):0===(null==(i=d(a).items)?void 0:i.length)?(g(),o("div",kt,[l("div",_t,c(e.$t("inventory.no_items_found")),1)])):(g(),o("div",wt,[l("table",$t,[l("thead",Ct,[l("tr",null,[l("th",qt,c(e.$t("inventory.item")),1),l("th",Mt,c(e.$t("inventory.sku")),1),l("th",jt,c(e.$t("inventory.category")),1),l("th",Tt,c(e.$t("inventory.location")),1),l("th",Vt,c(e.$t("inventory.quantity")),1),l("th",St,c(e.$t("inventory.unit_price")),1),l("th",It,c(e.$t("inventory.gold_purity")),1),l("th",Rt,c(e.$t("common.status")),1),l("th",Ut,c(e.$t("common.actions")),1)])]),l("tbody",Lt,[(g(!0),o(f,null,h(d(a).items||[],t=>{var a,i;return g(),o("tr",{key:t.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[l("td",Dt,[l("div",At,[l("div",zt,[l("div",Et,[n(d(L),{class:"h-6 w-6 text-gray-400"})])]),l("div",Pt,[l("div",Ot,c(t.localized_name||t.name),1),l("div",Nt,c(t.localized_description||t.description),1)])])]),l("td",Ht,c(t.sku),1),l("td",Ft,c((null==(a=t.category)?void 0:a.name)||"-"),1),l("td",Bt,c((null==(i=t.location)?void 0:i.name)||"-"),1),l("td",Gt,[l("div",Jt,c(d(r)(t.quantity)),1),t.is_low_stock?(g(),o("div",Kt,c(e.$t("inventory.low_stock")),1)):u("",!0)]),l("td",Qt,[null!==t.unit_price&&void 0!==t.unit_price?(g(),o("span",Wt,c(d(s)(t.unit_price)),1)):(g(),o("span",Yt,c(e.$t("inventory.price_on_request")),1))]),l("td",Xt,[t.gold_purity?(g(),o("span",Zt,c(T(t.gold_purity)),1)):(g(),o("span",ea,"-"))]),l("td",ta,[l("div",aa,[l("span",{class:v(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",t.is_active?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"])},c(t.is_active?e.$t("common.active"):e.$t("common.inactive")),3),t.is_expiring?(g(),o("span",ra,c(e.$t("inventory.expiring")),1)):u("",!0),t.is_expired?(g(),o("span",ia,c(e.$t("inventory.expired")),1)):u("",!0)])]),l("td",sa,[l("div",oa,[l("button",{onClick:a=>e.$emit("view-item",t),class:"text-primary-600 hover:text-primary-900 dark:text-primary-400 dark:hover:text-primary-300"},[n(d(D),{class:"h-4 w-4"})],8,la),l("button",{onClick:a=>e.$emit("edit-item",t),class:"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300"},[n(d(A),{class:"h-4 w-4"})],8,na),l("button",{onClick:a=>e.$emit("delete-item",t),class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"},[n(d(z),{class:"h-4 w-4"})],8,da)])])])}),128))])])])),d(a).pagination.last_page>1?(g(),o("div",ca,[l("div",ua,[l("div",ma,c(e.$t("common.showing"))+" "+c((d(a).pagination.current_page-1)*d(a).pagination.per_page+1)+" "+c(e.$t("common.to"))+" "+c(Math.min(d(a).pagination.current_page*d(a).pagination.per_page,d(a).pagination.total))+" "+c(e.$t("common.of"))+" "+c(d(a).pagination.total)+" "+c(e.$t("common.results")),1),l("div",ga,[l("button",{onClick:t[10]||(t[10]=e=>I(d(a).pagination.current_page-1)),disabled:1===d(a).pagination.current_page,class:"px-3 py-1 text-sm border rounded-md disabled:opacity-50 disabled:cursor-not-allowed"},c(e.$t("common.previous")),9,ya),l("button",{onClick:t[11]||(t[11]=e=>I(d(a).pagination.current_page+1)),disabled:d(a).pagination.current_page===d(a).pagination.last_page,class:"px-3 py-1 text-sm border rounded-md disabled:opacity-50 disabled:cursor-not-allowed"},c(e.$t("common.next")),9,pa)])])])):u("",!0)])])}}}),va={class:"category-node"},ba={class:"flex items-center space-x-3 flex-1"},fa={key:1,class:"w-6"},ha={class:"flex-shrink-0"},ka=["src","alt"],_a={key:1,class:"h-8 w-8 rounded bg-gray-200 dark:bg-gray-600 flex items-center justify-center"},wa={class:"flex-1 min-w-0 category-tree-node"},$a={class:"flex items-center space-x-2"},Ca=["dir"],qa={key:0,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"},Ma={key:1,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"},ja=["dir"],Ta={key:0},Va={key:1},Sa={key:2},Ia={class:"flex items-center space-x-2"},Ra=["title"],Ua=["title"],La=["title","disabled"],Da={class:"drag-handle p-1 cursor-move text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},Aa={key:0,class:"mt-2 space-y-2"},za=s({__name:"CategoryTreeNode",props:{category:{},level:{},expanded:{type:Boolean},allCategories:{},expandedNodes:{default:()=>new Set}},emits:["edit","delete","toggle-expand","create-subcategory","reorder"],setup(e,{emit:t}){const r=e,s=t,{isRTL:m,getLocalizedCategoryName:y}=te(),{formatNumber:p}=U(),x=i(!1),_=a(()=>r.allCategories.filter(e=>e.parent_id===r.category.id)),w=a(()=>_.value.length>0),$=e=>{e.dataTransfer&&(e.dataTransfer.setData("text/plain",JSON.stringify({id:r.category.id,type:"category"})),e.dataTransfer.effectAllowed="move")},q=e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer&&(e.dataTransfer.dropEffect="move"),x.value=!0},M=e=>{e.preventDefault(),e.stopPropagation(),x.value=!1},j=e=>{if(e.preventDefault(),e.stopPropagation(),x.value=!1,e.dataTransfer)try{const t=JSON.parse(e.dataTransfer.getData("text/plain"));if("category"===t.type&&t.id!==r.category.id){const e={categoryId:t.id,newParentId:r.category.id,newPosition:0};T(t.id,r.category.id)||s("reorder",e)}}catch(t){}},T=(e,t)=>{const a=e=>r.allCategories.filter(t=>t.parent_id===e).some(e=>e.id===t||a(e.id));return a(e)};return(e,t)=>{const a=C("CategoryTreeNode",!0);return g(),o("div",va,[l("div",{class:v(["flex items-center justify-between p-3 rounded-lg border transition-colors","hover:bg-gray-50 dark:hover:bg-gray-700","border-gray-200 dark:border-gray-600",x.value?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":""]),style:b({marginLeft:24*e.level+"px"}),draggable:"true",onDragstart:$,onDragover:q,onDragleave:M,onDrop:j},[l("div",ba,[w.value?(g(),o("button",{key:0,onClick:t[0]||(t[0]=t=>e.$emit("toggle-expand",e.category.id)),class:"flex-shrink-0 p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-600"},[n(d(P),{class:v(["h-4 w-4 text-gray-500 transition-transform",e.expanded?"transform rotate-90":""])},null,8,["class"])])):(g(),o("div",fa)),l("div",ha,[e.category.image_path?(g(),o("img",{key:0,src:e.category.image_path,alt:e.category.localized_name,class:"h-8 w-8 rounded object-cover"},null,8,ka)):(g(),o("div",_a,[n(d(O),{class:"h-4 w-4 text-gray-500"})]))]),l("div",wa,[l("div",$a,[l("h4",{class:"text-sm font-medium text-gray-900 dark:text-white truncate category-name",dir:d(m)?"rtl":"ltr"},c(d(y)(e.category)),9,Ca),e.category.code?(g(),o("span",qa,c(e.category.code),1)):u("",!0),e.category.is_active?u("",!0):(g(),o("span",Ma,c(e.$t("common.inactive")),1))]),l("div",{class:"flex items-center space-x-4 mt-1 text-xs text-gray-500 dark:text-gray-400",dir:d(m)?"rtl":"ltr"},[e.category.item_count?(g(),o("span",Ta,c(e.$t("inventory.categories.item_count"))+": "+c(d(p)(e.category.item_count)),1)):u("",!0),e.category.subcategory_count?(g(),o("span",Va,c(e.$t("inventory.categories.subcategory_count"))+": "+c(e.category.subcategory_count),1)):u("",!0),e.category.default_gold_purity?(g(),o("span",Sa,c(e.$t("inventory.gold_purity"))+": "+c((r=e.category.default_gold_purity,`${r}K`)),1)):u("",!0)],8,ja)])]),l("div",Ia,[l("button",{onClick:t[1]||(t[1]=t=>e.$emit("create-subcategory",e.category)),class:"p-1 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600",title:e.$t("inventory.categories.create_subcategory")},[n(d(N),{class:"h-4 w-4"})],8,Ra),l("button",{onClick:t[2]||(t[2]=t=>e.$emit("edit",e.category)),class:"p-1 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600",title:e.$t("inventory.categories.edit_category")},[n(d(A),{class:"h-4 w-4"})],8,Ua),l("button",{onClick:t[3]||(t[3]=t=>e.$emit("delete",e.category)),class:"p-1 rounded text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/20",title:e.$t("inventory.categories.delete_category"),disabled:(e.category.item_count||0)>0||(e.category.subcategory_count||0)>0},[n(d(z),{class:"h-4 w-4"})],8,La),l("div",Da,[n(d(H),{class:"h-4 w-4"})])])],38),e.expanded&&w.value?(g(),o("div",Aa,[(g(!0),o(f,null,h(_.value,r=>(g(),k(a,{key:r.id,category:r,level:e.level+1,expanded:e.expandedNodes.has(r.id),"all-categories":e.allCategories,"expanded-nodes":e.expandedNodes,onEdit:t[4]||(t[4]=t=>e.$emit("edit",t)),onDelete:t[5]||(t[5]=t=>e.$emit("delete",t)),onToggleExpand:t[6]||(t[6]=t=>e.$emit("toggle-expand",t)),onCreateSubcategory:t[7]||(t[7]=t=>e.$emit("create-subcategory",t)),onReorder:t[8]||(t[8]=t=>e.$emit("reorder",t))},null,8,["category","level","expanded","all-categories","expanded-nodes"]))),128))])):u("",!0)]);var r}}}),Ea=R(za,[["__scopeId","data-v-c87da085"]]),Pa={class:"bg-white dark:bg-gray-800 shadow rounded-lg"},Oa={class:"px-4 py-5 sm:p-6"},Na={key:0,class:"flex justify-center py-8"},Ha={key:1,class:"text-center py-8"},Fa={class:"mt-2 text-sm font-medium text-gray-900 dark:text-white"},Ba={class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},Ga={key:2,class:"space-y-2"},Ja=s({__name:"CategoryTree",props:{categories:{},expandedNodes:{},loading:{type:Boolean,default:!1}},emits:["edit","delete","toggle-expand","create-subcategory","reorder"],setup(e){const t=e,r=a(()=>t.categories.filter(e=>!e.parent_id));return(e,t)=>(g(),o("div",Pa,[l("div",Oa,[e.loading?(g(),o("div",Na,t[5]||(t[5]=[l("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1)]))):e.categories&&0!==e.categories.length?(g(),o("div",Ga,[(g(!0),o(f,null,h(r.value,a=>{var r;return g(),k(Ea,{key:a.id,category:a,level:0,expanded:(null==(r=e.expandedNodes)?void 0:r.has(a.id))||!1,"all-categories":e.categories,onEdit:t[0]||(t[0]=t=>e.$emit("edit",t)),onDelete:t[1]||(t[1]=t=>e.$emit("delete",t)),onToggleExpand:t[2]||(t[2]=t=>e.$emit("toggle-expand",t)),onCreateSubcategory:t[3]||(t[3]=t=>e.$emit("create-subcategory",t)),onReorder:t[4]||(t[4]=t=>e.$emit("reorder",t))},null,8,["category","expanded","all-categories"])}),128))])):(g(),o("div",Ha,[n(d(O),{class:"mx-auto h-12 w-12 text-gray-400"}),l("h3",Fa,c(e.$t("inventory.categories.no_categories_found")),1),l("p",Ba,c(e.$t("inventory.categories.description")),1)]))])]))}}),Ka={class:"relative"},Qa=["id","value"],Wa={value:""},Ya=["value","disabled"],Xa=s({__name:"CategorySelector",props:{modelValue:{default:null},id:{},placeholder:{},excludeId:{default:null},initialParentId:{default:null}},emits:["update:modelValue"],setup(e,{emit:t}){const r=e,i=t,s=ae(),n=a(()=>{const e=s.categories||[];return r.excludeId?e.filter(t=>t.id!==r.excludeId&&!m(t,r.excludeId,e)).sort((e,t)=>{const a=u(e),r=u(t);return a!==r?a-r:e.sort_order!==t.sort_order?(e.sort_order||0)-(t.sort_order||0):(e.name||"").localeCompare(t.name||"")}):e.sort((e,t)=>{const a=u(e),r=u(t);return a!==r?a-r:e.sort_order!==t.sort_order?(e.sort_order||0)-(t.sort_order||0):(e.name||"").localeCompare(t.name||"")})}),d=e=>{const t=e.target,a=t.value?parseInt(t.value):null;i("update:modelValue",a)},u=e=>{let t=0,a=e;const r=s.categories||[];for(;a.parent_id;){t++;const e=r.find(e=>e.id===a.parent_id);if(!e)break;a=e}return t},m=(e,t,a)=>{let r=e;for(;r.parent_id;){if(r.parent_id===t)return!0;const e=a.find(e=>e.id===r.parent_id);if(!e)break;r=e}return!1};return x(async()=>{s.categories&&0!==s.categories.length||await s.fetchCategories()}),(e,t)=>(g(),o("div",Ka,[l("select",{id:e.id,value:e.modelValue,onInput:d,class:"mt-1 block w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white sm:text-sm"},[l("option",Wa,c(e.placeholder||e.$t("inventory.categories.select_parent")),1),(g(!0),o(f,null,h(n.value,t=>(g(),o("option",{key:t.id,value:t.id,disabled:t.id===e.excludeId},c((e=>{const t=e.localized_name||e.name,a=u(e);return`${"  ".repeat(a)}${t}${e.code?` (${e.code})`:""}`})(t)),9,Ya))),128))],40,Qa)]))}}),Za=["dir"],er={class:"flex"},tr=["id","value"],ar={value:""},rr=["value"],ir={value:"custom"},sr=["placeholder","dir"],or={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},lr=s({__name:"GoldPuritySelector",props:{modelValue:{default:null},id:{},placeholder:{}},emits:["update:modelValue"],setup(e,{emit:t}){const r=e,s=t;Z();const{execute:n}=xe(),{isRTL:m,formatGoldPurity:y}=te(),{getGoldPurityOptions:p,toPersianNumerals:b,formatNumber:k}=U(),$=i(""),C=i(null),M=i([]),j=a(()=>M.value.length>0?M.value.map(e=>({value:e.purity,label:e.label})):p()),T=a(()=>"custom"===$.value),V=e=>{const t=e.target.value;if($.value=t,"custom"===t)C.value=r.modelValue;else if(""===t)s("update:modelValue",null);else{const e=parseFloat(t);s("update:modelValue",e)}},I=()=>{null!==C.value&&void 0!==C.value?s("update:modelValue",C.value):s("update:modelValue",null)},R=()=>{if(null!==r.modelValue&&void 0!==r.modelValue){const e=j.value.find(e=>e.value===r.modelValue);e?$.value=String(e.value):($.value="custom",C.value=r.modelValue)}else $.value="",C.value=null};q(()=>r.modelValue,R);return x(()=>{(async()=>{try{const e=await n(()=>S.get("/api/inventory/gold-purity-options"));e&&(M.value=e.standard_purities||[])}catch(e){}})(),R()}),(e,t)=>(g(),o("div",{class:"relative gold-purity-selector",dir:d(m)?"rtl":"ltr"},[l("div",er,[l("select",{id:e.id,value:$.value,onInput:V,class:v(["flex-1 border-gray-300 dark:border-gray-600 rounded-l-md shadow-sm focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white sm:text-sm",{"text-right":d(m)}])},[l("option",ar,c(e.$t("inventory.categories.gold_purity_placeholder")),1),(g(!0),o(f,null,h(j.value,e=>(g(),o("option",{key:e.value,value:e.value},c(e.label),9,rr))),128)),l("option",ir,c(e.$t("common.custom")),1)],42,tr),T.value?_((g(),o("input",{key:0,"onUpdate:modelValue":t[0]||(t[0]=e=>C.value=e),onInput:I,type:"number",step:"0.001",min:"0",max:"24",placeholder:e.$t("inventory.categories.gold_purity_placeholder"),class:v(["flex-1 border-l-0 border-gray-300 dark:border-gray-600 rounded-r-md shadow-sm focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white sm:text-sm",{"text-right":d(m)}]),dir:d(m)?"rtl":"ltr"},null,42,sr)),[[w,C.value,void 0,{number:!0}]]):u("",!0)]),l("p",or,c(e.$t("inventory.gold_purity_help")),1)],8,Za))}}),nr={class:"space-y-4"},dr={key:0,class:"flex items-center space-x-4"},cr={class:"flex-shrink-0"},ur=["src","alt"],mr={class:"flex-1"},gr={class:"text-sm text-gray-900 dark:text-white"},yr={class:"text-xs text-gray-500 dark:text-gray-400"},pr={class:"space-y-2"},xr={class:"text-sm text-gray-600 dark:text-gray-400"},vr={class:"font-medium text-primary-600 hover:text-primary-500"},br={class:"text-xs text-gray-500 dark:text-gray-400"},fr={key:1,class:"w-full bg-gray-200 rounded-full h-2"},hr={key:2,class:"text-sm text-red-600"},kr=s({__name:"CategoryImageUpload",props:{modelValue:{default:null},currentImage:{default:null},maxSize:{default:2},acceptedTypes:{default:()=>["image/jpeg","image/png","image/jpg","image/webp"]}},emits:["update:modelValue","uploaded","removed"],setup(e,{emit:t}){const a=e,r=t,{t:s}=Z(),y=i(),p=i(null),x=i(null),f=i(!1),h=i(!1),k=i(0),_=i(null),w=e=>{var t;const a=null==(t=e.target.files)?void 0:t[0];a&&T(a)},$=e=>{var t;e.preventDefault(),e.stopPropagation(),f.value=!1;const a=null==(t=e.dataTransfer)?void 0:t.files;a&&a.length>0&&T(a[0])},C=e=>{e.preventDefault(),e.stopPropagation(),f.value=!0},j=e=>{e.preventDefault(),e.stopPropagation(),f.value=!1},T=e=>{if(_.value=null,!a.acceptedTypes.includes(e.type))return void(_.value=s("inventory.categories.invalid_file_type",{types:a.acceptedTypes.join(", ")}));const t=1024*a.maxSize*1024;if(e.size>t)return void(_.value=s("inventory.categories.file_too_large",{maxSize:a.maxSize}));const i=new Image;i.onload=()=>i.width<100||i.height<100?(_.value=s("inventory.categories.image_too_small"),void URL.revokeObjectURL(i.src)):i.width>2e3||i.height>2e3?(_.value=s("inventory.categories.image_too_large"),void URL.revokeObjectURL(i.src)):(p.value=e,x.value&&URL.revokeObjectURL(x.value),x.value=URL.createObjectURL(e),r("update:modelValue",e),r("uploaded",e),S(),void URL.revokeObjectURL(i.src)),i.onerror=()=>{_.value=s("inventory.categories.invalid_image_file"),URL.revokeObjectURL(i.src)},i.src=URL.createObjectURL(e)},V=()=>{p.value=null,x.value&&(URL.revokeObjectURL(x.value),x.value=null),y.value&&(y.value.value=""),r("update:modelValue",null),r("removed")},S=()=>{h.value=!0,k.value=0;const e=setInterval(()=>{k.value+=10,k.value>=100&&(clearInterval(e),h.value=!1,k.value=0)},100)};return q(()=>a.modelValue,e=>{!e&&p.value&&V()}),M(()=>{x.value&&URL.revokeObjectURL(x.value)}),(e,t)=>{var a;return g(),o("div",nr,[e.currentImage||x.value?(g(),o("div",dr,[l("div",cr,[l("img",{src:x.value||e.currentImage||"",alt:d(s)("inventory.categories.image"),class:"h-20 w-20 rounded-lg object-cover border border-gray-300 dark:border-gray-600"},null,8,ur)]),l("div",mr,[l("p",gr,c(d(s)("inventory.categories.image")),1),l("p",yr,c((null==(a=p.value)?void 0:a.name)||d(s)("common.current_image")),1),l("button",{onClick:V,type:"button",class:"mt-2 text-sm text-red-600 hover:text-red-500"},c(d(s)("inventory.categories.remove_image")),1)])])):u("",!0),l("div",{onDrop:$,onDragover:C,onDragleave:j,class:v(["relative border-2 border-dashed rounded-lg p-6 text-center hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",f.value?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-gray-300 dark:border-gray-600"])},[l("input",{ref_key:"fileInput",ref:y,type:"file",accept:"image/*",onChange:w,class:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"},null,544),l("div",pr,[n(d(F),{class:"mx-auto h-12 w-12 text-gray-400"}),l("div",xr,[l("span",vr,c(d(s)("inventory.categories.upload_image")),1),m(" "+c(d(s)("inventory.or_drag_drop")),1)]),l("p",br,c(d(s)("inventory.image_formats")),1)])],34),h.value?(g(),o("div",fr,[l("div",{class:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:b({width:`${k.value}%`})},null,4)])):u("",!0),_.value?(g(),o("div",hr,c(_.value),1)):u("",!0)])}}}),_r={class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},wr={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},$r={class:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full sm:p-6"},Cr={class:"mb-6 category-form-header"},qr={class:"flex justify-between items-center"},Mr={class:"text-lg leading-6 font-medium text-gray-900 dark:text-white",id:"modal-title"},jr={class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},Tr={class:"text-sm text-gray-500 dark:text-gray-400"},Vr={key:0,class:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md"},Sr={class:"text-sm text-red-600 dark:text-red-400"},Ir={class:"space-y-6"},Rr={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ur={for:"name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},Lr=["placeholder"],Dr={key:0,class:"mt-1 text-sm text-red-600"},Ar={for:"name_persian",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},zr=["placeholder"],Er={key:0,class:"mt-1 text-sm text-red-600"},Pr={for:"code",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},Or=["placeholder"],Nr={key:0,class:"mt-1 text-sm text-red-600"},Hr={for:"parent_id",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},Fr={key:0,class:"mt-1 text-sm text-red-600"},Br={for:"default_gold_purity",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},Gr={key:0,class:"mt-1 text-sm text-red-600"},Jr={for:"sort_order",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},Kr={key:0,class:"mt-1 text-sm text-red-600"},Qr={class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},Wr={key:0,class:"mt-1 text-sm text-red-600"},Yr={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Xr={for:"description",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},Zr=["placeholder"],ei={key:0,class:"mt-1 text-sm text-red-600"},ti={for:"description_persian",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},ai=["placeholder"],ri={key:0,class:"mt-1 text-sm text-red-600"},ii={class:"flex items-center"},si={for:"is_active",class:"ml-2 block text-sm text-gray-900 dark:text-white"},oi={class:"mt-8 flex justify-end space-x-3"},li=["disabled"],ni={key:0,class:"animate-spin -ml-1 mr-3 h-4 w-4 text-white"},di=s({__name:"CategoryFormModal",props:{category:{default:null},isEdit:{type:Boolean,default:!1},parentId:{default:null}},emits:["close","saved"],setup(e,{emit:t}){const a=e,r=t,s=ae(),{t:d}=Z();te(),U();const y=i(!1),p=i({}),v=j({name:"",name_persian:"",code:"",description:"",description_persian:"",parent_id:null,default_gold_purity:null,sort_order:0,is_active:!0,image:null}),b=async()=>{var e,t,i,o,l;y.value=!0,p.value={};try{if(v.parent_id&&(null==(e=a.category)?void 0:e.id)){if(v.parent_id===a.category.id)return void(p.value={parent_id:[d("inventory.categories.circular_reference_error")]});if(k(v.parent_id,a.category.id))return void(p.value={parent_id:[d("inventory.categories.circular_reference_error")]})}const t=new FormData;let i;Object.entries(v).forEach(([e,a])=>{null!=a&&("image"===e&&a instanceof File?t.append(e,a):"boolean"==typeof a?t.append(e,a?"1":"0"):t.append(e,String(a)))}),i=a.isEdit&&a.category?await s.updateCategory(a.category.id,t):await s.createCategory(t),r("saved",i)}catch(n){(null==(i=null==(t=n.response)?void 0:t.data)?void 0:i.errors)?p.value=n.response.data.errors:(null==(l=null==(o=n.response)?void 0:o.data)?void 0:l.message)?n.response.data.message.includes("circular")?p.value={parent_id:[d("inventory.categories.circular_reference_error")]}:p.value={general:[n.response.data.message]}:p.value={general:[d("common.error")]}}finally{y.value=!1}},f=e=>{v.image=e},h=()=>{v.image=null},k=(e,t)=>{const a=s.categories||[];let r=a.find(t=>t.id===e);for(;null==r?void 0:r.parent_id;){if(r.parent_id===t)return!0;r=a.find(e=>e.id===r.parent_id)}return!1},$=()=>{a.isEdit&&a.category?(v.name=a.category.name||"",v.name_persian=a.category.name_persian||"",v.code=a.category.code||"",v.description=a.category.description||"",v.description_persian=a.category.description_persian||"",v.parent_id=a.category.parent_id||null,v.default_gold_purity=a.category.default_gold_purity||null,v.sort_order=a.category.sort_order||0,v.is_active=a.category.is_active??!0):(v.name="",v.name_persian="",v.code="",v.description="",v.description_persian="",v.parent_id=a.parentId||null,v.default_gold_purity=null,v.sort_order=0,v.is_active=!0,v.image=null)};return q(()=>a.category,$,{immediate:!0}),q(()=>a.parentId,e=>{a.isEdit||(v.parent_id=e)}),x(()=>{$()}),(e,t)=>{var a,r;return g(),o("div",_r,[l("div",wr,[l("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t[0]||(t[0]=t=>e.$emit("close"))}),l("div",$r,[l("form",{onSubmit:T(b,["prevent"])},[l("div",Cr,[l("div",qr,[l("div",null,[l("h3",Mr,c(e.isEdit?e.$t("inventory.categories.edit_category"):e.$t("inventory.categories.add_category")),1),l("p",jr,c(e.isEdit?e.$t("inventory.categories.edit_category"):e.$t("inventory.categories.description")),1)]),l("div",Tr,c(e.$t("language.current_language")),1)])]),p.value.general?(g(),o("div",Vr,[l("p",Sr,c(p.value.general[0]),1)])):u("",!0),l("div",Ir,[l("div",Rr,[l("div",null,[l("label",Ur,c(e.$t("inventory.categories.name"))+" * ",1),_(l("input",{id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>v.name=e),type:"text",required:"",class:"mt-1 block w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white sm:text-sm",placeholder:e.$t("inventory.categories.name_placeholder")},null,8,Lr),[[w,v.name]]),p.value.name?(g(),o("p",Dr,c(p.value.name[0]),1)):u("",!0)]),l("div",null,[l("label",Ar,c(e.$t("inventory.categories.name_persian")),1),_(l("input",{id:"name_persian","onUpdate:modelValue":t[2]||(t[2]=e=>v.name_persian=e),type:"text",dir:"rtl",class:"mt-1 block w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white sm:text-sm",placeholder:e.$t("inventory.categories.name_persian_placeholder")},null,8,zr),[[w,v.name_persian]]),p.value.name_persian?(g(),o("p",Er,c(p.value.name_persian[0]),1)):u("",!0)]),l("div",null,[l("label",Pr,c(e.$t("inventory.categories.code"))+" * ",1),_(l("input",{id:"code","onUpdate:modelValue":t[3]||(t[3]=e=>v.code=e),type:"text",required:"",class:"mt-1 block w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white sm:text-sm",placeholder:e.$t("inventory.categories.code_placeholder")},null,8,Or),[[w,v.code]]),p.value.code?(g(),o("p",Nr,c(p.value.code[0]),1)):u("",!0)]),l("div",null,[l("label",Hr,c(e.$t("inventory.categories.parent_category")),1),n(Xa,{id:"parent_id",modelValue:v.parent_id,"onUpdate:modelValue":t[4]||(t[4]=e=>v.parent_id=e),"exclude-id":null==(a=e.category)?void 0:a.id,placeholder:e.$t("inventory.categories.select_parent"),"initial-parent-id":e.parentId},null,8,["modelValue","exclude-id","placeholder","initial-parent-id"]),p.value.parent_id?(g(),o("p",Fr,c(p.value.parent_id[0]),1)):u("",!0)]),l("div",null,[l("label",Br,c(e.$t("inventory.categories.default_gold_purity")),1),n(lr,{id:"default_gold_purity",modelValue:v.default_gold_purity,"onUpdate:modelValue":t[5]||(t[5]=e=>v.default_gold_purity=e),placeholder:e.$t("inventory.categories.gold_purity_placeholder")},null,8,["modelValue","placeholder"]),p.value.default_gold_purity?(g(),o("p",Gr,c(p.value.default_gold_purity[0]),1)):u("",!0)]),l("div",null,[l("label",Jr,c(e.$t("inventory.categories.sort_order")),1),_(l("input",{id:"sort_order","onUpdate:modelValue":t[6]||(t[6]=e=>v.sort_order=e),type:"number",min:"0",class:"mt-1 block w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white sm:text-sm"},null,512),[[w,v.sort_order,void 0,{number:!0}]]),p.value.sort_order?(g(),o("p",Kr,c(p.value.sort_order[0]),1)):u("",!0)])]),l("div",null,[l("label",Qr,c(e.$t("inventory.categories.image")),1),n(kr,{modelValue:v.image,"onUpdate:modelValue":t[7]||(t[7]=e=>v.image=e),"current-image":null==(r=e.category)?void 0:r.image_path,onUploaded:f,onRemoved:h},null,8,["modelValue","current-image"]),p.value.image?(g(),o("p",Wr,c(p.value.image[0]),1)):u("",!0)]),l("div",Yr,[l("div",null,[l("label",Xr,c(e.$t("inventory.categories.description")),1),_(l("textarea",{id:"description","onUpdate:modelValue":t[8]||(t[8]=e=>v.description=e),rows:"3",class:"mt-1 block w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white sm:text-sm",placeholder:e.$t("inventory.categories.description_placeholder")},null,8,Zr),[[w,v.description]]),p.value.description?(g(),o("p",ei,c(p.value.description[0]),1)):u("",!0)]),l("div",null,[l("label",ti,c(e.$t("inventory.categories.description_persian")),1),_(l("textarea",{id:"description_persian","onUpdate:modelValue":t[9]||(t[9]=e=>v.description_persian=e),rows:"3",dir:"rtl",class:"mt-1 block w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white sm:text-sm",placeholder:e.$t("inventory.categories.description_persian_placeholder")},null,8,ai),[[w,v.description_persian]]),p.value.description_persian?(g(),o("p",ri,c(p.value.description_persian[0]),1)):u("",!0)])]),l("div",ii,[_(l("input",{id:"is_active","onUpdate:modelValue":t[10]||(t[10]=e=>v.is_active=e),type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[V,v.is_active]]),l("label",si,c(e.$t("inventory.categories.is_active")),1)])]),l("div",oi,[l("button",{type:"button",onClick:t[11]||(t[11]=t=>e.$emit("close")),class:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},c(e.$t("common.cancel")),1),l("button",{type:"submit",disabled:y.value,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed"},[y.value?(g(),o("span",ni,t[12]||(t[12]=[l("svg",{class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},[l("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),l("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):u("",!0),m(" "+c(e.isEdit?e.$t("common.update"):e.$t("common.create")),1)],8,li)])],32)])])])}}}),ci={class:"space-y-6"},ui={class:"sm:flex sm:items-center sm:justify-between"},mi={class:"sm:flex-auto"},gi={class:"text-lg font-medium text-gray-900 dark:text-white"},yi={class:"mt-1 text-sm text-gray-700 dark:text-gray-300"},pi={class:"mt-4 sm:mt-0 sm:flex-none space-x-3 flex items-center"},xi={class:"text-sm text-gray-500 dark:text-gray-400"},vi={class:"bg-white dark:bg-gray-800 shadow rounded-lg"},bi={class:"px-4 py-5 sm:p-6"},fi={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},hi={for:"search",class:"sr-only"},ki={class:"relative"},_i={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},wi=["placeholder"],$i={for:"parent-filter",class:"sr-only"},Ci={value:""},qi={value:"main"},Mi={value:"with_subcategories"},ji={class:"flex space-x-2"},Ti=s({__name:"CategoryManagement",setup(e){const t=ae(),{currentLanguage:r,isRTL:s,getLocalizedCategoryName:y}=te();U();const p=i(""),v=i(""),b=i(new Set),f=i(!1),h=i(!1),C=i(!1),q=i(null),M=i(null),j=a(()=>{let e=t.categories||[];if(p.value){const t=p.value.toLowerCase();e=e.filter(e=>{var a,r,i;return(null==(a=e.name)?void 0:a.toLowerCase().includes(t))||(null==(r=e.name_persian)?void 0:r.toLowerCase().includes(t))||(null==(i=e.code)?void 0:i.toLowerCase().includes(t))})}return"main"===v.value?e=e.filter(e=>!e.parent_id):"with_subcategories"===v.value&&(e=e.filter(e=>e.has_children)),e}),T=e=>{q.value=e,h.value=!0},V=e=>{q.value=e,C.value=!0},S=e=>{M.value=e.id,f.value=!0},I=async()=>{if(q.value)try{await t.deleteCategory(q.value.id),C.value=!1,q.value=null}catch(e){}},R=async e=>{try{await t.reorderCategories(e)}catch(a){}},L=e=>{b.value.has(e)?b.value.delete(e):b.value.add(e)},D=()=>{var e;const a=(null==(e=t.categories)?void 0:e.map(e=>e.id))||[];b.value=new Set(a)},A=()=>{b.value.clear()},z=()=>{E(),t.fetchCategories()},E=()=>{f.value=!1,h.value=!1,q.value=null,M.value=null};return x(async()=>{await t.fetchCategories()}),(e,a)=>{var i;return g(),o("div",ci,[l("div",ui,[l("div",mi,[l("h2",gi,c(e.$t("inventory.categories.title")),1),l("p",yi,c(e.$t("inventory.categories.description")),1)]),l("div",pi,[l("div",xi,c("fa"===d(r)?"فارسی":"English"),1),l("button",{onClick:a[0]||(a[0]=e=>f.value=!0),type:"button",class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},[n(d(N),{class:"h-4 w-4 mr-2"}),m(" "+c(e.$t("inventory.categories.add_category")),1)])])]),l("div",vi,[l("div",bi,[l("div",fi,[l("div",null,[l("label",hi,c(e.$t("inventory.categories.search_placeholder")),1),l("div",ki,[l("div",_i,[n(d(B),{class:"h-5 w-5 text-gray-400"})]),_(l("input",{id:"search","onUpdate:modelValue":a[1]||(a[1]=e=>p.value=e),type:"text",placeholder:e.$t("inventory.categories.search_placeholder"),class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white dark:bg-gray-700 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary-500 focus:border-primary-500 text-sm"},null,8,wi),[[w,p.value]])])]),l("div",null,[l("label",$i,c(e.$t("inventory.categories.filter_by_parent")),1),_(l("select",{id:"parent-filter","onUpdate:modelValue":a[2]||(a[2]=e=>v.value=e),class:"block w-full px-3 py-2 border border-gray-300 rounded-md leading-5 bg-white dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500 text-sm"},[l("option",Ci,c(e.$t("inventory.categories.show_all")),1),l("option",qi,c(e.$t("inventory.categories.show_main_only")),1),l("option",Mi,c(e.$t("inventory.categories.show_subcategories")),1)],512),[[$,v.value]])]),l("div",ji,[l("button",{onClick:D,type:"button",class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},c(e.$t("inventory.categories.expand_all")),1),l("button",{onClick:A,type:"button",class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},c(e.$t("inventory.categories.collapse_all")),1)])])])]),n(Ja,{categories:j.value,"expanded-nodes":b.value,loading:d(t).loading.categories,onEdit:T,onDelete:V,onReorder:R,onToggleExpand:L,onCreateSubcategory:S},null,8,["categories","expanded-nodes","loading"]),f.value||h.value?(g(),k(di,{key:0,category:q.value,"is-edit":h.value,"parent-id":M.value,onClose:E,onSaved:z},null,8,["category","is-edit","parent-id"])):u("",!0),C.value?(g(),k(pe,{key:1,title:e.$t("inventory.categories.delete_category"),message:e.$t("inventory.categories.delete_confirmation",{name:null==(i=q.value)?void 0:i.name}),loading:d(t).loading.deleting,onConfirm:I,onCancel:a[3]||(a[3]=e=>C.value=!1)},null,8,["title","message","loading"])):u("",!0)])}}}),Vi={class:"fixed inset-0 z-50 overflow-y-auto"},Si={class:"flex min-h-screen items-center justify-center p-4"},Ii={class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full"},Ri={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},Ui={class:"flex items-center justify-between"},Li={class:"text-lg font-medium text-gray-900 dark:text-white"},Di={class:"space-y-4"},Ai={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},zi=["placeholder"],Ei={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},Pi={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Oi={value:""},Ni=["value"],Hi={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},Fi={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Bi={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},Gi={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Ji=["placeholder"],Ki={class:"flex items-center"},Qi={class:"ml-2 block text-sm text-gray-900 dark:text-white"},Wi={class:"text-xs text-gray-500 dark:text-gray-400"},Yi={class:"mt-6 flex justify-end space-x-3"},Xi=["disabled"],Zi={key:0,class:"flex items-center"},es={key:1},ts=s({__name:"CreateAuditModal",emits:["close","created"],setup(e,{emit:t}){const a=t,r=ae(),s=i(!1),y=i({}),p=j({audit_number:"",location_id:"",audit_date:(new Date).toISOString().split("T")[0],notes:"",auto_start:!1}),b=async()=>{var e,t;s.value=!0,y.value={};try{const e={...p,location_id:p.location_id||null},t=await r.createAudit(e);t&&p.auto_start&&await r.startAudit(t.id),a("created",t)}catch(i){(null==(t=null==(e=i.response)?void 0:e.data)?void 0:t.errors)&&(y.value=i.response.data.errors)}finally{s.value=!1}};return x(()=>{(()=>{const e=new Date,t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),i=String(e.getHours()).padStart(2,"0")+String(e.getMinutes()).padStart(2,"0");p.audit_number=`AUD-${t}${a}${r}-${i}`})()}),(e,t)=>(g(),o("div",Vi,[l("div",Si,[l("div",{class:"fixed inset-0 bg-black bg-opacity-25",onClick:t[0]||(t[0]=t=>e.$emit("close"))}),l("div",Ii,[l("div",Ri,[l("div",Ui,[l("h3",Li,c(e.$t("inventory.create_audit")),1),l("button",{onClick:t[1]||(t[1]=t=>e.$emit("close")),class:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"},[n(d(G),{class:"h-6 w-6"})])])]),l("form",{onSubmit:T(b,["prevent"]),class:"p-6"},[l("div",Di,[l("div",null,[l("label",Ai,c(e.$t("inventory.audit_number"))+" * ",1),_(l("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>p.audit_number=e),type:"text",required:"",class:v(["block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",y.value.audit_number?"border-red-300 focus:border-red-500 focus:ring-red-500":""]),placeholder:e.$t("inventory.audit_number_placeholder")},null,10,zi),[[w,p.audit_number]]),y.value.audit_number?(g(),o("p",Ei,c(y.value.audit_number[0]),1)):u("",!0)]),l("div",null,[l("label",Pi,c(e.$t("inventory.location")),1),_(l("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>p.location_id=e),class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[l("option",Oi,c(e.$t("inventory.all_locations")),1),(g(!0),o(f,null,h(d(r).locations,e=>(g(),o("option",{key:e.id,value:e.id},c(e.name),9,Ni))),128))],512),[[$,p.location_id]]),l("p",Hi,c(e.$t("inventory.location_audit_help")),1)]),l("div",null,[l("label",Fi,c(e.$t("inventory.audit_date"))+" * ",1),_(l("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>p.audit_date=e),type:"date",required:"",class:v(["block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",y.value.audit_date?"border-red-300 focus:border-red-500 focus:ring-red-500":""])},null,2),[[w,p.audit_date]]),y.value.audit_date?(g(),o("p",Bi,c(y.value.audit_date[0]),1)):u("",!0)]),l("div",null,[l("label",Gi,c(e.$t("inventory.notes")),1),_(l("textarea",{"onUpdate:modelValue":t[5]||(t[5]=e=>p.notes=e),rows:"3",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:e.$t("inventory.audit_notes_placeholder")},null,8,Ji),[[w,p.notes]])]),l("div",Ki,[_(l("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>p.auto_start=e),type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[V,p.auto_start]]),l("label",Qi,c(e.$t("inventory.auto_start_audit")),1)]),l("p",Wi,c(e.$t("inventory.auto_start_help")),1)]),l("div",Yi,[l("button",{type:"button",onClick:t[7]||(t[7]=t=>e.$emit("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},c(e.$t("common.cancel")),1),l("button",{type:"submit",disabled:s.value,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed"},[s.value?(g(),o("span",Zi,[t[8]||(t[8]=l("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},[l("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),l("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),m(" "+c(e.$t("common.creating")),1)])):(g(),o("span",es,c(e.$t("inventory.create_audit")),1))],8,Xi)])],32)])])]))}}),as={class:"fixed inset-0 z-50 overflow-y-auto"},rs={class:"flex min-h-screen items-center justify-center p-4"},is={class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto"},ss={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},os={class:"flex items-center justify-between"},ls={class:"text-lg font-medium text-gray-900 dark:text-white"},ns={class:"text-sm text-gray-500 dark:text-gray-400"},ds={class:"flex items-center space-x-2"},cs={class:"p-6"},us={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},ms={class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg"},gs={class:"text-sm font-medium text-blue-600 dark:text-blue-400"},ys={class:"text-2xl font-bold text-blue-900 dark:text-blue-100"},ps={class:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg"},xs={class:"text-sm font-medium text-green-600 dark:text-green-400"},vs={class:"text-2xl font-bold text-green-900 dark:text-green-100"},bs={class:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg"},fs={class:"text-sm font-medium text-yellow-600 dark:text-yellow-400"},hs={class:"text-2xl font-bold text-yellow-900 dark:text-yellow-100"},ks={class:"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg"},_s={class:"text-sm font-medium text-red-600 dark:text-red-400"},ws={class:"text-2xl font-bold text-red-900 dark:text-red-100"},$s={class:"mb-6"},Cs={class:"flex justify-between text-sm text-gray-600 dark:text-gray-400 mb-2"},qs={class:"w-full bg-gray-200 rounded-full h-2 dark:bg-gray-700"},Ms={key:0,class:"mb-6 flex space-x-3"},js=["disabled"],Ts=["disabled"],Vs={class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden"},Ss={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},Is={class:"text-lg font-medium text-gray-900 dark:text-white"},Rs={key:0,class:"p-6"},Us={class:"animate-pulse space-y-4"},Ls={key:1,class:"overflow-x-auto"},Ds={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},As={class:"bg-gray-50 dark:bg-gray-900"},zs={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Es={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Ps={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Os={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Ns={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Hs={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Fs={key:0,class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Bs={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Gs={class:"px-6 py-4 whitespace-nowrap"},Js={class:"flex items-center"},Ks={class:"flex-shrink-0 h-10 w-10"},Qs={class:"h-10 w-10 rounded-lg bg-gray-200 dark:bg-gray-600 flex items-center justify-center"},Ws={class:"ml-4"},Ys={class:"text-sm font-medium text-gray-900 dark:text-white"},Xs={class:"text-sm text-gray-500 dark:text-gray-400"},Zs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},eo={class:"px-6 py-4 whitespace-nowrap"},to={key:0},ao=["onUpdate:modelValue","onBlur"],ro={key:1,class:"text-sm text-gray-900 dark:text-white"},io={class:"px-6 py-4 whitespace-nowrap"},so={key:1,class:"text-sm text-gray-500 dark:text-gray-400"},oo={class:"px-6 py-4 whitespace-nowrap"},lo={key:1,class:"text-sm text-gray-500 dark:text-gray-400"},no={class:"px-6 py-4 whitespace-nowrap"},co={key:0,class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},uo=["onClick"],mo=s({__name:"AuditDetailsModal",props:{audit:{}},emits:["close","updated"],setup(e,{emit:t}){const r=e,s=t,y=ae(),{formatNumber:p,formatCurrency:k}=U(),$=i({starting:!1,completing:!1,updating:!1}),C=a(()=>{var e,t;return(null==(t=null==(e=r.audit)?void 0:e.audit_items)?void 0:t.filter(e=>e.is_counted).length)||0}),q=e=>{if(!e)return"";const t={pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",in_progress:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",completed:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",cancelled:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"};return t[e]||t.pending},M=async()=>{if(r.audit){$.value.starting=!0;try{await y.startAudit(r.audit.id),s("updated")}catch(e){}finally{$.value.starting=!1}}},j=async()=>{if(r.audit){$.value.completing=!0;try{await y.completeAudit(r.audit.id),s("updated")}catch(e){}finally{$.value.completing=!1}}};return x(async()=>{r.audit&&await y.fetchAudit(r.audit.id)}),(e,t)=>{var a,i,s,x,T,V,S,I,R,U,D,A,z,E,P,O,N,H,F;return g(),o("div",as,[l("div",rs,[l("div",{class:"fixed inset-0 bg-black bg-opacity-25",onClick:t[0]||(t[0]=t=>e.$emit("close"))}),l("div",is,[l("div",ss,[l("div",os,[l("div",null,[l("h3",ls,c(null==(a=e.audit)?void 0:a.audit_number),1),l("p",ns,c((null==(s=null==(i=e.audit)?void 0:i.location)?void 0:s.name)||e.$t("inventory.all_locations"))+" - "+c((F=null==(x=e.audit)?void 0:x.audit_date,F?new Date(F).toLocaleDateString():"-")),1)]),l("div",ds,[l("span",{class:v(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",q(null==(T=e.audit)?void 0:T.status)])},c(e.$t(`inventory.audit_status.${null==(V=e.audit)?void 0:V.status}`)),3),l("button",{onClick:t[1]||(t[1]=t=>e.$emit("close")),class:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"},[n(d(G),{class:"h-6 w-6"})])])])]),l("div",cs,[l("div",us,[l("div",ms,[l("div",gs,c(e.$t("inventory.total_items")),1),l("div",ys,c((null==(I=null==(S=e.audit)?void 0:S.audit_items)?void 0:I.length)||0),1)]),l("div",ps,[l("div",xs,c(e.$t("inventory.counted_items")),1),l("div",vs,c(C.value),1)]),l("div",bs,[l("div",fs,c(e.$t("inventory.items_with_variance")),1),l("div",hs,c((null==(R=e.audit)?void 0:R.items_with_variance_count)||0),1)]),l("div",ks,[l("div",_s,c(e.$t("inventory.total_variance_value")),1),l("div",ws,c(d(k)((null==(U=e.audit)?void 0:U.total_variance_value)||0)),1)])]),l("div",$s,[l("div",Cs,[l("span",null,c(e.$t("inventory.audit_progress")),1),l("span",null,c(Math.round((null==(D=e.audit)?void 0:D.completion_percentage)||0))+"%",1)]),l("div",qs,[l("div",{class:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:b({width:`${(null==(A=e.audit)?void 0:A.completion_percentage)||0}%`})},null,4)])]),"completed"!==(null==(z=e.audit)?void 0:z.status)?(g(),o("div",Ms,["pending"===(null==(E=e.audit)?void 0:E.status)?(g(),o("button",{key:0,onClick:M,disabled:$.value.starting,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50"},[n(d(J),{class:"h-4 w-4 mr-2"}),m(" "+c(e.$t("inventory.start_audit")),1)],8,js)):u("",!0),"in_progress"===(null==(P=e.audit)?void 0:P.status)&&100===((null==(O=e.audit)?void 0:O.completion_percentage)||0)?(g(),o("button",{key:1,onClick:j,disabled:$.value.completing,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50"},[n(d(K),{class:"h-4 w-4 mr-2"}),m(" "+c(e.$t("inventory.complete_audit")),1)],8,Ts)):u("",!0)])):u("",!0),l("div",Vs,[l("div",Ss,[l("h4",Is,c(e.$t("inventory.audit_items")),1)]),d(y).loading.audit?(g(),o("div",Rs,[l("div",Us,[(g(),o(f,null,h(5,e=>l("div",{key:e,class:"h-16 bg-gray-200 dark:bg-gray-700 rounded"})),64))])])):(g(),o("div",Ls,[l("table",Ds,[l("thead",As,[l("tr",null,[l("th",zs,c(e.$t("inventory.item")),1),l("th",Es,c(e.$t("inventory.expected_quantity")),1),l("th",Ps,c(e.$t("inventory.actual_quantity")),1),l("th",Os,c(e.$t("inventory.variance")),1),l("th",Ns,c(e.$t("inventory.variance_value")),1),l("th",Hs,c(e.$t("common.status")),1),"in_progress"===(null==(N=e.audit)?void 0:N.status)?(g(),o("th",Fs,c(e.$t("common.actions")),1)):u("",!0)])]),l("tbody",Bs,[(g(!0),o(f,null,h(null==(H=e.audit)?void 0:H.audit_items,t=>{var a,i,s,m,x;return g(),o("tr",{key:t.id,class:v(["hover:bg-gray-50 dark:hover:bg-gray-700",0!==t.variance?"bg-yellow-50 dark:bg-yellow-900/10":""])},[l("td",Gs,[l("div",Js,[l("div",Ks,[l("div",Qs,[n(d(L),{class:"h-6 w-6 text-gray-400"})])]),l("div",Ws,[l("div",Ys,c((null==(a=t.inventory_item)?void 0:a.localized_name)||(null==(i=t.inventory_item)?void 0:i.name)),1),l("div",Xs,c(null==(s=t.inventory_item)?void 0:s.sku),1)])])]),l("td",Zs,c(d(p)(t.expected_quantity)),1),l("td",eo,["in_progress"!==(null==(m=e.audit)?void 0:m.status)||t.is_counted?(g(),o("div",ro,c(null!==t.actual_quantity&&void 0!==t.actual_quantity?d(p)(t.actual_quantity):"-"),1)):(g(),o("div",to,[_(l("input",{"onUpdate:modelValue":e=>t.actual_quantity=e,onBlur:e=>(async e=>{if(r.audit&&!$.value.updating){$.value.updating=!0;try{await y.updateAuditItem(r.audit.id,e.inventory_item_id,{actual_quantity:e.actual_quantity}),r.audit&&await y.fetchAudit(r.audit.id)}catch(t){}finally{$.value.updating=!1}}})(t),type:"number",step:"0.001",min:"0",class:"block w-20 rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,40,ao),[[w,t.actual_quantity,void 0,{number:!0}]])]))]),l("td",io,[null!==t.variance?(g(),o("span",{key:0,class:v(["text-sm font-medium",(t.variance||0)>0?"text-green-600 dark:text-green-400":(t.variance||0)<0?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"])},c((t.variance||0)>0?"+":"")+c(d(p)(t.variance||0)),3)):(g(),o("span",so,"-"))]),l("td",oo,[null!==t.variance_value?(g(),o("span",{key:0,class:v(["text-sm font-medium",(t.variance_value||0)>0?"text-green-600 dark:text-green-400":(t.variance_value||0)<0?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"])},c((t.variance_value||0)>0?"+":"")+c(d(k)(t.variance_value||0)),3)):(g(),o("span",lo,"-"))]),l("td",no,[l("span",{class:v(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",t.is_counted?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"])},c(t.is_counted?e.$t("inventory.counted"):e.$t("inventory.pending")),3)]),"in_progress"===(null==(x=e.audit)?void 0:x.status)?(g(),o("td",co,[t.is_counted?u("",!0):(g(),o("button",{key:0,onClick:e=>(async e=>{if(r.audit)try{await y.updateAuditItem(r.audit.id,e.inventory_item_id,{actual_quantity:e.actual_quantity||e.expected_quantity,is_counted:!0}),r.audit&&await y.fetchAudit(r.audit.id)}catch(t){}})(t),class:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300"},[n(d(K),{class:"h-4 w-4"})],8,uo))])):u("",!0)],2)}),128))])])]))])])])])])}}}),go={class:"space-y-6"},yo={class:"sm:flex sm:items-center sm:justify-between"},po={class:"sm:flex-auto"},xo={class:"text-lg font-medium text-gray-900 dark:text-white"},vo={class:"mt-1 text-sm text-gray-700 dark:text-gray-300"},bo={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},fo={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-4"},ho={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ko={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},_o={value:""},wo={value:"pending"},$o={value:"in_progress"},Co={value:"completed"},qo={value:"cancelled"},Mo={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},jo={value:""},To=["value"],Vo={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},So={class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden"},Io={key:0,class:"p-6"},Ro={class:"animate-pulse space-y-4"},Uo={key:1,class:"p-6 text-center"},Lo={class:"mt-2 text-sm font-medium text-gray-900 dark:text-white"},Do={class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},Ao={class:"mt-6"},zo={key:2,class:"overflow-x-auto"},Eo={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Po={class:"bg-gray-50 dark:bg-gray-900"},Oo={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},No={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Ho={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Fo={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Bo={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Go={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Jo={class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Ko={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Qo={class:"px-6 py-4 whitespace-nowrap"},Wo={class:"text-sm font-medium text-gray-900 dark:text-white"},Yo={class:"text-sm text-gray-500 dark:text-gray-400"},Xo={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Zo={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},el={class:"px-6 py-4 whitespace-nowrap"},tl={class:"px-6 py-4 whitespace-nowrap"},al={class:"flex items-center"},rl={class:"w-16 bg-gray-200 rounded-full h-2 dark:bg-gray-700"},il={class:"ml-2 text-sm text-gray-900 dark:text-white"},sl={class:"px-6 py-4 whitespace-nowrap"},ol={class:"text-sm text-gray-900 dark:text-white"},ll={class:"text-sm text-gray-500 dark:text-gray-400"},nl={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},dl={class:"flex justify-end space-x-2"},cl=["onClick"],ul=["onClick"],ml=["onClick"],gl=["onClick"],yl=s({__name:"StockAuditInterface",setup(e){const t=ae(),{formatCurrency:a}=U(),r=i(!1),s=i(!1),y=i(!1),p=i(null),C=i({status:"",location_id:"",date_from:""}),q=e=>{const t={pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",in_progress:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",completed:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",cancelled:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"};return t[e]||t.pending},M=()=>{const e={...C.value};Object.keys(e).forEach(t=>{""===e[t]&&delete e[t]}),t.fetchAudits(e)},j=async()=>{if(p.value)try{y.value=!1,p.value=null,M()}catch(e){}},T=()=>{r.value=!1,M()},V=()=>{s.value=!1,M()};return x(()=>{M()}),(e,i)=>{var x;return g(),o("div",go,[l("div",yo,[l("div",po,[l("h2",xo,c(e.$t("inventory.stock_audits")),1),l("p",vo,c(e.$t("inventory.stock_audits_description")),1)]),l("div",bo,[l("button",{onClick:i[0]||(i[0]=e=>r.value=!0),type:"button",class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},[n(d(N),{class:"h-4 w-4 mr-2"}),m(" "+c(e.$t("inventory.create_audit")),1)])])]),l("div",fo,[l("div",ho,[l("div",null,[l("label",ko,c(e.$t("common.status")),1),_(l("select",{"onUpdate:modelValue":i[1]||(i[1]=e=>C.value.status=e),onChange:M,class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[l("option",_o,c(e.$t("common.all_statuses")),1),l("option",wo,c(e.$t("inventory.audit_status.pending")),1),l("option",$o,c(e.$t("inventory.audit_status.in_progress")),1),l("option",Co,c(e.$t("inventory.audit_status.completed")),1),l("option",qo,c(e.$t("inventory.audit_status.cancelled")),1)],544),[[$,C.value.status]])]),l("div",null,[l("label",Mo,c(e.$t("inventory.location")),1),_(l("select",{"onUpdate:modelValue":i[2]||(i[2]=e=>C.value.location_id=e),onChange:M,class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[l("option",jo,c(e.$t("common.all_locations")),1),(g(!0),o(f,null,h(d(t).locations,e=>(g(),o("option",{key:e.id,value:e.id},c(e.name),9,To))),128))],544),[[$,C.value.location_id]])]),l("div",null,[l("label",Vo,c(e.$t("common.date_range")),1),_(l("input",{"onUpdate:modelValue":i[3]||(i[3]=e=>C.value.date_from=e),type:"date",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[w,C.value.date_from]])])])]),l("div",So,[d(t).loading.audits?(g(),o("div",Io,[l("div",Ro,[(g(),o(f,null,h(3,e=>l("div",{key:e,class:"h-20 bg-gray-200 dark:bg-gray-700 rounded"})),64))])])):0===d(t).audits.length?(g(),o("div",Uo,[n(d(Q),{class:"mx-auto h-12 w-12 text-gray-400"}),l("h3",Lo,c(e.$t("inventory.no_audits")),1),l("p",Do,c(e.$t("inventory.no_audits_description")),1),l("div",Ao,[l("button",{onClick:i[4]||(i[4]=e=>r.value=!0),type:"button",class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[n(d(N),{class:"h-4 w-4 mr-2"}),m(" "+c(e.$t("inventory.create_first_audit")),1)])])])):(g(),o("div",zo,[l("table",Eo,[l("thead",Po,[l("tr",null,[l("th",Oo,c(e.$t("inventory.audit_number")),1),l("th",No,c(e.$t("inventory.location")),1),l("th",Ho,c(e.$t("inventory.audit_date")),1),l("th",Fo,c(e.$t("common.status")),1),l("th",Bo,c(e.$t("inventory.progress")),1),l("th",Go,c(e.$t("inventory.variance")),1),l("th",Jo,c(e.$t("common.actions")),1)])]),l("tbody",Ko,[(g(!0),o(f,null,h(d(t).audits,r=>{var i,m,x;return g(),o("tr",{key:r.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[l("td",Qo,[l("div",Wo,c(r.audit_number),1),l("div",Yo,c((null==(i=r.auditor)?void 0:i.name)||"-"),1)]),l("td",Xo,c((null==(m=r.location)?void 0:m.name)||e.$t("common.all_locations")),1),l("td",Zo,c((x=r.audit_date,new Date(x).toLocaleDateString())),1),l("td",el,[l("span",{class:v(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",q(r.status)])},c(e.$t(`inventory.audit_status.${r.status}`)),3)]),l("td",tl,[l("div",al,[l("div",rl,[l("div",{class:"bg-primary-600 h-2 rounded-full",style:b({width:`${r.completion_percentage||0}%`})},null,4)]),l("span",il,c(Math.round(r.completion_percentage||0))+"% ",1)])]),l("td",sl,[l("div",ol,c(r.items_with_variance_count||0)+" "+c(e.$t("inventory.items")),1),l("div",ll,c(d(a)(r.total_variance_value||0)),1)]),l("td",nl,[l("div",dl,[l("button",{onClick:e=>(e=>{p.value=e,s.value=!0})(r),class:"text-primary-600 hover:text-primary-900 dark:text-primary-400 dark:hover:text-primary-300"},[n(d(D),{class:"h-4 w-4"})],8,cl),"pending"===r.status?(g(),o("button",{key:0,onClick:e=>(async e=>{try{await t.startAudit(e.id),M()}catch(a){}})(r),class:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300"},[n(d(J),{class:"h-4 w-4"})],8,ul)):u("",!0),"in_progress"===r.status?(g(),o("button",{key:1,onClick:e=>(async e=>{try{await t.completeAudit(e.id),M()}catch(a){}})(r),class:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300"},[n(d(K),{class:"h-4 w-4"})],8,ml)):u("",!0),["pending","in_progress"].includes(r.status)?(g(),o("button",{key:2,onClick:e=>(e=>{p.value=e,y.value=!0})(r),class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"},[n(d(z),{class:"h-4 w-4"})],8,gl)):u("",!0)])])])}),128))])])]))]),r.value?(g(),k(ts,{key:0,onClose:i[5]||(i[5]=e=>r.value=!1),onCreated:T})):u("",!0),s.value?(g(),k(mo,{key:1,audit:p.value,onClose:i[6]||(i[6]=e=>s.value=!1),onUpdated:V},null,8,["audit"])):u("",!0),y.value?(g(),k(pe,{key:2,title:e.$t("inventory.delete_audit"),message:e.$t("inventory.delete_audit_confirmation",{number:null==(x=p.value)?void 0:x.audit_number}),loading:d(t).loading.deleting,onConfirm:j,onCancel:i[7]||(i[7]=e=>y.value=!1)},null,8,["title","message","loading"])):u("",!0)])}}}),pl={class:"fixed inset-0 z-50 overflow-y-auto"},xl={class:"flex min-h-screen items-center justify-center p-4"},vl={class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full"},bl={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},fl={class:"flex items-center justify-between"},hl={class:"text-lg font-medium text-gray-900 dark:text-white"},kl={class:"space-y-4"},_l={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},wl={value:""},$l=["value"],Cl={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},ql={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Ml={value:""},jl={value:"in"},Tl={value:"out"},Vl={value:"transfer"},Sl={value:"adjustment"},Il={value:"wastage"},Rl={value:"production"},Ul={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},Ll={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Dl={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},Al={key:0},zl={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},El=["required"],Pl={value:""},Ol=["value"],Nl={key:1},Hl={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Fl=["required"],Bl={value:""},Gl=["value"],Jl={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Kl={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},Ql={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Wl=["placeholder"],Yl={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Xl=["placeholder"],Zl={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},en={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},tn={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},an={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},rn=["placeholder"],sn={class:"mt-6 flex justify-end space-x-3"},on=["disabled"],ln={key:0,class:"flex items-center"},nn={key:1},dn=s({__name:"CreateMovementModal",emits:["close","created"],setup(e,{emit:t}){const a=t,r=ae(),s=i(!1),y=i({}),p=j({inventory_item_id:"",type:"",quantity:0,from_location_id:"",to_location_id:"",unit_cost:null,batch_number:"",reference_type:"",reference_id:null,movement_date:(new Date).toISOString().slice(0,16),notes:""}),b=()=>{p.from_location_id="",p.to_location_id=""},k=async()=>{var e,t;s.value=!0,y.value={};try{const e={...p,inventory_item_id:Number(p.inventory_item_id),from_location_id:p.from_location_id?Number(p.from_location_id):null,to_location_id:p.to_location_id?Number(p.to_location_id):null,unit_cost:p.unit_cost||null,reference_id:p.reference_id||null},t=await r.createMovement(e);a("created",t)}catch(i){(null==(t=null==(e=i.response)?void 0:e.data)?void 0:t.errors)&&(y.value=i.response.data.errors)}finally{s.value=!1}};return x(async()=>{0===r.items.length&&await r.fetchItems(),0===r.locations.length&&await r.fetchLocations()}),(e,t)=>(g(),o("div",pl,[l("div",xl,[l("div",{class:"fixed inset-0 bg-black bg-opacity-25",onClick:t[0]||(t[0]=t=>e.$emit("close"))}),l("div",vl,[l("div",bl,[l("div",fl,[l("h3",hl,c(e.$t("inventory.add_movement")),1),l("button",{onClick:t[1]||(t[1]=t=>e.$emit("close")),class:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"},[n(d(G),{class:"h-6 w-6"})])])]),l("form",{onSubmit:T(k,["prevent"]),class:"p-6"},[l("div",kl,[l("div",null,[l("label",_l,c(e.$t("inventory.item"))+" * ",1),_(l("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>p.inventory_item_id=e),required:"",class:v(["block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",y.value.inventory_item_id?"border-red-300 focus:border-red-500 focus:ring-red-500":""])},[l("option",wl,c(e.$t("inventory.select_item")),1),(g(!0),o(f,null,h(d(r).items,e=>(g(),o("option",{key:e.id,value:e.id},c(e.localized_name||e.name)+" ("+c(e.sku)+") ",9,$l))),128))],2),[[$,p.inventory_item_id]]),y.value.inventory_item_id?(g(),o("p",Cl,c(y.value.inventory_item_id[0]),1)):u("",!0)]),l("div",null,[l("label",ql,c(e.$t("inventory.movement_type"))+" * ",1),_(l("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>p.type=e),onChange:b,required:"",class:v(["block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",y.value.type?"border-red-300 focus:border-red-500 focus:ring-red-500":""])},[l("option",Ml,c(e.$t("inventory.select_type")),1),l("option",jl,c(e.$t("inventory.movement_types.in")),1),l("option",Tl,c(e.$t("inventory.movement_types.out")),1),l("option",Vl,c(e.$t("inventory.movement_types.transfer")),1),l("option",Sl,c(e.$t("inventory.movement_types.adjustment")),1),l("option",Il,c(e.$t("inventory.movement_types.wastage")),1),l("option",Rl,c(e.$t("inventory.movement_types.production")),1)],34),[[$,p.type]]),y.value.type?(g(),o("p",Ul,c(y.value.type[0]),1)):u("",!0)]),l("div",null,[l("label",Ll,c(e.$t("inventory.quantity"))+" * ",1),_(l("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>p.quantity=e),type:"number",step:"0.001",min:"0",required:"",class:v(["block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",y.value.quantity?"border-red-300 focus:border-red-500 focus:ring-red-500":""])},null,2),[[w,p.quantity,void 0,{number:!0}]]),y.value.quantity?(g(),o("p",Dl,c(y.value.quantity[0]),1)):u("",!0)]),["out","transfer"].includes(p.type)?(g(),o("div",Al,[l("label",zl,c(e.$t("inventory.from_location"))+" * ",1),_(l("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>p.from_location_id=e),required:["out","transfer"].includes(p.type),class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[l("option",Pl,c(e.$t("inventory.select_location")),1),(g(!0),o(f,null,h(d(r).locations,e=>(g(),o("option",{key:e.id,value:e.id},c(e.name),9,Ol))),128))],8,El),[[$,p.from_location_id]])])):u("",!0),["in","transfer"].includes(p.type)?(g(),o("div",Nl,[l("label",Hl,c(e.$t("inventory.to_location"))+" * ",1),_(l("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>p.to_location_id=e),required:["in","transfer"].includes(p.type),class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[l("option",Bl,c(e.$t("inventory.select_location")),1),(g(!0),o(f,null,h(d(r).locations,e=>(g(),o("option",{key:e.id,value:e.id},c(e.name),9,Gl))),128))],8,Fl),[[$,p.to_location_id]])])):u("",!0),l("div",null,[l("label",Jl,c(e.$t("inventory.unit_cost")),1),_(l("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>p.unit_cost=e),type:"number",step:"0.01",min:"0",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[w,p.unit_cost,void 0,{number:!0}]]),l("p",Kl,c(e.$t("inventory.unit_cost_help")),1)]),l("div",null,[l("label",Ql,c(e.$t("inventory.batch_number")),1),_(l("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>p.batch_number=e),type:"text",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:e.$t("inventory.batch_number_placeholder")},null,8,Wl),[[w,p.batch_number]])]),l("div",null,[l("label",Yl,c(e.$t("inventory.reference")),1),_(l("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>p.reference_type=e),type:"text",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:e.$t("inventory.reference_placeholder")},null,8,Xl),[[w,p.reference_type]]),l("p",Zl,c(e.$t("inventory.reference_help")),1)]),l("div",null,[l("label",en,c(e.$t("inventory.movement_date"))+" * ",1),_(l("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>p.movement_date=e),type:"datetime-local",required:"",class:v(["block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",y.value.movement_date?"border-red-300 focus:border-red-500 focus:ring-red-500":""])},null,2),[[w,p.movement_date]]),y.value.movement_date?(g(),o("p",tn,c(y.value.movement_date[0]),1)):u("",!0)]),l("div",null,[l("label",an,c(e.$t("inventory.notes")),1),_(l("textarea",{"onUpdate:modelValue":t[11]||(t[11]=e=>p.notes=e),rows:"3",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:e.$t("inventory.movement_notes_placeholder")},null,8,rn),[[w,p.notes]])])]),l("div",sn,[l("button",{type:"button",onClick:t[12]||(t[12]=t=>e.$emit("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},c(e.$t("common.cancel")),1),l("button",{type:"submit",disabled:s.value,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed"},[s.value?(g(),o("span",ln,[t[13]||(t[13]=l("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},[l("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),l("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),m(" "+c(e.$t("common.creating")),1)])):(g(),o("span",nn,c(e.$t("inventory.add_movement")),1))],8,on)])],32)])])]))}}),cn={class:"fixed inset-0 z-50 overflow-y-auto"},un={class:"flex min-h-screen items-center justify-center p-4"},mn={class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full"},gn={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},yn={class:"flex items-center justify-between"},pn={class:"text-lg font-medium text-gray-900 dark:text-white"},xn={class:"text-sm text-gray-500 dark:text-gray-400"},vn={class:"flex items-center space-x-2"},bn={class:"p-6"},fn={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},hn={class:"space-y-4"},kn={class:"text-md font-medium text-gray-900 dark:text-white"},_n={class:"space-y-3"},wn={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},$n={class:"mt-1"},Cn={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},qn={class:"mt-1 text-lg font-semibold text-gray-900 dark:text-white"},Mn={key:0},jn={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Tn={class:"mt-1 text-sm text-gray-900 dark:text-white"},Vn={key:1},Sn={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},In={class:"mt-1 text-lg font-semibold text-blue-600 dark:text-blue-400"},Rn={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Un={class:"mt-1 text-sm text-gray-900 dark:text-white"},Ln={class:"space-y-4"},Dn={class:"text-md font-medium text-gray-900 dark:text-white"},An={class:"space-y-3"},zn={key:0},En={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Pn={class:"mt-1 text-sm text-gray-900 dark:text-white"},On={key:1},Nn={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Hn={class:"mt-1 text-sm text-gray-900 dark:text-white"},Fn={key:2},Bn={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Gn={class:"mt-1 text-sm text-gray-900 dark:text-white flex items-center"},Jn={class:"bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-xs"},Kn={class:"bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-xs"},Qn={class:"md:col-span-2 space-y-4"},Wn={class:"text-md font-medium text-gray-900 dark:text-white"},Yn={class:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4"},Xn={class:"flex items-center"},Zn={class:"flex-shrink-0 h-12 w-12"},ed={class:"h-12 w-12 rounded-lg bg-gray-200 dark:bg-gray-600 flex items-center justify-center"},td={class:"ml-4 flex-1"},ad={class:"text-sm font-medium text-gray-900 dark:text-white"},rd={class:"text-sm text-gray-500 dark:text-gray-400"},id={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},sd={key:0,class:"md:col-span-2 space-y-4"},od={class:"text-md font-medium text-gray-900 dark:text-white"},ld={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},nd={key:0},dd={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},cd={class:"mt-1 text-sm text-gray-900 dark:text-white font-mono"},ud={key:1},md={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},gd={class:"mt-1 text-sm text-gray-900 dark:text-white"},yd={key:0,class:"text-gray-500 dark:text-gray-400"},pd={key:2,class:"md:col-span-2"},xd={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},vd={class:"mt-1 text-sm text-gray-900 dark:text-white"},bd={class:"md:col-span-2 space-y-4"},fd={class:"text-md font-medium text-gray-900 dark:text-white"},hd={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},kd={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},_d={class:"mt-1 text-sm text-gray-900 dark:text-white"},wd={key:0},$d={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Cd={class:"mt-1 text-sm text-gray-900 dark:text-white"},qd={class:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-end"},Md=s({__name:"MovementDetailsModal",props:{movement:{}},emits:["close"],setup(e){const{formatNumber:t,formatCurrency:a}=U(),r=e=>e?new Date(e).toLocaleString():"-",i=e=>{if(!e)return"";const t={in:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",out:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",transfer:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",adjustment:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",wastage:"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400",production:"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400"};return t[e]||t.adjustment};return(e,s)=>{var y,p,x,b,f,h,k,_,w,$,C,q,M,j,T,V,S,I,R,U,D,A,z,E,P,O,N,H,F,B,J,K,Q,Y,X,Z,ee;return g(),o("div",cn,[l("div",un,[l("div",{class:"fixed inset-0 bg-black bg-opacity-25",onClick:s[0]||(s[0]=t=>e.$emit("close"))}),l("div",mn,[l("div",gn,[l("div",yn,[l("div",null,[l("h3",pn,c(e.$t("inventory.movement_details")),1),l("p",xn,c((null==(p=null==(y=e.movement)?void 0:y.inventory_item)?void 0:p.localized_name)||(null==(b=null==(x=e.movement)?void 0:x.inventory_item)?void 0:b.name)),1)]),l("div",vn,[l("span",{class:v(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",i(null==(f=e.movement)?void 0:f.type)])},c(e.$t(`inventory.movement_types.${null==(h=e.movement)?void 0:h.type}`)),3),l("button",{onClick:s[1]||(s[1]=t=>e.$emit("close")),class:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"},[n(d(G),{class:"h-6 w-6"})])])])]),l("div",bn,[l("div",fn,[l("div",hn,[l("h4",kn,c(e.$t("inventory.movement_information")),1),l("dl",_n,[l("div",null,[l("dt",wn,c(e.$t("inventory.movement_type")),1),l("dd",$n,[l("span",{class:v(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",i(null==(k=e.movement)?void 0:k.type)])},c(e.$t(`inventory.movement_types.${null==(_=e.movement)?void 0:_.type}`)),3)])]),l("div",null,[l("dt",Cn,c(e.$t("inventory.quantity")),1),l("dd",qn,[l("span",{class:v([(null==(w=e.movement)?void 0:w.is_inbound)?"text-green-600 dark:text-green-400":(null==($=e.movement)?void 0:$.is_outbound)?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"])},c((null==(C=e.movement)?void 0:C.is_inbound)?"+":(null==(q=e.movement)?void 0:q.is_outbound)?"-":"")+c(d(t)((null==(M=e.movement)?void 0:M.quantity)||0)),3)])]),(null==(j=e.movement)?void 0:j.unit_cost)?(g(),o("div",Mn,[l("dt",jn,c(e.$t("inventory.unit_cost")),1),l("dd",Tn,c(d(a)(e.movement.unit_cost)),1)])):u("",!0),(null==(T=e.movement)?void 0:T.total_value)?(g(),o("div",Vn,[l("dt",Sn,c(e.$t("inventory.total_value")),1),l("dd",In,c(d(a)(e.movement.total_value)),1)])):u("",!0),l("div",null,[l("dt",Rn,c(e.$t("inventory.movement_date")),1),l("dd",Un,c(r(null==(V=e.movement)?void 0:V.movement_date)),1)])])]),l("div",Ln,[l("h4",Dn,c(e.$t("inventory.location_information")),1),l("dl",An,[(null==(S=e.movement)?void 0:S.from_location)?(g(),o("div",zn,[l("dt",En,c(e.$t("inventory.from_location")),1),l("dd",Pn,c(e.movement.from_location.name),1)])):u("",!0),(null==(I=e.movement)?void 0:I.to_location)?(g(),o("div",On,[l("dt",Nn,c(e.$t("inventory.to_location")),1),l("dd",Hn,c(e.movement.to_location.name),1)])):u("",!0),"transfer"===(null==(R=e.movement)?void 0:R.type)&&(null==(U=e.movement)?void 0:U.from_location)&&(null==(D=e.movement)?void 0:D.to_location)?(g(),o("div",Fn,[l("dt",Bn,c(e.$t("inventory.transfer_direction")),1),l("dd",Gn,[l("span",Jn,c(e.movement.from_location.name),1),n(d(W),{class:"h-4 w-4 mx-2 text-gray-400"}),l("span",Kn,c(e.movement.to_location.name),1)])])):u("",!0)])]),l("div",Qn,[l("h4",Wn,c(e.$t("inventory.item_information")),1),l("div",Yn,[l("div",Xn,[l("div",Zn,[l("div",ed,[n(d(L),{class:"h-8 w-8 text-gray-400"})])]),l("div",td,[l("div",ad,c((null==(z=null==(A=e.movement)?void 0:A.inventory_item)?void 0:z.localized_name)||(null==(P=null==(E=e.movement)?void 0:E.inventory_item)?void 0:P.name)),1),l("div",rd,c(e.$t("inventory.sku"))+": "+c(null==(N=null==(O=e.movement)?void 0:O.inventory_item)?void 0:N.sku),1),(null==(F=null==(H=e.movement)?void 0:H.inventory_item)?void 0:F.category)?(g(),o("div",id,c(e.$t("inventory.category"))+": "+c(e.movement.inventory_item.category.name),1)):u("",!0)])])])]),(null==(B=e.movement)?void 0:B.batch_number)||(null==(J=e.movement)?void 0:J.reference_type)||(null==(K=e.movement)?void 0:K.notes)?(g(),o("div",sd,[l("h4",od,c(e.$t("inventory.additional_information")),1),l("dl",ld,[(null==(Q=e.movement)?void 0:Q.batch_number)?(g(),o("div",nd,[l("dt",dd,c(e.$t("inventory.batch_number")),1),l("dd",cd,c(e.movement.batch_number),1)])):u("",!0),(null==(Y=e.movement)?void 0:Y.reference_type)?(g(),o("div",ud,[l("dt",md,c(e.$t("inventory.reference")),1),l("dd",gd,[m(c(e.movement.reference_type)+" ",1),e.movement.reference_id?(g(),o("span",yd," (#"+c(e.movement.reference_id)+") ",1)):u("",!0)])])):u("",!0),(null==(X=e.movement)?void 0:X.notes)?(g(),o("div",pd,[l("dt",xd,c(e.$t("inventory.notes")),1),l("dd",vd,c(e.movement.notes),1)])):u("",!0)])])):u("",!0),l("div",bd,[l("h4",fd,c(e.$t("inventory.audit_information")),1),l("dl",hd,[l("div",null,[l("dt",kd,c(e.$t("common.created_at")),1),l("dd",_d,c(r(null==(Z=e.movement)?void 0:Z.created_at)),1)]),(null==(ee=e.movement)?void 0:ee.user)?(g(),o("div",wd,[l("dt",$d,c(e.$t("inventory.created_by")),1),l("dd",Cd,c(e.movement.user.name),1)])):u("",!0)])])])]),l("div",qd,[l("button",{onClick:s[2]||(s[2]=t=>e.$emit("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},c(e.$t("common.close")),1)])])])])}}}),jd={class:"space-y-6"},Td={class:"sm:flex sm:items-center sm:justify-between"},Vd={class:"sm:flex-auto"},Sd={class:"text-lg font-medium text-gray-900 dark:text-white"},Id={class:"mt-1 text-sm text-gray-700 dark:text-gray-300"},Rd={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},Ud={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-4"},Ld={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Dd={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Ad=["placeholder"],zd={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Ed={value:""},Pd={value:"in"},Od={value:"out"},Nd={value:"transfer"},Hd={value:"adjustment"},Fd={value:"wastage"},Bd={value:"production"},Gd={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Jd={value:""},Kd=["value"],Qd={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Wd={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Yd={class:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg"},Xd={class:"text-sm font-medium text-green-600 dark:text-green-400"},Zd={class:"text-2xl font-bold text-green-900 dark:text-green-100"},ec={class:"text-sm text-green-600 dark:text-green-400"},tc={class:"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg"},ac={class:"text-sm font-medium text-red-600 dark:text-red-400"},rc={class:"text-2xl font-bold text-red-900 dark:text-red-100"},ic={class:"text-sm text-red-600 dark:text-red-400"},sc={class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg"},oc={class:"text-sm font-medium text-blue-600 dark:text-blue-400"},lc={class:"text-2xl font-bold text-blue-900 dark:text-blue-100"},nc={class:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg"},dc={class:"text-sm font-medium text-yellow-600 dark:text-yellow-400"},cc={class:"text-2xl font-bold text-yellow-900 dark:text-yellow-100"},uc={class:"text-sm text-yellow-600 dark:text-yellow-400"},mc={class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden"},gc={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},yc={class:"text-lg font-medium text-gray-900 dark:text-white"},pc={key:0,class:"p-6"},xc={class:"animate-pulse space-y-4"},vc={key:1,class:"p-6 text-center"},bc={class:"mt-2 text-sm font-medium text-gray-900 dark:text-white"},fc={class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},hc={key:2,class:"overflow-x-auto"},kc={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},_c={class:"bg-gray-50 dark:bg-gray-900"},wc={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},$c={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Cc={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},qc={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Mc={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},jc={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Tc={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Vc={class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Sc={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Ic={class:"px-6 py-4 whitespace-nowrap"},Rc={class:"flex items-center"},Uc={class:"flex-shrink-0 h-10 w-10"},Lc={class:"h-10 w-10 rounded-lg bg-gray-200 dark:bg-gray-600 flex items-center justify-center"},Dc={class:"ml-4"},Ac={class:"text-sm font-medium text-gray-900 dark:text-white"},zc={class:"text-sm text-gray-500 dark:text-gray-400"},Ec={class:"px-6 py-4 whitespace-nowrap"},Pc={class:"px-6 py-4 whitespace-nowrap"},Oc={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Nc={key:0},Hc={class:"text-xs text-gray-500 dark:text-gray-400"},Fc={class:"text-xs text-gray-500 dark:text-gray-400"},Bc={key:1},Gc={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Jc={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Kc={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Qc={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Wc={class:"flex justify-end space-x-2"},Yc=["onClick"],Xc=s({__name:"MovementHistory",setup(e){const t=ae(),{formatNumber:r,formatCurrency:s}=U(),y=i(!1),p=i(!1),b=i(null),C=i({search:"",type:"",location_id:"",date_from:""}),q=a(()=>t.movements.filter(e=>e.is_inbound)),M=a(()=>t.movements.filter(e=>e.is_outbound)),j=a(()=>t.movements.filter(e=>e.is_transfer)),T=a(()=>t.movements.filter(e=>"adjustment"===e.type)),V=a(()=>q.value.reduce((e,t)=>e+(t.total_value||0),0)),S=a(()=>M.value.reduce((e,t)=>e+(t.total_value||0),0)),I=a(()=>T.value.reduce((e,t)=>e+(t.total_value||0),0)),R=e=>{const t={in:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",out:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",transfer:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",adjustment:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",wastage:"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400",production:"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400"};return t[e]||t.adjustment},A=((e,t)=>{let a;return function(...r){clearTimeout(a),a=setTimeout(()=>{clearTimeout(a),e(...r)},t)}})(()=>{z()},300),z=()=>{const e={...C.value};Object.keys(e).forEach(t=>{""===e[t]&&delete e[t]}),t.fetchMovements(e)},E=()=>{y.value=!1,z()};return x(()=>{z()}),(e,a)=>(g(),o("div",jd,[l("div",Td,[l("div",Vd,[l("h2",Sd,c(e.$t("inventory.movement_history")),1),l("p",Id,c(e.$t("inventory.movement_history_description")),1)]),l("div",Rd,[l("button",{onClick:a[0]||(a[0]=e=>y.value=!0),type:"button",class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},[n(d(N),{class:"h-4 w-4 mr-2"}),m(" "+c(e.$t("inventory.add_movement")),1)])])]),l("div",Ud,[l("div",Ld,[l("div",null,[l("label",Dd,c(e.$t("inventory.item")),1),_(l("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>C.value.search=e),onInput:a[2]||(a[2]=(...e)=>d(A)&&d(A)(...e)),type:"text",placeholder:e.$t("inventory.search_items"),class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,40,Ad),[[w,C.value.search]])]),l("div",null,[l("label",zd,c(e.$t("inventory.movement_type")),1),_(l("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>C.value.type=e),onChange:z,class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[l("option",Ed,c(e.$t("common.all_types")),1),l("option",Pd,c(e.$t("inventory.movement_types.in")),1),l("option",Od,c(e.$t("inventory.movement_types.out")),1),l("option",Nd,c(e.$t("inventory.movement_types.transfer")),1),l("option",Hd,c(e.$t("inventory.movement_types.adjustment")),1),l("option",Fd,c(e.$t("inventory.movement_types.wastage")),1),l("option",Bd,c(e.$t("inventory.movement_types.production")),1)],544),[[$,C.value.type]])]),l("div",null,[l("label",Gd,c(e.$t("inventory.location")),1),_(l("select",{"onUpdate:modelValue":a[4]||(a[4]=e=>C.value.location_id=e),onChange:z,class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[l("option",Jd,c(e.$t("common.all_locations")),1),(g(!0),o(f,null,h(d(t).locations,e=>(g(),o("option",{key:e.id,value:e.id},c(e.name),9,Kd))),128))],544),[[$,C.value.location_id]])]),l("div",null,[l("label",Qd,c(e.$t("common.date_from")),1),_(l("input",{"onUpdate:modelValue":a[5]||(a[5]=e=>C.value.date_from=e),onChange:z,type:"date",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,544),[[w,C.value.date_from]])])])]),l("div",Wd,[l("div",Yd,[l("div",Xd,c(e.$t("inventory.total_inbound")),1),l("div",Zd,c(q.value.length),1),l("div",ec,c(d(s)(V.value)),1)]),l("div",tc,[l("div",ac,c(e.$t("inventory.total_outbound")),1),l("div",rc,c(M.value.length),1),l("div",ic,c(d(s)(S.value)),1)]),l("div",sc,[l("div",oc,c(e.$t("inventory.total_transfers")),1),l("div",lc,c(j.value.length),1)]),l("div",nc,[l("div",dc,c(e.$t("inventory.total_adjustments")),1),l("div",cc,c(T.value.length),1),l("div",uc,c(d(s)(I.value)),1)])]),l("div",mc,[l("div",gc,[l("h3",yc,c(e.$t("inventory.movements_list")),1)]),d(t).loading.movements?(g(),o("div",pc,[l("div",xc,[(g(),o(f,null,h(5,e=>l("div",{key:e,class:"h-16 bg-gray-200 dark:bg-gray-700 rounded"})),64))])])):0===d(t).movements.length?(g(),o("div",vc,[n(d(Y),{class:"mx-auto h-12 w-12 text-gray-400"}),l("h3",bc,c(e.$t("inventory.no_movements")),1),l("p",fc,c(e.$t("inventory.no_movements_description")),1)])):(g(),o("div",hc,[l("table",kc,[l("thead",_c,[l("tr",null,[l("th",wc,c(e.$t("inventory.item")),1),l("th",$c,c(e.$t("inventory.movement_type")),1),l("th",Cc,c(e.$t("inventory.quantity")),1),l("th",qc,c(e.$t("inventory.locations")),1),l("th",Mc,c(e.$t("inventory.unit_cost")),1),l("th",jc,c(e.$t("inventory.total_value")),1),l("th",Tc,c(e.$t("common.date")),1),l("th",Vc,c(e.$t("common.actions")),1)])]),l("tbody",Sc,[(g(!0),o(f,null,h(d(t).movements,t=>{var a,i,u,m,y,x,f,h;return g(),o("tr",{key:t.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[l("td",Ic,[l("div",Rc,[l("div",Uc,[l("div",Lc,[n(d(L),{class:"h-6 w-6 text-gray-400"})])]),l("div",Dc,[l("div",Ac,c((null==(a=t.inventory_item)?void 0:a.localized_name)||(null==(i=t.inventory_item)?void 0:i.name)),1),l("div",zc,c(null==(u=t.inventory_item)?void 0:u.sku),1)])])]),l("td",Ec,[l("span",{class:v(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",R(t.type)])},c(e.$t(`inventory.movement_types.${t.type}`)),3)]),l("td",Pc,[l("div",{class:v(["text-sm font-medium",t.is_inbound?"text-green-600 dark:text-green-400":t.is_outbound?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"])},c(t.is_inbound?"+":t.is_outbound?"-":"")+c(d(r)(t.quantity)),3)]),l("td",Oc,["transfer"===t.type?(g(),o("div",Nc,[l("div",Hc,c(e.$t("inventory.from"))+": "+c((null==(m=t.from_location)?void 0:m.name)||"-"),1),l("div",Fc,c(e.$t("inventory.to"))+": "+c((null==(y=t.to_location)?void 0:y.name)||"-"),1)])):(g(),o("div",Bc,c((null==(x=t.to_location)?void 0:x.name)||(null==(f=t.from_location)?void 0:f.name)||"-"),1))]),l("td",Gc,c(t.unit_cost?d(s)(t.unit_cost):"-"),1),l("td",Jc,c(t.total_value?d(s)(t.total_value):"-"),1),l("td",Kc,c((h=t.movement_date,new Date(h).toLocaleString())),1),l("td",Qc,[l("div",Wc,[l("button",{onClick:e=>(e=>{b.value=e,p.value=!0})(t),class:"text-primary-600 hover:text-primary-900 dark:text-primary-400 dark:hover:text-primary-300"},[n(d(D),{class:"h-4 w-4"})],8,Yc)])])])}),128))])])]))]),y.value?(g(),k(dn,{key:0,onClose:a[6]||(a[6]=e=>y.value=!1),onCreated:E})):u("",!0),p.value?(g(),k(Md,{key:1,movement:b.value,onClose:a[7]||(a[7]=e=>p.value=!1)},null,8,["movement"])):u("",!0)]))}}),Zc={class:"fixed inset-0 z-50 overflow-y-auto"},eu={class:"flex min-h-screen items-center justify-center p-4"},tu={class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full"},au={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},ru={class:"flex items-center justify-between"},iu={class:"text-lg font-medium text-gray-900 dark:text-white"},su={class:"space-y-4"},ou={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},lu={value:""},nu=["value"],du={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},cu={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},uu={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},mu={value:""},gu=["value"],yu={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},pu={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},xu={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},vu={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},bu={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},fu={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},hu={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},ku={key:0,class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg"},_u={class:"text-sm font-medium text-blue-600 dark:text-blue-400 mb-2"},wu={class:"space-y-1 text-sm text-blue-900 dark:text-blue-100"},$u={class:"flex justify-between"},Cu={class:"flex justify-between"},qu={class:"flex justify-between font-medium border-t border-blue-200 dark:border-blue-700 pt-1"},Mu={key:0,class:"flex justify-between"},ju={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Tu=["placeholder"],Vu={class:"flex items-center"},Su={class:"ml-2 block text-sm text-gray-900 dark:text-white"},Iu={class:"mt-6 flex justify-end space-x-3"},Ru=["disabled"],Uu={key:0,class:"flex items-center"},Lu={key:1},Du=s({__name:"BOMFormModal",props:{bom:{default:null},isEdit:{type:Boolean,default:!1}},emits:["close","saved"],setup(e,{emit:t}){const r=e,s=t,y=ae(),{formatNumber:p,formatCurrency:b}=U(),k=i(!1),C=i({}),M=j({finished_item_id:"",component_item_id:"",quantity_required:0,wastage_percentage:0,is_active:!0,notes:""}),S=a(()=>r.isEdit&&r.bom),I=a(()=>y.items.filter(e=>e.id!==Number(M.finished_item_id))),R=a(()=>M.quantity_required*M.wastage_percentage/100),L=a(()=>M.quantity_required+R.value),D=a(()=>y.items.find(e=>e.id===Number(M.component_item_id))),A=a(()=>D.value?L.value*(D.value.cost_price||0):0),z=async()=>{var e,t;k.value=!0,C.value={};try{const e={...M,finished_item_id:Number(M.finished_item_id),component_item_id:Number(M.component_item_id)};let t;S.value&&r.bom||(t=await y.createBOM(e)),t&&s("saved",t)}catch(a){(null==(t=null==(e=a.response)?void 0:e.data)?void 0:t.errors)&&(C.value=a.response.data.errors)}finally{k.value=!1}},E=()=>{var e,t;r.bom&&Object.assign(M,{finished_item_id:(null==(e=r.bom.finished_item_id)?void 0:e.toString())||"",component_item_id:(null==(t=r.bom.component_item_id)?void 0:t.toString())||"",quantity_required:r.bom.quantity_required||0,wastage_percentage:r.bom.wastage_percentage||0,is_active:r.bom.is_active??!0,notes:r.bom.notes||""})};return q(()=>r.bom,E,{immediate:!0}),q(()=>M.finished_item_id,()=>{M.component_item_id===M.finished_item_id&&(M.component_item_id="")}),x(async()=>{0===y.items.length&&await y.fetchItems(),E()}),(e,t)=>(g(),o("div",Zc,[l("div",eu,[l("div",{class:"fixed inset-0 bg-black bg-opacity-25",onClick:t[0]||(t[0]=t=>e.$emit("close"))}),l("div",tu,[l("div",au,[l("div",ru,[l("h3",iu,c(S.value?e.$t("inventory.edit_bom"):e.$t("inventory.create_bom")),1),l("button",{onClick:t[1]||(t[1]=t=>e.$emit("close")),class:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"},[n(d(G),{class:"h-6 w-6"})])])]),l("form",{onSubmit:T(z,["prevent"]),class:"p-6"},[l("div",su,[l("div",null,[l("label",ou,c(e.$t("inventory.finished_item"))+" * ",1),_(l("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>M.finished_item_id=e),required:"",class:v(["block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",C.value.finished_item_id?"border-red-300 focus:border-red-500 focus:ring-red-500":""])},[l("option",lu,c(e.$t("inventory.select_finished_item")),1),(g(!0),o(f,null,h(d(y).items,e=>(g(),o("option",{key:e.id,value:e.id},c(e.localized_name||e.name)+" ("+c(e.sku)+") ",9,nu))),128))],2),[[$,M.finished_item_id]]),C.value.finished_item_id?(g(),o("p",du,c(C.value.finished_item_id[0]),1)):u("",!0),l("p",cu,c(e.$t("inventory.finished_item_help")),1)]),l("div",null,[l("label",uu,c(e.$t("inventory.component_item"))+" * ",1),_(l("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>M.component_item_id=e),required:"",class:v(["block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",C.value.component_item_id?"border-red-300 focus:border-red-500 focus:ring-red-500":""])},[l("option",mu,c(e.$t("inventory.select_component_item")),1),(g(!0),o(f,null,h(I.value,e=>(g(),o("option",{key:e.id,value:e.id},c(e.localized_name||e.name)+" ("+c(e.sku)+") ",9,gu))),128))],2),[[$,M.component_item_id]]),C.value.component_item_id?(g(),o("p",yu,c(C.value.component_item_id[0]),1)):u("",!0),l("p",pu,c(e.$t("inventory.component_item_help")),1)]),l("div",null,[l("label",xu,c(e.$t("inventory.quantity_required"))+" * ",1),_(l("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>M.quantity_required=e),type:"number",step:"0.001",min:"0",required:"",class:v(["block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",C.value.quantity_required?"border-red-300 focus:border-red-500 focus:ring-red-500":""])},null,2),[[w,M.quantity_required,void 0,{number:!0}]]),C.value.quantity_required?(g(),o("p",vu,c(C.value.quantity_required[0]),1)):u("",!0),l("p",bu,c(e.$t("inventory.quantity_required_help")),1)]),l("div",null,[l("label",fu,c(e.$t("inventory.wastage_percentage")),1),_(l("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>M.wastage_percentage=e),type:"number",step:"0.01",min:"0",max:"100",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[w,M.wastage_percentage,void 0,{number:!0}]]),l("p",hu,c(e.$t("inventory.wastage_percentage_help")),1)]),L.value>0?(g(),o("div",ku,[l("div",_u,c(e.$t("inventory.calculated_totals")),1),l("div",wu,[l("div",$u,[l("span",null,c(e.$t("inventory.base_quantity"))+":",1),l("span",null,c(d(p)(M.quantity_required)),1)]),l("div",Cu,[l("span",null,c(e.$t("inventory.wastage"))+" ("+c(d(p)(M.wastage_percentage))+"%):",1),l("span",null,c(d(p)(R.value)),1)]),l("div",qu,[l("span",null,c(e.$t("inventory.total_required"))+":",1),l("span",null,c(d(p)(L.value)),1)]),A.value>0?(g(),o("div",Mu,[l("span",null,c(e.$t("inventory.estimated_cost"))+":",1),l("span",null,c(d(b)(A.value)),1)])):u("",!0)])])):u("",!0),l("div",null,[l("label",ju,c(e.$t("inventory.notes")),1),_(l("textarea",{"onUpdate:modelValue":t[6]||(t[6]=e=>M.notes=e),rows:"3",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:e.$t("inventory.bom_notes_placeholder")},null,8,Tu),[[w,M.notes]])]),l("div",Vu,[_(l("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>M.is_active=e),type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[V,M.is_active]]),l("label",Su,c(e.$t("inventory.is_active")),1)])]),l("div",Iu,[l("button",{type:"button",onClick:t[8]||(t[8]=t=>e.$emit("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},c(e.$t("common.cancel")),1),l("button",{type:"submit",disabled:k.value,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed"},[k.value?(g(),o("span",Uu,[t[9]||(t[9]=l("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},[l("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),l("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),m(" "+c(e.$t("common.saving")),1)])):(g(),o("span",Lu,c(S.value?e.$t("common.update"):e.$t("common.create")),1))],8,Ru)])],32)])])]))}}),Au={class:"fixed inset-0 z-50 overflow-y-auto"},zu={class:"flex min-h-screen items-center justify-center p-4"},Eu={class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-3xl w-full"},Pu={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},Ou={class:"flex items-center justify-between"},Nu={class:"text-lg font-medium text-gray-900 dark:text-white"},Hu={class:"text-sm text-gray-500 dark:text-gray-400"},Fu={class:"flex items-center space-x-2"},Bu={class:"p-6"},Gu={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Ju={class:"space-y-4"},Ku={class:"text-md font-medium text-gray-900 dark:text-white"},Qu={class:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4"},Wu={class:"flex items-center"},Yu={class:"flex-shrink-0 h-12 w-12"},Xu={class:"h-12 w-12 rounded-lg bg-blue-200 dark:bg-blue-800 flex items-center justify-center"},Zu={class:"ml-4 flex-1"},em={class:"text-sm font-medium text-blue-900 dark:text-blue-100"},tm={class:"text-sm text-blue-700 dark:text-blue-300"},am={key:0,class:"text-sm text-blue-700 dark:text-blue-300"},rm={class:"mt-4 grid grid-cols-2 gap-4"},im={class:"text-xs font-medium text-blue-600 dark:text-blue-400 uppercase"},sm={class:"text-sm font-semibold text-blue-900 dark:text-blue-100"},om={class:"text-xs font-medium text-blue-600 dark:text-blue-400 uppercase"},lm={class:"text-sm font-semibold text-blue-900 dark:text-blue-100"},nm={class:"space-y-4"},dm={class:"text-md font-medium text-gray-900 dark:text-white"},cm={class:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4"},um={class:"flex items-center"},mm={class:"flex-shrink-0 h-12 w-12"},gm={class:"h-12 w-12 rounded-lg bg-green-200 dark:bg-green-800 flex items-center justify-center"},ym={class:"ml-4 flex-1"},pm={class:"text-sm font-medium text-green-900 dark:text-green-100"},xm={class:"text-sm text-green-700 dark:text-green-300"},vm={key:0,class:"text-sm text-green-700 dark:text-green-300"},bm={class:"mt-4 grid grid-cols-2 gap-4"},fm={class:"text-xs font-medium text-green-600 dark:text-green-400 uppercase"},hm={class:"text-sm font-semibold text-green-900 dark:text-green-100"},km={class:"text-xs font-medium text-green-600 dark:text-green-400 uppercase"},_m={class:"text-sm font-semibold text-green-900 dark:text-green-100"},wm={class:"lg:col-span-2 space-y-4"},$m={class:"text-md font-medium text-gray-900 dark:text-white"},Cm={class:"bg-gray-50 dark:bg-gray-900 rounded-lg p-6"},qm={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},Mm={class:"text-center"},jm={class:"text-2xl font-bold text-gray-900 dark:text-white"},Tm={class:"text-sm text-gray-500 dark:text-gray-400"},Vm={class:"text-center"},Sm={class:"text-2xl font-bold text-yellow-600 dark:text-yellow-400"},Im={class:"text-sm text-gray-500 dark:text-gray-400"},Rm={class:"text-center"},Um={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},Lm={class:"text-sm text-gray-500 dark:text-gray-400"},Dm={class:"text-center"},Am={class:"text-2xl font-bold text-green-600 dark:text-green-400"},zm={class:"text-sm text-gray-500 dark:text-gray-400"},Em={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},Pm={class:"text-sm font-medium text-gray-900 dark:text-white mb-3"},Om={class:"space-y-2 text-sm"},Nm={class:"flex justify-between"},Hm={class:"text-gray-600 dark:text-gray-400"},Fm={class:"text-gray-900 dark:text-white"},Bm={class:"flex justify-between"},Gm={class:"text-gray-600 dark:text-gray-400"},Jm={class:"text-gray-900 dark:text-white"},Km={class:"flex justify-between font-medium border-t border-gray-200 dark:border-gray-700 pt-2"},Qm={class:"text-gray-900 dark:text-white"},Wm={class:"text-gray-900 dark:text-white"},Ym={class:"flex justify-between"},Xm={class:"text-gray-600 dark:text-gray-400"},Zm={class:"text-gray-900 dark:text-white"},eg={class:"flex justify-between font-medium border-t border-gray-200 dark:border-gray-700 pt-2"},tg={class:"text-gray-900 dark:text-white"},ag={class:"text-green-600 dark:text-green-400 font-semibold"},rg={class:"lg:col-span-2 space-y-4"},ig={class:"text-md font-medium text-gray-900 dark:text-white"},sg={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},og={class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg"},lg={class:"text-sm font-medium text-blue-600 dark:text-blue-400 mb-2"},ng={class:"text-2xl font-bold text-blue-900 dark:text-blue-100"},dg={class:"text-sm text-blue-700 dark:text-blue-300"},cg={key:0,class:"lg:col-span-2 space-y-4"},ug={class:"text-md font-medium text-gray-900 dark:text-white"},mg={class:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4"},gg={class:"space-y-3"},yg={key:0},pg={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},xg={class:"mt-1 text-sm text-gray-900 dark:text-white"},vg={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},bg={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},fg={class:"mt-1"},hg={key:0},kg={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},_g={class:"mt-1 text-sm text-gray-900 dark:text-white"},wg=s({__name:"BOMDetailsModal",props:{bom:{}},emits:["close","edit","delete"],setup(e){const t=e,{t:r}=Z(),{formatNumber:i,formatCurrency:s}=U(),y=a(()=>t.bom?t.bom.quantity_required*t.bom.wastage_percentage/100:0),p=a(()=>{var e,a,r;return(null==(a=null==(e=t.bom)?void 0:e.component_item)?void 0:a.quantity)&&(null==(r=t.bom)?void 0:r.total_quantity_required)?Math.floor(t.bom.component_item.quantity/t.bom.total_quantity_required):0}),x=a(()=>{var e,a,r;const i=(null==(a=null==(e=t.bom)?void 0:e.component_item)?void 0:a.quantity)||0,s=(null==(r=t.bom)?void 0:r.total_quantity_required)||0;return i>=10*s?"sufficient":i>=s?"low":"insufficient"}),b=a(()=>{var e,a,s;const o=(null==(a=null==(e=t.bom)?void 0:e.component_item)?void 0:a.quantity)||0,l=(null==(s=t.bom)?void 0:s.total_quantity_required)||0;if("sufficient"===x.value)return r("inventory.sufficient_stock_message",{quantity:i(o)});if("low"===x.value)return r("inventory.low_stock_message",{quantity:i(o)});return r("inventory.insufficient_stock_message",{shortage:i(l-o)})});return(e,t)=>{var a,r,f,h,k,_,w,$,C,q,M,j,T,V,S,I,R,U,D,E,P,O,N,H,F,B,J,K,Q,W,Y,X,Z,ee,te,ae,re,ie,se,oe,le,ne,de,ce,ue;return g(),o("div",Au,[l("div",zu,[l("div",{class:"fixed inset-0 bg-black bg-opacity-25",onClick:t[0]||(t[0]=t=>e.$emit("close"))}),l("div",Eu,[l("div",Pu,[l("div",Ou,[l("div",null,[l("h3",Nu,c(e.$t("inventory.bom_details")),1),l("p",Hu,c((null==(r=null==(a=e.bom)?void 0:a.finished_item)?void 0:r.localized_name)||(null==(h=null==(f=e.bom)?void 0:f.finished_item)?void 0:h.name)),1)]),l("div",Fu,[l("button",{onClick:t[1]||(t[1]=t=>e.bom&&e.$emit("edit",e.bom)),class:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[n(d(A),{class:"h-4 w-4 mr-2"}),m(" "+c(e.$t("common.edit")),1)]),l("button",{onClick:t[2]||(t[2]=t=>e.bom&&e.$emit("delete",e.bom)),class:"inline-flex items-center px-3 py-2 border border-red-300 shadow-sm text-sm leading-4 font-medium rounded-md text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},[n(d(z),{class:"h-4 w-4 mr-2"}),m(" "+c(e.$t("common.delete")),1)]),l("button",{onClick:t[3]||(t[3]=t=>e.$emit("close")),class:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"},[n(d(G),{class:"h-6 w-6"})])])])]),l("div",Bu,[l("div",Gu,[l("div",Ju,[l("h4",Ku,c(e.$t("inventory.finished_item")),1),l("div",Qu,[l("div",Wu,[l("div",Yu,[l("div",Xu,[n(d(L),{class:"h-8 w-8 text-blue-600 dark:text-blue-400"})])]),l("div",Zu,[l("div",em,c((null==(_=null==(k=e.bom)?void 0:k.finished_item)?void 0:_.localized_name)||(null==($=null==(w=e.bom)?void 0:w.finished_item)?void 0:$.name)),1),l("div",tm,c(e.$t("inventory.sku"))+": "+c(null==(q=null==(C=e.bom)?void 0:C.finished_item)?void 0:q.sku),1),(null==(j=null==(M=e.bom)?void 0:M.finished_item)?void 0:j.category)?(g(),o("div",am,c(e.$t("inventory.category"))+": "+c(e.bom.finished_item.category.name),1)):u("",!0)])]),l("div",rm,[l("div",null,[l("div",im,c(e.$t("inventory.unit_price")),1),l("div",sm,c(d(s)((null==(V=null==(T=e.bom)?void 0:T.finished_item)?void 0:V.unit_price)||0)),1)]),l("div",null,[l("div",om,c(e.$t("inventory.current_stock")),1),l("div",lm,c(d(i)((null==(I=null==(S=e.bom)?void 0:S.finished_item)?void 0:I.quantity)||0)),1)])])])]),l("div",nm,[l("h4",dm,c(e.$t("inventory.component_item")),1),l("div",cm,[l("div",um,[l("div",mm,[l("div",gm,[n(d(L),{class:"h-8 w-8 text-green-600 dark:text-green-400"})])]),l("div",ym,[l("div",pm,c((null==(U=null==(R=e.bom)?void 0:R.component_item)?void 0:U.localized_name)||(null==(E=null==(D=e.bom)?void 0:D.component_item)?void 0:E.name)),1),l("div",xm,c(e.$t("inventory.sku"))+": "+c(null==(O=null==(P=e.bom)?void 0:P.component_item)?void 0:O.sku),1),(null==(H=null==(N=e.bom)?void 0:N.component_item)?void 0:H.category)?(g(),o("div",vm,c(e.$t("inventory.category"))+": "+c(e.bom.component_item.category.name),1)):u("",!0)])]),l("div",bm,[l("div",null,[l("div",fm,c(e.$t("inventory.cost_price")),1),l("div",hm,c(d(s)((null==(B=null==(F=e.bom)?void 0:F.component_item)?void 0:B.cost_price)||0)),1)]),l("div",null,[l("div",km,c(e.$t("inventory.available_stock")),1),l("div",_m,c(d(i)((null==(K=null==(J=e.bom)?void 0:J.component_item)?void 0:K.quantity)||0)),1)])])])]),l("div",wm,[l("h4",$m,c(e.$t("inventory.bom_calculations")),1),l("div",Cm,[l("div",qm,[l("div",Mm,[l("div",jm,c(d(i)((null==(Q=e.bom)?void 0:Q.quantity_required)||0)),1),l("div",Tm,c(e.$t("inventory.base_quantity")),1)]),l("div",Vm,[l("div",Sm,c(d(i)((null==(W=e.bom)?void 0:W.wastage_percentage)||0))+"% ",1),l("div",Im,c(e.$t("inventory.wastage_percentage")),1)]),l("div",Rm,[l("div",Um,c(d(i)((null==(Y=e.bom)?void 0:Y.total_quantity_required)||0)),1),l("div",Lm,c(e.$t("inventory.total_required")),1)]),l("div",Dm,[l("div",Am,c(d(s)((null==(X=e.bom)?void 0:X.total_cost)||0)),1),l("div",zm,c(e.$t("inventory.total_cost")),1)])]),l("div",Em,[l("h5",Pm,c(e.$t("inventory.calculation_breakdown")),1),l("div",Om,[l("div",Nm,[l("span",Hm,c(e.$t("inventory.base_quantity"))+": ",1),l("span",Fm,c(d(i)((null==(Z=e.bom)?void 0:Z.quantity_required)||0)),1)]),l("div",Bm,[l("span",Gm,c(e.$t("inventory.wastage"))+" ("+c(d(i)((null==(ee=e.bom)?void 0:ee.wastage_percentage)||0))+"%): ",1),l("span",Jm,c(d(i)(y.value)),1)]),l("div",Km,[l("span",Qm,c(e.$t("inventory.total_required"))+": ",1),l("span",Wm,c(d(i)((null==(te=e.bom)?void 0:te.total_quantity_required)||0)),1)]),l("div",Ym,[l("span",Xm,c(e.$t("inventory.unit_cost"))+": ",1),l("span",Zm,c(d(s)((null==(re=null==(ae=e.bom)?void 0:ae.component_item)?void 0:re.cost_price)||0)),1)]),l("div",eg,[l("span",tg,c(e.$t("inventory.total_cost"))+": ",1),l("span",ag,c(d(s)((null==(ie=e.bom)?void 0:ie.total_cost)||0)),1)])])])])]),l("div",rg,[l("h4",ig,c(e.$t("inventory.production_analysis")),1),l("div",sg,[l("div",og,[l("div",lg,c(e.$t("inventory.possible_production")),1),l("div",ng,c(p.value),1),l("div",dg,c(e.$t("inventory.units_can_produce")),1)]),l("div",{class:v(["p-4 rounded-lg","sufficient"===x.value?"bg-green-50 dark:bg-green-900/20":"low"===x.value?"bg-yellow-50 dark:bg-yellow-900/20":"bg-red-50 dark:bg-red-900/20"])},[l("div",{class:v(["text-sm font-medium mb-2","sufficient"===x.value?"text-green-600 dark:text-green-400":"low"===x.value?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"])},c(e.$t("inventory.stock_status")),3),l("div",{class:v(["text-lg font-bold","sufficient"===x.value?"text-green-900 dark:text-green-100":"low"===x.value?"text-yellow-900 dark:text-yellow-100":"text-red-900 dark:text-red-100"])},c(e.$t(`inventory.stock_status_${x.value}`)),3),l("div",{class:v(["text-sm","sufficient"===x.value?"text-green-700 dark:text-green-300":"low"===x.value?"text-yellow-700 dark:text-yellow-300":"text-red-700 dark:text-red-300"])},c(b.value),3)],2)])]),(null==(se=e.bom)?void 0:se.notes)||(null==(oe=e.bom)?void 0:oe.created_at)?(g(),o("div",cg,[l("h4",ug,c(e.$t("inventory.additional_information")),1),l("div",mg,[l("dl",gg,[(null==(le=e.bom)?void 0:le.notes)?(g(),o("div",yg,[l("dt",pg,c(e.$t("inventory.notes")),1),l("dd",xg,c(e.bom.notes),1)])):u("",!0),l("div",vg,[l("div",null,[l("dt",bg,c(e.$t("common.status")),1),l("dd",fg,[l("span",{class:v(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",(null==(ne=e.bom)?void 0:ne.is_active)?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"])},c((null==(de=e.bom)?void 0:de.is_active)?e.$t("common.active"):e.$t("common.inactive")),3)])]),(null==(ce=e.bom)?void 0:ce.created_at)?(g(),o("div",hg,[l("dt",kg,c(e.$t("common.created_at")),1),l("dd",_g,c((ue=e.bom.created_at,new Date(ue).toLocaleString())),1)])):u("",!0)])])])])):u("",!0)])])])])])}}}),$g={class:"space-y-6"},Cg={class:"sm:flex sm:items-center sm:justify-between"},qg={class:"sm:flex-auto"},Mg={class:"text-lg font-medium text-gray-900 dark:text-white"},jg={class:"mt-1 text-sm text-gray-700 dark:text-gray-300"},Tg={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},Vg={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-4"},Sg={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ig={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Rg=["placeholder"],Ug={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Lg={value:""},Dg={value:"1"},Ag={value:"0"},zg={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Eg={value:""},Pg=["value"],Og={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Ng={class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg"},Hg={class:"text-sm font-medium text-blue-600 dark:text-blue-400"},Fg={class:"text-2xl font-bold text-blue-900 dark:text-blue-100"},Bg={class:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg"},Gg={class:"text-sm font-medium text-green-600 dark:text-green-400"},Jg={class:"text-2xl font-bold text-green-900 dark:text-green-100"},Kg={class:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg"},Qg={class:"text-sm font-medium text-yellow-600 dark:text-yellow-400"},Wg={class:"text-2xl font-bold text-yellow-900 dark:text-yellow-100"},Yg={class:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg"},Xg={class:"text-sm font-medium text-purple-600 dark:text-purple-400"},Zg={class:"text-2xl font-bold text-purple-900 dark:text-purple-100"},ey={class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden"},ty={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},ay={class:"text-lg font-medium text-gray-900 dark:text-white"},ry={key:0,class:"p-6"},iy={class:"animate-pulse space-y-4"},sy={key:1,class:"p-6 text-center"},oy={class:"mt-2 text-sm font-medium text-gray-900 dark:text-white"},ly={class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},ny={class:"mt-6"},dy={key:2,class:"overflow-x-auto"},cy={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},uy={class:"bg-gray-50 dark:bg-gray-900"},my={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},gy={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},yy={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},py={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},xy={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},vy={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},by={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},fy={class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},hy={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},ky={class:"px-6 py-4 whitespace-nowrap"},_y={class:"flex items-center"},wy={class:"flex-shrink-0 h-10 w-10"},$y={class:"h-10 w-10 rounded-lg bg-blue-100 dark:bg-blue-900/20 flex items-center justify-center"},Cy={class:"ml-4"},qy={class:"text-sm font-medium text-gray-900 dark:text-white"},My={class:"text-sm text-gray-500 dark:text-gray-400"},jy={class:"px-6 py-4 whitespace-nowrap"},Ty={class:"flex items-center"},Vy={class:"flex-shrink-0 h-8 w-8"},Sy={class:"h-8 w-8 rounded-lg bg-green-100 dark:bg-green-900/20 flex items-center justify-center"},Iy={class:"ml-3"},Ry={class:"text-sm font-medium text-gray-900 dark:text-white"},Uy={class:"text-sm text-gray-500 dark:text-gray-400"},Ly={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Dy={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Ay={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},zy={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Ey={class:"px-6 py-4 whitespace-nowrap"},Py={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Oy={class:"flex justify-end space-x-2"},Ny=["onClick"],Hy=["onClick"],Fy=["onClick"],By=s({__name:"BOMManagement",setup(e){const t=ae(),{formatNumber:r,formatCurrency:s}=U(),y=i(!1),p=i(!1),b=i(!1),C=i(!1),q=i(null),M=i({search:"",is_active:"",category_id:""}),j=a(()=>t.boms.filter(e=>e.is_active)),T=a(()=>{const e=new Set;return t.boms.forEach(t=>{t.finished_item_id&&e.add(t.finished_item_id)}),Array.from(e)}),V=a(()=>{const e=new Set;return t.boms.forEach(t=>{t.component_item_id&&e.add(t.component_item_id)}),Array.from(e)}),S=((e,t)=>{let a;return function(...r){clearTimeout(a),a=setTimeout(()=>{clearTimeout(a),e(...r)},t)}})(()=>{I()},300),I=()=>{const e={...M.value};Object.keys(e).forEach(t=>{""===e[t]&&delete e[t]}),t.fetchBOMs(e)},R=e=>{q.value=e,p.value=!0,b.value=!1},E=e=>{q.value=e,C.value=!0,b.value=!1},P=async()=>{if(q.value)try{C.value=!1,q.value=null,I()}catch(e){}},O=()=>{y.value=!1,p.value=!1,q.value=null},H=()=>{O(),I()};return x(()=>{I()}),(e,a)=>(g(),o("div",$g,[l("div",Cg,[l("div",qg,[l("h2",Mg,c(e.$t("inventory.bom_management")),1),l("p",jg,c(e.$t("inventory.bom_description")),1)]),l("div",Tg,[l("button",{onClick:a[0]||(a[0]=e=>y.value=!0),type:"button",class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},[n(d(N),{class:"h-4 w-4 mr-2"}),m(" "+c(e.$t("inventory.create_bom")),1)])])]),l("div",Vg,[l("div",Sg,[l("div",null,[l("label",Ig,c(e.$t("inventory.finished_item")),1),_(l("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>M.value.search=e),onInput:a[2]||(a[2]=(...e)=>d(S)&&d(S)(...e)),type:"text",placeholder:e.$t("inventory.search_finished_items"),class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,40,Rg),[[w,M.value.search]])]),l("div",null,[l("label",Ug,c(e.$t("common.status")),1),_(l("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>M.value.is_active=e),onChange:I,class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[l("option",Lg,c(e.$t("common.all_statuses")),1),l("option",Dg,c(e.$t("common.active")),1),l("option",Ag,c(e.$t("common.inactive")),1)],544),[[$,M.value.is_active]])]),l("div",null,[l("label",zg,c(e.$t("inventory.category")),1),_(l("select",{"onUpdate:modelValue":a[4]||(a[4]=e=>M.value.category_id=e),onChange:I,class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[l("option",Eg,c(e.$t("common.all_categories")),1),(g(!0),o(f,null,h(d(t).categories,e=>(g(),o("option",{key:e.id,value:e.id},c(e.name),9,Pg))),128))],544),[[$,M.value.category_id]])])])]),l("div",Og,[l("div",Ng,[l("div",Hg,c(e.$t("inventory.total_boms")),1),l("div",Fg,c(d(t).boms.length),1)]),l("div",Bg,[l("div",Gg,c(e.$t("inventory.active_boms")),1),l("div",Jg,c(j.value.length),1)]),l("div",Kg,[l("div",Qg,c(e.$t("inventory.finished_items")),1),l("div",Wg,c(T.value.length),1)]),l("div",Yg,[l("div",Xg,c(e.$t("inventory.component_items")),1),l("div",Zg,c(V.value.length),1)])]),l("div",ey,[l("div",ty,[l("h3",ay,c(e.$t("inventory.bom_list")),1)]),d(t).loading.boms?(g(),o("div",ry,[l("div",iy,[(g(),o(f,null,h(5,e=>l("div",{key:e,class:"h-16 bg-gray-200 dark:bg-gray-700 rounded"})),64))])])):0===d(t).boms.length?(g(),o("div",sy,[n(d(X),{class:"mx-auto h-12 w-12 text-gray-400"}),l("h3",oy,c(e.$t("inventory.no_boms")),1),l("p",ly,c(e.$t("inventory.no_boms_description")),1),l("div",ny,[l("button",{onClick:a[5]||(a[5]=e=>y.value=!0),type:"button",class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[n(d(N),{class:"h-4 w-4 mr-2"}),m(" "+c(e.$t("inventory.create_first_bom")),1)])])])):(g(),o("div",dy,[l("table",cy,[l("thead",uy,[l("tr",null,[l("th",my,c(e.$t("inventory.finished_item")),1),l("th",gy,c(e.$t("inventory.component_item")),1),l("th",yy,c(e.$t("inventory.quantity_required")),1),l("th",py,c(e.$t("inventory.wastage_percentage")),1),l("th",xy,c(e.$t("inventory.total_required")),1),l("th",vy,c(e.$t("inventory.total_cost")),1),l("th",by,c(e.$t("common.status")),1),l("th",fy,c(e.$t("common.actions")),1)])]),l("tbody",hy,[(g(!0),o(f,null,h(d(t).boms,t=>{var a,i,u,m,y,p;return g(),o("tr",{key:t.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[l("td",ky,[l("div",_y,[l("div",wy,[l("div",$y,[n(d(L),{class:"h-6 w-6 text-blue-600 dark:text-blue-400"})])]),l("div",Cy,[l("div",qy,c((null==(a=t.finished_item)?void 0:a.localized_name)||(null==(i=t.finished_item)?void 0:i.name)),1),l("div",My,c(null==(u=t.finished_item)?void 0:u.sku),1)])])]),l("td",jy,[l("div",Ty,[l("div",Vy,[l("div",Sy,[n(d(L),{class:"h-4 w-4 text-green-600 dark:text-green-400"})])]),l("div",Iy,[l("div",Ry,c((null==(m=t.component_item)?void 0:m.localized_name)||(null==(y=t.component_item)?void 0:y.name)),1),l("div",Uy,c(null==(p=t.component_item)?void 0:p.sku),1)])])]),l("td",Ly,c(d(r)(t.quantity_required)),1),l("td",Dy,c(d(r)(t.wastage_percentage))+"% ",1),l("td",Ay,c(d(r)(t.total_quantity_required||0)),1),l("td",zy,c(d(s)(t.total_cost||0)),1),l("td",Ey,[l("span",{class:v(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",t.is_active?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"])},c(t.is_active?e.$t("common.active"):e.$t("common.inactive")),3)]),l("td",Py,[l("div",Oy,[l("button",{onClick:e=>(e=>{q.value=e,b.value=!0})(t),class:"text-primary-600 hover:text-primary-900 dark:text-primary-400 dark:hover:text-primary-300"},[n(d(D),{class:"h-4 w-4"})],8,Ny),l("button",{onClick:e=>R(t),class:"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300"},[n(d(A),{class:"h-4 w-4"})],8,Hy),l("button",{onClick:e=>E(t),class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"},[n(d(z),{class:"h-4 w-4"})],8,Fy)])])])}),128))])])]))]),y.value||p.value?(g(),k(Du,{key:0,bom:q.value,"is-edit":p.value,onClose:O,onSaved:H},null,8,["bom","is-edit"])):u("",!0),b.value?(g(),k(wg,{key:1,bom:q.value,onClose:a[6]||(a[6]=e=>b.value=!1),onEdit:R,onDelete:E},null,8,["bom"])):u("",!0),C.value?(g(),k(pe,{key:2,title:e.$t("inventory.delete_bom"),message:e.$t("inventory.delete_bom_confirmation"),loading:d(t).loading.deleting,onConfirm:P,onCancel:a[7]||(a[7]=e=>C.value=!1)},null,8,["title","message","loading"])):u("",!0)]))}}),Gy={class:"fixed inset-0 z-50 overflow-y-auto"},Jy={class:"flex min-h-screen items-center justify-center p-4"},Ky={class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto"},Qy={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},Wy={class:"flex items-center justify-between"},Yy={class:"text-lg font-medium text-gray-900 dark:text-white"},Xy={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Zy={class:"md:col-span-2"},ep={class:"text-md font-medium text-gray-900 dark:text-white mb-4"},tp={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},ap=["placeholder"],rp={key:0,class:"mt-1 text-xs text-blue-600 dark:text-blue-400"},ip={key:1,class:"mt-1 text-sm text-red-600 dark:text-red-400"},sp={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},op=["placeholder"],lp={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},np=["placeholder"],dp={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},cp={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},up={value:""},mp=["value"],gp={key:0},yp={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},pp=["disabled"],xp={value:""},vp=["value"],bp={key:0},fp={key:0,class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},hp={key:1,class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},kp={class:"md:col-span-2"},_p={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},wp=["placeholder"],$p={class:"md:col-span-2"},Cp={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},qp=["placeholder"],Mp={key:0,class:"md:col-span-2"},jp={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Tp={class:"px-3 py-2 bg-gray-50 dark:bg-gray-700 rounded-md border border-gray-300 dark:border-gray-600"},Vp={class:"text-sm text-gray-900 dark:text-white"},Sp={class:"md:col-span-2"},Ip={class:"text-md font-medium text-gray-900 dark:text-white mb-4 mt-6"},Rp={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Up={value:""},Lp=["value"],Dp={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Ap={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},zp={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Ep={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Pp={class:"md:col-span-2"},Op={class:"text-md font-medium text-gray-900 dark:text-white mb-4 mt-6"},Np={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Hp=["placeholder"],Fp={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},Bp={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Gp=["placeholder"],Jp={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},Kp={class:"md:col-span-2"},Qp={class:"text-md font-medium text-gray-900 dark:text-white mb-4 mt-6"},Wp={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Yp=["placeholder"],Xp={key:0,class:"mt-1 text-xs text-blue-600 dark:text-blue-400"},Zp={key:1,class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},ex={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},tx={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},ax={class:"md:col-span-2"},rx={class:"text-md font-medium text-gray-900 dark:text-white mb-4 mt-6"},ix={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},sx=["placeholder"],ox={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},lx=["placeholder"],nx={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},dx={class:"flex items-center"},cx={class:"ml-2 block text-sm text-gray-900 dark:text-white"},ux={class:"flex items-center"},mx={class:"ml-2 block text-sm text-gray-900 dark:text-white"},gx={class:"flex items-center"},yx={class:"ml-2 block text-sm text-gray-900 dark:text-white"},px={class:"md:col-span-2"},xx={class:"text-md font-medium text-gray-900 dark:text-white mb-4 mt-6"},vx={class:"mt-2"},bx={class:"flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md dark:border-gray-600"},fx={class:"space-y-1 text-center"},hx={class:"flex text-sm text-gray-600 dark:text-gray-400"},kx={class:"relative cursor-pointer bg-white dark:bg-gray-800 rounded-md font-medium text-primary-600 hover:text-primary-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-primary-500"},_x={class:"pl-1"},wx={class:"text-xs text-gray-500 dark:text-gray-400"},$x={key:0,class:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4"},Cx=["src","alt"],qx=["onClick"],Mx={class:"mt-8 flex justify-end space-x-3"},jx=["disabled"],Tx={key:0,class:"flex items-center"},Vx={key:1},Sx=s({__name:"ItemFormModal",props:{item:{default:null},isEdit:{type:Boolean,default:!1}},emits:["close","saved"],setup(e,{emit:t}){const r=e,s=t,y=ae(),p=i(!1),b=i({}),k=i(),C=i([]),M=i([]),S=j({name:"",name_persian:"",description:"",description_persian:"",sku:"",category_id:"",main_category_id:"",location_id:"",quantity:0,unit_price:null,cost_price:null,gold_purity:null,weight:null,serial_number:"",batch_number:"",expiry_date:"",minimum_stock:null,maximum_stock:null,is_active:!0,track_serial:!1,track_batch:!1}),I=a(()=>r.isEdit&&r.item),R=a(()=>y.categories.filter(e=>!e.parent_id)),U=a(()=>S.main_category_id?y.categories.filter(e=>e.parent_id===parseInt(S.main_category_id)):[]),L=a(()=>S.category_id?y.categories.find(e=>e.id===parseInt(S.category_id)):S.main_category_id?y.categories.find(e=>e.id===parseInt(S.main_category_id)):null),D=a(()=>S.category_id?y.categories.find(e=>e.id===parseInt(S.category_id)):null),A=a(()=>{const e=[];if(S.main_category_id){const t=y.categories.find(e=>e.id===parseInt(S.main_category_id));t&&e.push(t.localized_name||t.name)}if(S.category_id&&S.category_id!==S.main_category_id){const t=y.categories.find(e=>e.id===parseInt(S.category_id));t&&e.push(t.localized_name||t.name)}return e.join(" > ")}),z=e=>{const t=e.target.files;t&&Array.from(t).forEach(e=>{if(e.type.startsWith("image/")){C.value.push(e);const t=new FileReader;t.onload=e=>{var t;(null==(t=e.target)?void 0:t.result)&&M.value.push(e.target.result)},t.readAsDataURL(e)}})},E=()=>{S.category_id="";const e=y.categories.find(e=>e.id===parseInt(S.main_category_id));(null==e?void 0:e.default_gold_purity)&&!S.gold_purity&&(S.gold_purity=e.default_gold_purity)},P=()=>{const e=y.categories.find(e=>e.id===parseInt(S.category_id));(null==e?void 0:e.default_gold_purity)&&(S.gold_purity=e.default_gold_purity),!S.name&&e&&(S.name=e.name),!S.name_persian&&(null==e?void 0:e.name_persian)&&(S.name_persian=e.name_persian)},O=async()=>{var e,t;p.value=!0,b.value={};try{const e=new FormData;let t;Object.entries(S).forEach(([t,a])=>{null!==a&&""!==a&&("boolean"==typeof a?e.append(t,a?"1":"0"):e.append(t,a.toString()))}),!S.category_id&&S.main_category_id&&e.append("category_id",S.main_category_id.toString()),C.value.forEach((t,a)=>{e.append(`images[${a}]`,t)}),t=I.value&&r.item?await y.updateItem(r.item.id,e):await y.createItem(e),t&&s("saved",t)}catch(a){(null==(t=null==(e=a.response)?void 0:e.data)?void 0:t.errors)&&(b.value=a.response.data.errors)}finally{p.value=!1}},N=()=>{r.item&&Object.assign(S,{name:r.item.name||"",name_persian:r.item.name_persian||"",description:r.item.description||"",description_persian:r.item.description_persian||"",sku:r.item.sku||"",category_id:r.item.category_id||"",main_category_id:r.item.main_category_id||"",location_id:r.item.location_id||"",quantity:r.item.quantity||0,unit_price:r.item.unit_price||0,cost_price:r.item.cost_price||0,gold_purity:r.item.gold_purity||null,weight:r.item.weight||null,serial_number:r.item.serial_number||"",batch_number:r.item.batch_number||"",expiry_date:r.item.expiry_date||"",minimum_stock:r.item.minimum_stock||null,maximum_stock:r.item.maximum_stock||null,is_active:r.item.is_active??!0,track_serial:r.item.track_serial||!1,track_batch:r.item.track_batch||!1})};return q(()=>r.item,N,{immediate:!0}),x(async()=>{try{const e=[];0===y.categories.length&&e.push(y.fetchCategories()),0===y.locations.length&&e.push(y.fetchLocations()),await Promise.all(e),N()}catch(e){}}),(e,t)=>{var a,r,i;return g(),o("div",Gy,[l("div",Jy,[l("div",{class:"fixed inset-0 bg-black bg-opacity-25",onClick:t[0]||(t[0]=t=>e.$emit("close"))}),l("div",Ky,[l("div",Qy,[l("div",Wy,[l("h3",Yy,c(I.value?e.$t("inventory.edit_item"):e.$t("inventory.add_item")),1),l("button",{onClick:t[1]||(t[1]=t=>e.$emit("close")),class:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"},[n(d(G),{class:"h-6 w-6"})])])]),l("form",{onSubmit:T(O,["prevent"]),class:"p-6"},[l("div",Xy,[l("div",Zy,[l("h4",ep,c(e.$t("inventory.basic_information")),1)]),l("div",null,[l("label",tp,c(e.$t("inventory.name")),1),_(l("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>S.name=e),type:"text",class:v(["block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",b.value.name?"border-red-300 focus:border-red-500 focus:ring-red-500":""]),placeholder:D.value?D.value.localized_name||D.value.name:"Enter item name"},null,10,ap),[[w,S.name]]),!S.name&&D.value?(g(),o("p",rp,c(e.$t("inventory.name_auto_from_category",{category:D.value.localized_name||D.value.name})),1)):u("",!0),b.value.name?(g(),o("p",ip,c(b.value.name[0]),1)):u("",!0)]),l("div",null,[l("label",sp,c(e.$t("inventory.name_persian")),1),_(l("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>S.name_persian=e),type:"text",dir:"rtl",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:e.$t("inventory.name_persian_placeholder")},null,8,op),[[w,S.name_persian]])]),l("div",null,[l("label",lp,c(e.$t("inventory.sku"))+" * ",1),_(l("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>S.sku=e),type:"text",required:"",class:v(["block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",b.value.sku?"border-red-300 focus:border-red-500 focus:ring-red-500":""]),placeholder:e.$t("inventory.sku_placeholder")},null,10,np),[[w,S.sku]]),b.value.sku?(g(),o("p",dp,c(b.value.sku[0]),1)):u("",!0)]),l("div",null,[l("label",cp,c(e.$t("inventory.categories.main_category")),1),_(l("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>S.main_category_id=e),onChange:E,class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[l("option",up,c(e.$t("inventory.categories.select_main_category")),1),(g(!0),o(f,null,h(R.value,e=>(g(),o("option",{key:e.id,value:e.id},[e.image_path?(g(),o("span",gp,"🖼️ ")):u("",!0),m(c(e.localized_name||e.name),1)],8,mp))),128))],544),[[$,S.main_category_id]])]),l("div",null,[l("label",yp,c(e.$t("inventory.categories.subcategory")),1),_(l("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>S.category_id=e),onChange:P,disabled:!S.main_category_id||0===U.value.length,class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"},[l("option",xp,c(e.$t("inventory.categories.select_subcategory")),1),(g(!0),o(f,null,h(U.value,e=>(g(),o("option",{key:e.id,value:e.id},[e.image_path?(g(),o("span",bp,"🖼️ ")):u("",!0),m(c(e.localized_name||e.name),1)],8,vp))),128))],40,pp),[[$,S.category_id]]),S.main_category_id?0===U.value.length?(g(),o("p",hp,c(e.$t("inventory.categories.no_subcategories")),1)):u("",!0):(g(),o("p",fp,c(e.$t("inventory.categories.select_main_first")),1))]),l("div",kp,[l("label",_p,c(e.$t("inventory.description")),1),_(l("textarea",{"onUpdate:modelValue":t[7]||(t[7]=e=>S.description=e),rows:"3",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:e.$t("inventory.description_placeholder")},null,8,wp),[[w,S.description]])]),l("div",$p,[l("label",Cp,c(e.$t("inventory.description_persian")),1),_(l("textarea",{"onUpdate:modelValue":t[8]||(t[8]=e=>S.description_persian=e),rows:"3",dir:"rtl",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:e.$t("inventory.description_persian_placeholder")},null,8,qp),[[w,S.description_persian]])]),A.value?(g(),o("div",Mp,[l("label",jp,c(e.$t("inventory.categories.category_path")),1),l("div",Tp,[l("span",Vp,c(A.value),1)])])):u("",!0),l("div",Sp,[l("h4",Ip,c(e.$t("inventory.location_stock")),1)]),l("div",null,[l("label",Rp,c(e.$t("inventory.location")),1),_(l("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>S.location_id=e),class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[l("option",Up,c(e.$t("inventory.select_location")),1),(g(!0),o(f,null,h(d(y).locations,e=>(g(),o("option",{key:e.id,value:e.id},c(e.name),9,Lp))),128))],512),[[$,S.location_id]])]),l("div",null,[l("label",Dp,c(e.$t("inventory.quantity"))+" * ",1),_(l("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>S.quantity=e),type:"number",step:"0.001",min:"0",required:"",class:v(["block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",b.value.quantity?"border-red-300 focus:border-red-500 focus:ring-red-500":""])},null,2),[[w,S.quantity,void 0,{number:!0}]]),b.value.quantity?(g(),o("p",Ap,c(b.value.quantity[0]),1)):u("",!0)]),l("div",null,[l("label",zp,c(e.$t("inventory.minimum_stock")),1),_(l("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>S.minimum_stock=e),type:"number",step:"0.001",min:"0",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[w,S.minimum_stock,void 0,{number:!0}]])]),l("div",null,[l("label",Ep,c(e.$t("inventory.maximum_stock")),1),_(l("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>S.maximum_stock=e),type:"number",step:"0.001",min:"0",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[w,S.maximum_stock,void 0,{number:!0}]])]),l("div",Pp,[l("h4",Op,c(e.$t("inventory.pricing")),1)]),l("div",null,[l("label",Np,c(e.$t("inventory.unit_price")),1),_(l("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>S.unit_price=e),type:"number",step:"0.01",min:"0",placeholder:e.$t("inventory.price_on_request"),class:v(["block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",b.value.unit_price?"border-red-300 focus:border-red-500 focus:ring-red-500":""])},null,10,Hp),[[w,S.unit_price,void 0,{number:!0}]]),b.value.unit_price?(g(),o("p",Fp,c(b.value.unit_price[0]),1)):u("",!0)]),l("div",null,[l("label",Bp,c(e.$t("inventory.cost_price")),1),_(l("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>S.cost_price=e),type:"number",step:"0.01",min:"0",placeholder:e.$t("inventory.price_on_request"),class:v(["block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",b.value.cost_price?"border-red-300 focus:border-red-500 focus:ring-red-500":""])},null,10,Gp),[[w,S.cost_price,void 0,{number:!0}]]),b.value.cost_price?(g(),o("p",Jp,c(b.value.cost_price[0]),1)):u("",!0)]),l("div",Kp,[l("h4",Qp,c(e.$t("inventory.jewelry_info")),1)]),l("div",null,[l("label",Wp,c(e.$t("inventory.gold_purity")),1),_(l("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>S.gold_purity=e),type:"number",step:"0.001",min:"0",max:"24",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:(null==(a=L.value)?void 0:a.default_gold_purity)?L.value.default_gold_purity.toString():"18.000"},null,8,Yp),[[w,S.gold_purity,void 0,{number:!0}]]),(null==(r=L.value)?void 0:r.default_gold_purity)?(g(),o("p",Xp,c(e.$t("inventory.categories.default_from_category",{purity:(i=L.value.default_gold_purity,`${("string"==typeof i?parseFloat(i):i).toFixed(1)}K`),category:L.value.localized_name||L.value.name})),1)):(g(),o("p",Zp,c(e.$t("inventory.gold_purity_help")),1))]),l("div",null,[l("label",ex,c(e.$t("inventory.weight")),1),_(l("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>S.weight=e),type:"number",step:"0.001",min:"0",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:"0.000"},null,512),[[w,S.weight,void 0,{number:!0}]]),l("p",tx,c(e.$t("inventory.weight_help")),1)]),l("div",ax,[l("h4",rx,c(e.$t("inventory.tracking")),1)]),l("div",null,[l("label",ix,c(e.$t("inventory.serial_number")),1),_(l("input",{"onUpdate:modelValue":t[17]||(t[17]=e=>S.serial_number=e),type:"text",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:e.$t("inventory.serial_number_placeholder")},null,8,sx),[[w,S.serial_number]])]),l("div",null,[l("label",ox,c(e.$t("inventory.batch_number")),1),_(l("input",{"onUpdate:modelValue":t[18]||(t[18]=e=>S.batch_number=e),type:"text",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:e.$t("inventory.batch_number_placeholder")},null,8,lx),[[w,S.batch_number]])]),l("div",null,[l("label",nx,c(e.$t("inventory.expiry_date")),1),_(l("input",{"onUpdate:modelValue":t[19]||(t[19]=e=>S.expiry_date=e),type:"date",class:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[w,S.expiry_date]])]),l("div",dx,[_(l("input",{"onUpdate:modelValue":t[20]||(t[20]=e=>S.track_serial=e),type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[V,S.track_serial]]),l("label",cx,c(e.$t("inventory.track_serial")),1)]),l("div",ux,[_(l("input",{"onUpdate:modelValue":t[21]||(t[21]=e=>S.track_batch=e),type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[V,S.track_batch]]),l("label",mx,c(e.$t("inventory.track_batch")),1)]),l("div",gx,[_(l("input",{"onUpdate:modelValue":t[22]||(t[22]=e=>S.is_active=e),type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[V,S.is_active]]),l("label",yx,c(e.$t("inventory.is_active")),1)]),l("div",px,[l("h4",xx,c(e.$t("inventory.images")),1),l("div",vx,[l("div",bx,[l("div",fx,[n(d(F),{class:"mx-auto h-12 w-12 text-gray-400"}),l("div",hx,[l("label",kx,[l("span",null,c(e.$t("inventory.upload_image")),1),l("input",{ref_key:"imageInput",ref:k,type:"file",accept:"image/*",multiple:"",class:"sr-only",onChange:z},null,544)]),l("p",_x,c(e.$t("inventory.or_drag_drop")),1)]),l("p",wx,c(e.$t("inventory.image_formats")),1)])]),M.value.length>0?(g(),o("div",$x,[(g(!0),o(f,null,h(M.value,(e,t)=>(g(),o("div",{key:t,class:"relative"},[l("img",{src:e,alt:`Preview ${t+1}`,class:"h-24 w-24 object-cover rounded-lg"},null,8,Cx),l("button",{onClick:e=>(e=>{C.value.splice(e,1),M.value.splice(e,1)})(t),type:"button",class:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600"},[n(d(G),{class:"h-4 w-4"})],8,qx)]))),128))])):u("",!0)])])]),l("div",Mx,[l("button",{type:"button",onClick:t[23]||(t[23]=t=>e.$emit("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},c(e.$t("common.cancel")),1),l("button",{type:"submit",disabled:p.value,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed"},[p.value?(g(),o("span",Tx,[t[24]||(t[24]=l("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},[l("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),l("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),m(" "+c(e.$t("common.saving")),1)])):(g(),o("span",Vx,c(I.value?e.$t("common.update"):e.$t("common.create")),1))],8,jx)])],32)])])])}}}),Ix={class:"fixed inset-0 z-50 overflow-y-auto"},Rx={class:"flex min-h-screen items-center justify-center p-4"},Ux={class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto"},Lx={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},Dx={class:"flex items-center justify-between"},Ax={class:"text-lg font-medium text-gray-900 dark:text-white"},zx={class:"text-sm text-gray-500 dark:text-gray-400"},Ex={class:"flex items-center space-x-2"},Px={class:"p-6"},Ox={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Nx={class:"lg:col-span-2 space-y-6"},Hx={class:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4"},Fx={class:"text-md font-medium text-gray-900 dark:text-white mb-4"},Bx={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Gx={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Jx={class:"mt-1 text-sm text-gray-900 dark:text-white"},Kx={key:0},Qx={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Wx={class:"mt-1 text-sm text-gray-900 dark:text-white",dir:"rtl"},Yx={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Xx={class:"mt-1 text-sm text-gray-900 dark:text-white"},Zx={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},ev={class:"mt-1 text-sm text-gray-900 dark:text-white"},tv={key:1,class:"md:col-span-2"},av={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},rv={class:"mt-1 text-sm text-gray-900 dark:text-white"},iv={key:2,class:"md:col-span-2"},sv={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},ov={class:"mt-1 text-sm text-gray-900 dark:text-white",dir:"rtl"},lv={class:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4"},nv={class:"text-md font-medium text-gray-900 dark:text-white mb-4"},dv={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},cv={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},uv={class:"mt-1 text-lg font-semibold text-gray-900 dark:text-white"},mv={key:0},gv={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},yv={class:"mt-1 text-sm text-gray-900 dark:text-white"},pv={key:1},xv={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},vv={class:"mt-1 text-sm text-gray-900 dark:text-white"},bv={class:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4"},fv={class:"text-md font-medium text-gray-900 dark:text-white mb-4"},hv={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},kv={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},_v={class:"mt-1 text-lg font-semibold text-green-600 dark:text-green-400"},wv={key:0},$v={key:1,class:"text-gray-500 dark:text-gray-400 italic text-sm"},Cv={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},qv={class:"mt-1 text-lg font-semibold text-gray-900 dark:text-white"},Mv={key:0},jv={key:1,class:"text-gray-500 dark:text-gray-400 italic text-sm"},Tv={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Vv={class:"mt-1 text-lg font-semibold text-blue-600 dark:text-blue-400"},Sv={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Iv={class:"mt-1 text-lg font-semibold text-gray-900 dark:text-white"},Rv={key:0,class:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4"},Uv={class:"text-md font-medium text-gray-900 dark:text-white mb-4"},Lv={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Dv={key:0},Av={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},zv={class:"mt-1 text-sm text-gray-900 dark:text-white"},Ev={key:1},Pv={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Ov={class:"mt-1 text-sm text-gray-900 dark:text-white"},Nv={key:1,class:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4"},Hv={class:"text-md font-medium text-gray-900 dark:text-white mb-4"},Fv={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Bv={key:0},Gv={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Jv={class:"mt-1 text-sm text-gray-900 dark:text-white font-mono"},Kv={key:1},Qv={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Wv={class:"mt-1 text-sm text-gray-900 dark:text-white font-mono"},Yv={key:2},Xv={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Zv={class:"mt-1 text-sm text-gray-900 dark:text-white"},eb={class:"space-y-6"},tb={class:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4"},ab={class:"text-md font-medium text-gray-900 dark:text-white mb-4"},rb={class:"space-y-3"},ib={class:"flex items-center justify-between"},sb={class:"text-sm text-gray-500 dark:text-gray-400"},ob={key:0,class:"flex items-center justify-between"},lb={class:"text-sm text-gray-500 dark:text-gray-400"},nb={class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400"},db={key:1,class:"flex items-center justify-between"},cb={class:"text-sm text-gray-500 dark:text-gray-400"},ub={class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400"},mb={key:2,class:"flex items-center justify-between"},gb={class:"text-sm text-gray-500 dark:text-gray-400"},yb={class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"},pb={key:0,class:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4"},xb={class:"text-md font-medium text-gray-900 dark:text-white mb-4"},vb={class:"space-y-3"},bb={key:0,class:"flex items-center"},fb={class:"text-sm text-gray-900 dark:text-white"},hb={key:1,class:"flex items-center"},kb={class:"text-sm text-gray-900 dark:text-white"},_b={class:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4"},wb={class:"text-md font-medium text-gray-900 dark:text-white mb-4"},$b={class:"space-y-3"},Cb={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},qb={class:"mt-1 text-sm text-gray-900 dark:text-white"},Mb={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},jb={class:"mt-1 text-sm text-gray-900 dark:text-white"},Tb={class:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4"},Vb={class:"text-md font-medium text-gray-900 dark:text-white mb-4"},Sb={class:"space-y-2"},Ib=s({__name:"ItemDetailsModal",props:{item:{}},emits:["close","edit","delete"],setup(e){const{formatNumber:t,formatCurrency:a}=U(),r=e=>e?new Date(e).toLocaleString():"-",i=()=>{},s=()=>{},y=()=>{};return(e,p)=>{var x,b,f,h,k,_,w,$,C,q,M,j,T,V,S,I,R,U,L,D,E,P,O,N,H,F,B,J,Q,W,Y,X,Z,ee,te,ae,re,ie,se,oe,le,ne,de;return g(),o("div",Ix,[l("div",Rx,[l("div",{class:"fixed inset-0 bg-black bg-opacity-25",onClick:p[0]||(p[0]=t=>e.$emit("close"))}),l("div",Ux,[l("div",Lx,[l("div",Dx,[l("div",null,[l("h3",Ax,c((null==(x=e.item)?void 0:x.localized_name)||(null==(b=e.item)?void 0:b.name)),1),l("p",zx,c(e.$t("inventory.sku"))+": "+c(null==(f=e.item)?void 0:f.sku),1)]),l("div",Ex,[l("button",{onClick:p[1]||(p[1]=t=>e.item&&e.$emit("edit",e.item)),class:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[n(d(A),{class:"h-4 w-4 mr-2"}),m(" "+c(e.$t("common.edit")),1)]),l("button",{onClick:p[2]||(p[2]=t=>e.item&&e.$emit("delete",e.item)),class:"inline-flex items-center px-3 py-2 border border-red-300 shadow-sm text-sm leading-4 font-medium rounded-md text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},[n(d(z),{class:"h-4 w-4 mr-2"}),m(" "+c(e.$t("common.delete")),1)]),l("button",{onClick:p[3]||(p[3]=t=>e.$emit("close")),class:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"},[n(d(G),{class:"h-6 w-6"})])])])]),l("div",Px,[l("div",Ox,[l("div",Nx,[l("div",Hx,[l("h4",Fx,c(e.$t("inventory.basic_information")),1),l("dl",Bx,[l("div",null,[l("dt",Gx,c(e.$t("inventory.name")),1),l("dd",Jx,c(null==(h=e.item)?void 0:h.name),1)]),(null==(k=e.item)?void 0:k.name_persian)?(g(),o("div",Kx,[l("dt",Qx,c(e.$t("inventory.name_persian")),1),l("dd",Wx,c(e.item.name_persian),1)])):u("",!0),l("div",null,[l("dt",Yx,c(e.$t("inventory.category")),1),l("dd",Xx,c((null==(w=null==(_=e.item)?void 0:_.category)?void 0:w.name)||"-"),1)]),l("div",null,[l("dt",Zx,c(e.$t("inventory.location")),1),l("dd",ev,c((null==(C=null==($=e.item)?void 0:$.location)?void 0:C.name)||"-"),1)]),(null==(q=e.item)?void 0:q.description)?(g(),o("div",tv,[l("dt",av,c(e.$t("inventory.description")),1),l("dd",rv,c(e.item.description),1)])):u("",!0),(null==(M=e.item)?void 0:M.description_persian)?(g(),o("div",iv,[l("dt",sv,c(e.$t("inventory.description_persian")),1),l("dd",ov,c(e.item.description_persian),1)])):u("",!0)])]),l("div",lv,[l("h4",nv,c(e.$t("inventory.stock_information")),1),l("dl",dv,[l("div",null,[l("dt",cv,c(e.$t("inventory.current_quantity")),1),l("dd",uv,c(d(t)((null==(j=e.item)?void 0:j.quantity)||0)),1)]),(null==(T=e.item)?void 0:T.minimum_stock)?(g(),o("div",mv,[l("dt",gv,c(e.$t("inventory.minimum_stock")),1),l("dd",yv,c(d(t)(e.item.minimum_stock)),1)])):u("",!0),(null==(V=e.item)?void 0:V.maximum_stock)?(g(),o("div",pv,[l("dt",xv,c(e.$t("inventory.maximum_stock")),1),l("dd",vv,c(d(t)(e.item.maximum_stock)),1)])):u("",!0)])]),l("div",bv,[l("h4",fv,c(e.$t("inventory.pricing")),1),l("dl",hv,[l("div",null,[l("dt",kv,c(e.$t("inventory.unit_price")),1),l("dd",_v,[null!==(null==(S=e.item)?void 0:S.unit_price)&&void 0!==(null==(I=e.item)?void 0:I.unit_price)?(g(),o("span",wv,c(d(a)(e.item.unit_price)),1)):(g(),o("span",$v,c(e.$t("inventory.price_on_request")),1))])]),l("div",null,[l("dt",Cv,c(e.$t("inventory.cost_price")),1),l("dd",qv,[null!==(null==(R=e.item)?void 0:R.cost_price)&&void 0!==(null==(U=e.item)?void 0:U.cost_price)?(g(),o("span",Mv,c(d(a)(e.item.cost_price)),1)):(g(),o("span",jv,c(e.$t("inventory.price_on_request")),1))])]),l("div",null,[l("dt",Tv,c(e.$t("inventory.total_value")),1),l("dd",Vv,c(d(a)((null==(L=e.item)?void 0:L.total_value)||0)),1)]),l("div",null,[l("dt",Sv,c(e.$t("inventory.total_cost")),1),l("dd",Iv,c(d(a)((null==(D=e.item)?void 0:D.total_cost)||0)),1)])])]),(null==(E=e.item)?void 0:E.gold_purity)||(null==(P=e.item)?void 0:P.weight)?(g(),o("div",Rv,[l("h4",Uv,c(e.$t("inventory.jewelry_info")),1),l("dl",Lv,[(null==(O=e.item)?void 0:O.gold_purity)?(g(),o("div",Dv,[l("dt",Av,c(e.$t("inventory.gold_purity")),1),l("dd",zv,c(d(t)(e.item.gold_purity))+" "+c(e.$t("inventory.karat")),1)])):u("",!0),(null==(N=e.item)?void 0:N.weight)?(g(),o("div",Ev,[l("dt",Pv,c(e.$t("inventory.weight")),1),l("dd",Ov,c(d(t)(e.item.weight))+" "+c(e.$t("inventory.grams")),1)])):u("",!0)])])):u("",!0),(null==(H=e.item)?void 0:H.serial_number)||(null==(F=e.item)?void 0:F.batch_number)||(null==(B=e.item)?void 0:B.expiry_date)?(g(),o("div",Nv,[l("h4",Hv,c(e.$t("inventory.tracking")),1),l("dl",Fv,[(null==(J=e.item)?void 0:J.serial_number)?(g(),o("div",Bv,[l("dt",Gv,c(e.$t("inventory.serial_number")),1),l("dd",Jv,c(e.item.serial_number),1)])):u("",!0),(null==(Q=e.item)?void 0:Q.batch_number)?(g(),o("div",Kv,[l("dt",Qv,c(e.$t("inventory.batch_number")),1),l("dd",Wv,c(e.item.batch_number),1)])):u("",!0),(null==(W=e.item)?void 0:W.expiry_date)?(g(),o("div",Yv,[l("dt",Xv,c(e.$t("inventory.expiry_date")),1),l("dd",Zv,c((de=e.item.expiry_date,de?new Date(de).toLocaleDateString():"-")),1)])):u("",!0)])])):u("",!0)]),l("div",eb,[l("div",tb,[l("h4",ab,c(e.$t("common.status")),1),l("div",rb,[l("div",ib,[l("span",sb,c(e.$t("inventory.active")),1),l("span",{class:v(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",(null==(Y=e.item)?void 0:Y.is_active)?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"])},c((null==(X=e.item)?void 0:X.is_active)?e.$t("common.yes"):e.$t("common.no")),3)]),(null==(Z=e.item)?void 0:Z.is_low_stock)?(g(),o("div",ob,[l("span",lb,c(e.$t("inventory.stock_status")),1),l("span",nb,c(e.$t("inventory.low_stock")),1)])):u("",!0),(null==(ee=e.item)?void 0:ee.is_expiring)?(g(),o("div",db,[l("span",cb,c(e.$t("inventory.expiry_status")),1),l("span",ub,c(e.$t("inventory.expiring")),1)])):u("",!0),(null==(te=e.item)?void 0:te.is_expired)?(g(),o("div",mb,[l("span",gb,c(e.$t("inventory.expiry_status")),1),l("span",yb,c(e.$t("inventory.expired")),1)])):u("",!0)])]),(null==(ae=e.item)?void 0:ae.track_serial)||(null==(re=e.item)?void 0:re.track_batch)?(g(),o("div",pb,[l("h4",xb,c(e.$t("inventory.tracking_options")),1),l("div",vb,[(null==(ie=e.item)?void 0:ie.track_serial)?(g(),o("div",bb,[n(d(K),{class:"h-4 w-4 text-green-500 mr-2"}),l("span",fb,c(e.$t("inventory.track_serial")),1)])):u("",!0),(null==(se=e.item)?void 0:se.track_batch)?(g(),o("div",hb,[n(d(K),{class:"h-4 w-4 text-green-500 mr-2"}),l("span",kb,c(e.$t("inventory.track_batch")),1)])):u("",!0)])])):u("",!0),l("div",_b,[l("h4",wb,c(e.$t("inventory.timestamps")),1),l("dl",$b,[l("div",null,[l("dt",Cb,c(e.$t("common.created_at")),1),l("dd",qb,c(r(null==(oe=e.item)?void 0:oe.created_at)),1)]),l("div",null,[l("dt",Mb,c(e.$t("common.updated_at")),1),l("dd",jb,c(r(null==(le=e.item)?void 0:le.updated_at)),1)])])]),l("div",Tb,[l("h4",Vb,c(e.$t("inventory.quick_actions")),1),l("div",Sb,[l("button",{onClick:i,class:"w-full text-left px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md"},c(e.$t("inventory.view_movements")),1),l("button",{onClick:s,class:"w-full text-left px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md"},c(e.$t("inventory.adjust_stock")),1),(null==(ne=e.item)?void 0:ne.track_serial)?(g(),o("button",{key:0,onClick:y,class:"w-full text-left px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md"},c(e.$t("inventory.view_serial_numbers")),1)):u("",!0)])])])])])])])])}}}),Rb={class:"space-y-6"},Ub={class:"sm:flex sm:items-center sm:justify-between"},Lb={class:"sm:flex-auto"},Db={class:"text-2xl font-semibold text-gray-900 dark:text-white"},Ab={class:"mt-2 text-sm text-gray-700 dark:text-gray-300"},zb={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},Eb={class:"border-b border-gray-200 dark:border-gray-700"},Pb={class:"-mb-px flex space-x-8"},Ob=["onClick"],Nb={class:"mt-6"},Hb={key:0},Fb={key:1},Bb={key:2},Gb={key:3},Jb={key:4},Kb=s({__name:"InventoryView",setup(e){const t=ae(),a=i("items"),r=i(!1),s=i(!1),y=i(!1),p=i(!1),b=i(null),_=[{key:"items",label:"inventory.tabs.items"},{key:"categories",label:"inventory.tabs.categories"},{key:"audit",label:"inventory.tabs.stock_audit"},{key:"movements",label:"inventory.tabs.movements"},{key:"bom",label:"inventory.tabs.bom"}],w=e=>{b.value=e,s.value=!0,y.value=!1},$=e=>{b.value=e,y.value=!0},C=e=>{b.value=e,p.value=!0,y.value=!1},q=async()=>{if(b.value)try{await t.deleteItem(b.value.id),p.value=!1,b.value=null}catch(e){}},M=()=>{j(),t.fetchItems()},j=()=>{r.value=!1,s.value=!1,y.value=!1,b.value=null};return x(async()=>{await Promise.all([t.fetchItems(),t.fetchCategories(),t.fetchLocations()])}),(e,i)=>{var x;return g(),o("div",Rb,[l("div",Ub,[l("div",Lb,[l("h1",Db,c(e.$t("inventory.title")),1),l("p",Ab,c(e.$t("inventory.description")),1)]),l("div",zb,[l("button",{onClick:i[0]||(i[0]=e=>r.value=!0),type:"button",class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},[n(d(N),{class:"h-4 w-4 mr-2"}),m(" "+c(e.$t("inventory.add_item")),1)])])]),l("div",Eb,[l("nav",Pb,[(g(),o(f,null,h(_,t=>l("button",{key:t.key,onClick:e=>a.value=t.key,class:v(["whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm",a.value===t.key?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"])},c(e.$t(t.label)),11,Ob)),64))])]),l("div",Nb,["items"===a.value?(g(),o("div",Hb,[n(xa,{onEditItem:w,onViewItem:$,onDeleteItem:C})])):u("",!0),"categories"===a.value?(g(),o("div",Fb,[n(Ti)])):u("",!0),"audit"===a.value?(g(),o("div",Bb,[n(yl)])):u("",!0),"movements"===a.value?(g(),o("div",Gb,[n(Xc)])):u("",!0),"bom"===a.value?(g(),o("div",Jb,[n(By)])):u("",!0)]),r.value||s.value?(g(),k(Sx,{key:0,item:b.value,"is-edit":s.value,onClose:j,onSaved:M},null,8,["item","is-edit"])):u("",!0),y.value?(g(),k(Ib,{key:1,item:b.value,onClose:j,onEdit:w,onDelete:C},null,8,["item"])):u("",!0),p.value?(g(),k(pe,{key:2,title:e.$t("inventory.delete_item"),message:e.$t("inventory.delete_confirmation",{name:null==(x=b.value)?void 0:x.name}),loading:d(t).loading.deleting,onConfirm:q,onCancel:i[1]||(i[1]=e=>p.value=!1)},null,8,["title","message","loading"])):u("",!0)])}}}),Qb=Object.freeze(Object.defineProperty({__proto__:null,default:Kb},Symbol.toStringTag,{value:"Module"}));export{Qb as I,pe as _,te as a,xe as b,ae as u};
