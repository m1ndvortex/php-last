import{d as e,r as a,c as t,p as l,q as s,t as r,x as i,z as m,G as u,H as o,u as n,D as d,j as c,P as v,J as p,n as x}from"./chunk-300a47f1.js";import{a as b}from"./chunk-9984d79b.js";import{_ as y}from"./chunk-4165f9df.js";import"./chunk-e8ade734.js";import"./chunk-63a63872.js";import"./chunk-e5f6a124.js";const f={class:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8"},h={class:"sm:mx-auto sm:w-full sm:max-w-md"},g={class:"text-center"},k={class:"text-3xl font-bold text-gray-900"},w={class:"mt-2 text-sm text-gray-600"},_={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},j={class:"card"},$={key:0,class:"mb-4 p-3 bg-green-50 border border-green-200 rounded-md"},C={class:"text-sm text-green-600"},P={key:1,class:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md"},q={class:"text-sm text-red-600"},z={for:"email",class:"form-label"},V=["disabled"],B={key:0,class:"mt-1 text-sm text-red-600"},F=["disabled"],H={key:0,class:"flex items-center justify-center"},O={key:1},A={key:3,class:"text-center"},D={class:"text-sm text-gray-600 mb-4"},E=["disabled"],G={class:"mt-6 text-center"},J={class:"mt-6 text-center"},M=e({__name:"ForgotPasswordView",setup(e){const M=a({email:""}),S=a(!1),U=a(null),I=a(!1),K=a({}),L=t(()=>""!==M.value.email.trim()&&0===Object.keys(K.value).length),N=e=>{if("email"===e)M.value.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(M.value.email)?delete K.value.email:K.value.email="Please enter a valid email address":K.value.email="Email is required"},Q=async()=>{var e,a;if(N("email"),0===Object.keys(K.value).length)try{S.value=!0,U.value=null,await b.auth.forgotPassword({email:M.value.email}),I.value=!0}catch(t){U.value=(null==(a=null==(e=t.response)?void 0:e.data)?void 0:a.message)||"Failed to send reset email"}finally{S.value=!1}},R=async()=>{await Q()};return(e,a)=>{const t=p("router-link");return x(),l("div",f,[s("div",h,[s("div",g,[s("h2",k,r(e.$t("auth.forgot_password")),1),s("p",w,r(e.$t("auth.forgot_password_description")),1)])]),s("div",_,[s("div",j,[I.value?(x(),l("div",$,[s("p",C,r(e.$t("auth.reset_email_sent")),1)])):i("",!0),U.value?(x(),l("div",P,[s("p",q,r(U.value),1)])):i("",!0),I.value?(x(),l("div",A,[s("p",D,r(e.$t("auth.check_email_instructions")),1),s("button",{onClick:R,disabled:S.value,class:"btn btn-outline"},r(e.$t("auth.resend_email")),9,E)])):(x(),l("form",{key:2,onSubmit:m(Q,["prevent"]),class:"space-y-6"},[s("div",null,[s("label",z,r(e.$t("auth.email")),1),u(s("input",{id:"email","onUpdate:modelValue":a[0]||(a[0]=e=>M.value.email=e),type:"email",required:"",disabled:S.value,class:n(["form-input",{"opacity-50":S.value,"border-red-300 focus:border-red-500 focus:ring-red-500":K.value.email}]),onBlur:a[1]||(a[1]=e=>N("email"))},null,42,V),[[o,M.value.email]]),K.value.email?(x(),l("p",B,r(K.value.email),1)):i("",!0)]),s("div",null,[s("button",{type:"submit",disabled:S.value||!L.value,class:n(["w-full btn btn-primary",{"opacity-50 cursor-not-allowed":S.value||!L.value}])},[S.value?(x(),l("span",H,[a[2]||(a[2]=s("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),d(" "+r(e.$t("common.loading")),1)])):(x(),l("span",O,r(e.$t("auth.send_reset_link")),1))],10,F)])],32)),s("div",G,[c(t,{to:"/login",class:"text-sm font-medium text-primary-600 hover:text-primary-500"},{default:v(()=>[d(r(e.$t("auth.back_to_login")),1)]),_:1})]),s("div",J,[c(y)])])])])}}});export{M as default};
